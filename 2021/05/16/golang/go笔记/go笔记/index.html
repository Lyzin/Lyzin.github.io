<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Go基础编程 | 笔记小窝</title><meta name="keywords" content="Go"><meta name="author" content="刘阳"><meta name="copyright" content="刘阳"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、GO语言简介与配置 推荐资料：https:&#x2F;&#x2F;www.liwenzhou.com&#x2F; （七米老师博客，推荐） https:&#x2F;&#x2F;www.qcrao.com&#x2F; https:&#x2F;&#x2F;golang.design&#x2F; https:&#x2F;&#x2F;golang.design&#x2F;go-questions&#x2F;（程序员面试笔试宝典） https:&#x2F;&#x2F;www.flysnow.org&#x2F; https:&#x2F;&#x2F;www.cnblogs.com&#x2F;su">
<meta property="og:type" content="article">
<meta property="og:title" content="Go基础编程">
<meta property="og:url" content="https://www.lynote.top/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="笔记小窝">
<meta property="og:description" content="一、GO语言简介与配置 推荐资料：https:&#x2F;&#x2F;www.liwenzhou.com&#x2F; （七米老师博客，推荐） https:&#x2F;&#x2F;www.qcrao.com&#x2F; https:&#x2F;&#x2F;golang.design&#x2F; https:&#x2F;&#x2F;golang.design&#x2F;go-questions&#x2F;（程序员面试笔试宝典） https:&#x2F;&#x2F;www.flysnow.org&#x2F; https:&#x2F;&#x2F;www.cnblogs.com&#x2F;su">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.lynote.top/posts_cover_img/golang/go_code.jpeg">
<meta property="article:published_time" content="2021-05-16T11:31:21.000Z">
<meta property="article:modified_time" content="2024-09-29T14:21:56.443Z">
<meta property="article:author" content="刘阳">
<meta property="article:tag" content="Go">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.lynote.top/posts_cover_img/golang/go_code.jpeg"><link rel="shortcut icon" href="/img/favicon.svg"><link rel="canonical" href="https://www.lynote.top/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js',
      css: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go基础编程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-29 22:21:56'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 博客分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 博客归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/posts_cover_img/golang/go_code.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">笔记小窝</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 博客分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 博客归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Go基础编程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-16T11:31:21.000Z" title="发表于 2021-05-16 19:31:21">2021-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-29T14:21:56.443Z" title="更新于 2024-09-29 22:21:56">2024-09-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Go%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B/">Go基础编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Go基础编程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一、GO语言简介与配置"><a href="#一、GO语言简介与配置" class="headerlink" title="一、GO语言简介与配置"></a>一、GO语言简介与配置</h2><blockquote>
<h3 id="推荐资料："><a href="#推荐资料：" class="headerlink" title="推荐资料："></a>推荐资料：</h3><p><a target="_blank" rel="noopener" href="https://www.liwenzhou.com/">https://www.liwenzhou.com/</a> （七米老师博客，推荐）</p>
<p><a target="_blank" rel="noopener" href="https://www.qcrao.com/">https://www.qcrao.com/</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.design/">https://golang.design/</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.design/go-questions/%EF%BC%88%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AF%95%E5%AE%9D%E5%85%B8%EF%BC%89">https://golang.design/go-questions/（程序员面试笔试宝典）</a></p>
<p><a target="_blank" rel="noopener" href="https://www.flysnow.org/">https://www.flysnow.org/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sunsky303/default.html?page=2">https://www.cnblogs.com/sunsky303/default.html?page=2</a></p>
</blockquote>
<h3 id="1、Go包的官方地址"><a href="#1、Go包的官方地址" class="headerlink" title="1、Go包的官方地址"></a>1、Go包的官方地址</h3><blockquote>
<p>官网：<a target="_blank" rel="noopener" href="https://golang.org/dl/">https://golang.org/dl/</a></p>
<p>国内镜像站：<a target="_blank" rel="noopener" href="https://golang.google.cn/dl">https://golang.google.cn/dl</a></p>
<p>流程图地址：<a target="_blank" rel="noopener" href="https://app.diagrams.net/">https://app.diagrams.net/</a></p>
<p>Golang内置库文档：<a target="_blank" rel="noopener" href="https://studygolang.com/pkgdoc">https://studygolang.com/pkgdoc</a></p>
</blockquote>
<h3 id="2、Go优势"><a href="#2、Go优势" class="headerlink" title="2、Go优势"></a>2、Go优势</h3><blockquote>
<p>交叉编译、编译快速</p>
<p>开发效率高</p>
<p>执行性能好</p>
<p>天生支持并发</p>
<p>使用<code>UTF-8</code>编码方式来存放代码</p>
</blockquote>
<h3 id="3、学习心得"><a href="#3、学习心得" class="headerlink" title="3、学习心得"></a>3、学习心得</h3><blockquote>
<p>使用<code>golang Idea</code>编辑器或<code>vs code</code>，但是不要开启自动提示功能，使用省电模式，因为一开始就自己手写所有语法才能记得住</p>
<p>本笔记代码建议是<code>缩进4个空格</code>，但笔记代码缩进有可能不是2格，写代码时需要注意！</p>
</blockquote>
<h3 id="4、GO版本"><a href="#4、GO版本" class="headerlink" title="4、GO版本"></a>4、GO版本</h3><img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026110955968.png" class="" title="image-20211026110955968">

<h3 id="5、GOPATH"><a href="#5、GOPATH" class="headerlink" title="5、GOPATH"></a>5、GOPATH</h3><blockquote>
<p><code>gopath</code>是环境变量，用来表明写的<code>go</code>项目的工作目录</p>
<p><code>gopath</code>最好设置一个，所有代码都放到<code>gopath</code>的<code>src</code>目录下</p>
</blockquote>
<ul>
<li><p>创建GO项目的步骤</p>
<blockquote>
<ol>
<li>创建一个目录作为存放<code>Go</code>语言代码，比如：<code>/xx/go</code></li>
<li>在环境变量中新增 <code>GOPATH:/xx/go</code></li>
<li>在<code>/xx/go</code>下新建三个文件夹，分别为<ol>
<li><code>bin</code>：用来存放我们写好的go代码编译后的二进制文件</li>
<li><code>src</code>：存放<code>go</code>语言的源代码，以及第三方下载的源代码<ol>
<li>常见的<code>src</code>中代码目录结构就是：<code>golang.org</code>(网站域名) -&gt; <code>username</code>(作者机构) -&gt; 项目1&#x2F;项目2(项目名) -&gt; 模块A&#x2F;模块B&#x2F;模块C&#x2F;模块D</li>
</ol>
</li>
<li><code>pkg</code>：存放编译后的库文件或缓存文件</li>
</ol>
</li>
<li>最后把<code>/xx/go/bin</code>目录添加到<code>PATH</code>里即可</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="6、MAC配置自定义GOPATH"><a href="#6、MAC配置自定义GOPATH" class="headerlink" title="6、MAC配置自定义GOPATH"></a>6、MAC配置自定义GOPATH</h3><blockquote>
<p>通过<code>go env</code>查看go的所有环境变量，包括<code>gopath</code></p>
</blockquote>
<ul>
<li>先看默认的<code>go env</code></li>
</ul>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026113415106.png" class="" title="image-20211026113415106">

<blockquote>
<ul>
<li>可以看到默认的<code>GOPATH</code>是在: <code>/Users/xxx/go</code>下面，是<code>go</code>默认的<code>GOPATH</code>，同时可以到这个目录里去看，会看到有三个目录，也就是我们需要手动创建的三个目录</li>
</ul>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026113713432.png" class="" title="image-20211026113713432">

<ul>
<li><p><code>GOROOT</code>是<code>GO</code>安装包的位置</p>
</li>
<li><p>接下来创建自己的<code>GOPATH</code></p>
</li>
</ul>
</blockquote>
<h4 id="6-1-创建目录"><a href="#6-1-创建目录" class="headerlink" title="6.1 创建目录"></a>6.1 创建目录</h4><ul>
<li>创建go目录以及那三个目录</li>
</ul>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026113846716.png" class="" title="image-20211026113846716">

<h4 id="6-2-添加环境变量"><a href="#6-2-添加环境变量" class="headerlink" title="6.2 添加环境变量"></a>6.2 添加环境变量</h4><blockquote>
<ol>
<li><p>编辑：<code>vim   ~/.zshrc</code></p>
</li>
<li><p>添加如下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOPATH=/Users/xxx/Desktop/Code/go_study</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;GOPATH&#125;</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新加载配置文件：<code>source  ~/.zshrc</code></p>
</li>
</ol>
</blockquote>
<h4 id="6-3-查看GOPATH"><a href="#6-3-查看GOPATH" class="headerlink" title="6.3 查看GOPATH"></a>6.3 查看GOPATH</h4><blockquote>
<ol>
<li>重新查看<code>GOPATH</code>，可以看到<code>GOPATH</code>已经修改过来了</li>
</ol>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026114200717.png" class="" title="image-20211026114200717">

<h3 id="7、Windows配置GOPATH"><a href="#7、Windows配置GOPATH" class="headerlink" title="7、Windows配置GOPATH"></a>7、Windows配置GOPATH</h3><blockquote>
<p>在官网下载<code>GO</code>的安装包，默认安装完会配置默认的<code>GOROOT</code>和<code>GOPATH</code></p>
</blockquote>
<ul>
<li><p>默认的<code>GOPATH</code></p>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103003520566.png" class="" title="image-20211103003520566">
</li>
<li><p>在环境变量中默认显示<code>GOPATH</code>和<code>GOPATH</code>下的<code>bin</code></p>
<ul>
<li><p>在环境变量里打开会显示成这样：<code>GOPATH=%USERPROFILE%\go</code></p>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103004055548.png" class="" title="image-20211103004055548">
</li>
<li><p>然后看到<code>%USERPROFILE%\go</code>解析出来就是<code>C:\User\XXX\go</code></p>
</li>
</ul>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103003651813.png" class="" title="image-20211103003651813">

<ul>
<li>打开PATH可以看到最后一条是：<code>%USERPROFILE%\go\bin</code></li>
<li>所以需要修改为自己的<code>GOPATH</code>和<code>GOPATH\bin</code></li>
</ul>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103003726031.png" class="" title="image-20211103003726031"></li>
</ul>
<h4 id="7-1-修改自己的GOPATH值"><a href="#7-1-修改自己的GOPATH值" class="headerlink" title="7.1 修改自己的GOPATH值"></a>7.1 修改自己的GOPATH值</h4><blockquote>
<p>在存放<code>go</code>代码的位置创建目录，将对应的目录地址填写过来</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103004455355.png" class="" title="image-20211103004455355">

<h4 id="7-2-修改GOPATH-bin"><a href="#7-2-修改GOPATH-bin" class="headerlink" title="7.2 修改GOPATH\bin"></a>7.2 修改<code>GOPATH\bin</code></h4><blockquote>
<p>需要在<code>PATH</code>这个环境变量修改，修改成：<code>%GOPATH%\bin</code>，表示进到在上面设置的<code>GOPATH</code>的<code>bin</code>目录下</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103004636063.png" class="" title="image-20211103004636063">

<h4 id="7-3-检查GOPATH"><a href="#7-3-检查GOPATH" class="headerlink" title="7.3 检查GOPATH"></a>7.3 检查<code>GOPATH</code></h4><blockquote>
<p>看到已经修改过来了</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211103004908553.png" class="" title="image-20211103004908553">

<h3 id="8、创建代码目录"><a href="#8、创建代码目录" class="headerlink" title="8、创建代码目录"></a>8、创建代码目录</h3><blockquote>
<p>按照上述说明的进行创建目录</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026115327001.png" class="" title="image-20211026115327001">

<h3 id="9、最新配置Go开发环境"><a href="#9、最新配置Go开发环境" class="headerlink" title="9、最新配置Go开发环境"></a>9、最新配置Go开发环境</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1bV41177KD?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1bV41177KD?spm_id_from&#x3D;333.999.0.0</a></p>
</blockquote>
<h3 id="10、Goland相关配置"><a href="#10、Goland相关配置" class="headerlink" title="10、Goland相关配置"></a>10、Goland相关配置</h3><h4 id="10-1-配置go-root"><a href="#10-1-配置go-root" class="headerlink" title="10.1 配置go root"></a>10.1 配置go root</h4><blockquote>
<p>低版本的<code>goland</code>配置高版本的<code>go sdk</code>会提示报错：</p>
<p><code>&quot;The selected directory is not a valid home for Go Sdk&quot;</code></p>
<p>比如</p>
<ul>
<li>goland版本是2018.1</li>
<li>go sdk是1.17.8</li>
</ul>
<p>此时goland添加go sdk就会报错，可按如下解决</p>
</blockquote>
<blockquote>
<p>找到go sdk安装目录下的<code>go\src\runtime\internal\sys\zversion.go</code></p>
<p>添加如下代码保存</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// zversion.go ,TheVersion 为安装的go sdk版本</span></span><br><span class="line"><span class="keyword">const</span> TheVersion = <span class="string">`go1.17.8`</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>保存后重启goland编辑器，然后就可以配置go sdk了</p>
</blockquote>
<h4 id="10-2-取消代码折叠"><a href="#10-2-取消代码折叠" class="headerlink" title="10.2 取消代码折叠"></a>10.2 取消代码折叠</h4><blockquote>
<p>代码折叠之前是这样的，可以看到</p>
<ul>
<li>导入的包被折叠</li>
<li>函数参数被折叠</li>
</ul>
<p>查看的时候需要一个一个点开，很不方便</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230109235020556.png" class="" title="image-20230109235020556">

<blockquote>
<p>关闭代码折叠，配置路径在Goland编辑器的Preferences-&gt;编辑器-&gt;代码折叠</p>
<ul>
<li>去掉勾选”导入”,表示代码顶部的import语句不再折叠</li>
<li>去掉勾选”格式化字符串”,表示代码中有字符串格式化的参数都不进行折叠</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230109235242167.png" class="" title="image-20230109235242167">

<blockquote>
<p>查看取消折叠的效果，就不用手动挨个点开了</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230109235456394.png" class="" title="image-20230109235456394">

<h4 id="10-3-设置函数参数提示"><a href="#10-3-设置函数参数提示" class="headerlink" title="10.3 设置函数参数提示"></a>10.3 设置函数参数提示</h4><blockquote>
<p>可以设置在调用函数是函数形参名是否展示，配置路径在Goland编辑器的Preferences-&gt;编辑器-&gt;嵌入提示-&gt;Go</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230109235643606.png" class="" title="image-20230109235643606">

<h3 id="11、goproxy设置"><a href="#11、goproxy设置" class="headerlink" title="11、goproxy设置"></a>11、goproxy设置</h3><blockquote>
<p>参照七牛云设置即可：<a target="_blank" rel="noopener" href="https://goproxy.cn/">https://goproxy.cn/</a></p>
</blockquote>
<h4 id="11-1-windows设置"><a href="#11-1-windows设置" class="headerlink" title="11.1 windows设置"></a>11.1 windows设置</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// windows打开PowerShell并执行</span></span><br><span class="line">C:\&gt; $env:GO111MODULE = <span class="string">&quot;on&quot;</span></span><br><span class="line">C:\&gt; $env:GOPROXY = <span class="string">&quot;https://goproxy.cn&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是这样设置在goland中使用的终端是普通的命令行.exe，不是powershell，可能不会生效，所以需要这样设置</span></span><br><span class="line"><span class="keyword">go</span> env -w GO111MODULE=on</span><br><span class="line"><span class="keyword">go</span> env -w GOPROXY=<span class="string">&quot;https://goproxy.cn&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="11-2-macos-x2F-linux设置"><a href="#11-2-macos-x2F-linux设置" class="headerlink" title="11.2 macos&#x2F;linux设置"></a>11.2 macos&#x2F;linux设置</h4><blockquote>
<p>如果macos终端使用iterm2，应该是在~&#x2F;.zshrc中配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;export GO111MODULE=on&quot;</span> &gt;&gt; ~/.profile</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;export GOPROXY=https://goproxy.cn&quot;</span> &gt;&gt; ~/.profile</span><br><span class="line">$ <span class="built_in">source</span> ~/.profile</span><br></pre></td></tr></table></figure>

<h2 id="二、运行代码"><a href="#二、运行代码" class="headerlink" title="二、运行代码"></a>二、运行代码</h2><h3 id="1、第一行代码HelloWorld"><a href="#1、第一行代码HelloWorld" class="headerlink" title="1、第一行代码HelloWorld"></a>1、第一行代码HelloWorld</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;hello world!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211026110718850.png" class="" title="image-20211026110718850">

<h3 id="2、编译build"><a href="#2、编译build" class="headerlink" title="2、编译build"></a>2、编译build</h3><blockquote>
<p>构建<code>go</code>代码:<code>go build</code></p>
<ul>
<li>是通过<code>GOPATH</code>去找代码，<code>GOPATH</code>在哪，<code>GO BUILD</code>就执行在哪</li>
</ul>
<p>通过<code>-o</code>可以指定编译的可执行程序的名字: <code>go build -o &#39;hello&#39;</code></p>
</blockquote>
<h3 id="3、运行run"><a href="#3、运行run" class="headerlink" title="3、运行run"></a>3、运行run</h3><blockquote>
<p>直接运行代码</p>
<p><code>go run xxx.go</code></p>
</blockquote>
<h3 id="4、安装install"><a href="#4、安装install" class="headerlink" title="4、安装install"></a>4、安装install</h3><blockquote>
<p>分为两步</p>
<ul>
<li>先编译得到一个可执行编译文件</li>
<li>然后将可执行文件拷贝到<code>GOPATH/bin</code>目录</li>
</ul>
</blockquote>
<h3 id="5、单引号与双引号"><a href="#5、单引号与双引号" class="headerlink" title="5、单引号与双引号"></a>5、单引号与双引号</h3><blockquote>
<ul>
<li>在<code>go</code>语法中，双引号是常用的来表达字符串，如果你使用了单引号，编译器会提示出错<ul>
<li><code>invalid character literal (more than one character)</code></li>
<li>这个报错提示了无效的字符字面，超过了一个字符，因为字符串一般是大于一个字符的数量的字符串<ul>
<li>单引号只能包含一个字符，例如<code>&#39;b&#39;</code> ，程序会输出<code>98</code>表示字符<code>b</code>的<code>ascii</code>码</li>
<li><code>ascii</code>码是用数字对应字母的</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>如果非要使用单引号输出必须使用string函数转换,如下</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="type">string</span>(<span class="string">&#x27;b&#x27;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Printf</code>和<code>Println</code>的区别</p>
<p><code>Printf</code>输出后不换行,<code>Println</code>输出后自动换行<br><code>Printf</code>格式化输出,<code>Println</code>直接输出内容</p>
</blockquote>
<h3 id="6、跨平台编译代码"><a href="#6、跨平台编译代码" class="headerlink" title="6、跨平台编译代码"></a>6、跨平台编译代码</h3><blockquote>
<p><code>GO</code>代码可以做到跨平台编译，在打包时需要指定对应目标操作系统的平台和处理器架构就可以构建出跨平台的可执行程序</p>
</blockquote>
<h4 id="6-1-mac平台编译linux-windows程序"><a href="#6-1-mac平台编译linux-windows程序" class="headerlink" title="6.1 mac平台编译linux/windows程序"></a>6.1 <code>mac</code>平台编译<code>linux/windows</code>程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译64位linux程序</span></span><br><span class="line">CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译64位windows程序</span></span><br><span class="line">CGO_ENABLED=0 GOOS=win dows GOARCH=amd64 go build</span><br></pre></td></tr></table></figure>

<h4 id="6-2-linux平台编译mac-windows程序"><a href="#6-2-linux平台编译mac-windows程序" class="headerlink" title="6.2 linux平台编译mac/windows程序"></a>6.2 <code>linux</code>平台编译<code>mac/windows</code>程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译64位mac程序</span></span><br><span class="line">CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译64位windows程序</span></span><br><span class="line">CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build</span><br></pre></td></tr></table></figure>

<h4 id="6-3-windows平台编译mac-windows程序"><a href="#6-3-windows平台编译mac-windows程序" class="headerlink" title="6.3 windows平台编译mac/windows程序"></a>6.3 <code>windows</code>平台编译<code>mac/windows</code>程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译64位mac程序</span></span><br><span class="line"><span class="built_in">set</span> CGO_ENABLED=0 <span class="built_in">set</span> GOOS=darwin <span class="built_in">set</span> GOARCH=amd64 go build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译64位linux程序</span></span><br><span class="line"><span class="built_in">set</span> CGO_ENABLED=0 <span class="built_in">set</span> GOOS=linux <span class="built_in">set</span> GOARCH=amd64 go build</span><br></pre></td></tr></table></figure>

<h3 id="7、代码注释"><a href="#7、代码注释" class="headerlink" title="7、代码注释"></a>7、代码注释</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	多行注释</span></span><br><span class="line"><span class="comment">	多行注释</span></span><br><span class="line"><span class="comment">	多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="三、变量与常量"><a href="#三、变量与常量" class="headerlink" title="三、变量与常量"></a>三、变量与常量</h2><h3 id="1、第一行代码解释"><a href="#1、第一行代码解释" class="headerlink" title="1、第一行代码解释"></a>1、第一行代码解释</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里是指声明的包</span></span><br><span class="line"><span class="comment">// main包表示可以编译执行的二进制文件</span></span><br><span class="line"><span class="comment">// 非main包表示是给别人用的</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入一个fmt包，用来提供打印功能</span></span><br><span class="line"><span class="comment">// 引入的包必须是双引号</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在函数外只能放置标识符(变量、常量、函数、类型)的声明，不可以放语句</span></span><br><span class="line"><span class="comment">// 语句比如: a + b = c</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// main包必须有一个main函数，是整个程序的入口，所有代码都从main函数里进行执行</span></span><br><span class="line"><span class="comment">// main函数没有参数，也没有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;hello, go!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、标识符-x2F-关键字"><a href="#2、标识符-x2F-关键字" class="headerlink" title="2、标识符&#x2F;关键字"></a>2、标识符&#x2F;关键字</h3><h4 id="2-1-标识符"><a href="#2-1-标识符" class="headerlink" title="2.1 标识符"></a>2.1 标识符</h4><blockquote>
<p>表示定义的具有特殊意义的单词，比如变量名、常量名、函数名等等</p>
<p><code>Go</code>中由字母、数字、下划线(_)组成</p>
</blockquote>
<h4 id="2-2-关键字"><a href="#2-2-关键字" class="headerlink" title="2.2 关键字"></a>2.2 关键字</h4><blockquote>
<p>编程语言内部定义好的关键字</p>
<p>比如：<code>import</code>、<code>break、func</code>等等</p>
</blockquote>
<h3 id="3、变量声明"><a href="#3、变量声明" class="headerlink" title="3、变量声明"></a>3、变量声明</h3><blockquote>
<p><code>GO</code>语言中的变量是静态类型，需要先声明再使用</p>
</blockquote>
<h4 id="3-1-变量声明的几种方式"><a href="#3-1-变量声明的几种方式" class="headerlink" title="3.1 变量声明的几种方式"></a>3.1 变量声明的几种方式</h4><h5 id="3-1-1-var关键字"><a href="#3-1-1-var关键字" class="headerlink" title="3.1.1  var关键字"></a>3.1.1  <code>var</code>关键字</h5><h6 id="1、声明变量不赋值"><a href="#1、声明变量不赋值" class="headerlink" title="1、声明变量不赋值"></a>1、声明变量不赋值</h6><blockquote>
<ul>
<li>适用于任何地方来声明变量，比如函数外，函数内，适合声明全局变量</li>
<li>这种方式声明变量会有默认值，常见的如下<ul>
<li>字符串类型初始值为<code>&quot;&quot;</code></li>
<li>整型类型初始值为0</li>
<li>布尔类型初始值为<code>false</code></li>
</ul>
</li>
<li>变量名不可以重复声明</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量声明格式</span></span><br><span class="line"><span class="keyword">var</span> 变量名 变量类型</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量声明推荐使用小驼峰</span></span><br><span class="line"><span class="keyword">var</span> isMyName <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明后给变量赋值</span></span><br><span class="line">name = <span class="string">&quot;sam&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line">isOk = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="2、声明变量的同时赋值"><a href="#2、声明变量的同时赋值" class="headerlink" title="2、声明变量的同时赋值"></a>2、声明变量的同时赋值</h6><blockquote>
<ul>
<li>适用于任何地方来声明变量，比如函数外，函数内，适合声明全局变量</li>
<li>并且变量的值就是赋值的值</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量声明推荐使用小驼峰</span></span><br><span class="line"><span class="keyword">var</span> isMyName <span class="type">string</span> = <span class="string">&quot;sam&quot;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="3、自动推导变量类型"><a href="#3、自动推导变量类型" class="headerlink" title="3、自动推导变量类型"></a>3、自动推导变量类型</h6><blockquote>
<ul>
<li>这种方式不需要指定变量类型，直接赋值即可，<code>go</code>会自动推导出变量类型</li>
<li>适用于任何地方来声明变量，比如函数外，函数内，适合声明全局变量，不过为了能够清楚看出变量是什么类型，还是指定变量类型比较好</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量声明推荐使用小驼峰</span></span><br><span class="line"><span class="keyword">var</span> isMyName = <span class="string">&quot;sam&quot;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="4、批量声明变量"><a href="#4、批量声明变量" class="headerlink" title="4、批量声明变量"></a>4、批量声明变量</h6><blockquote>
<ul>
<li><p>因式分解形式来声明变量后会有一个初始值，也是批量声明变量</p>
</li>
<li><p>格式</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	变量名 类型</span><br><span class="line">  	变量名 类型</span><br><span class="line">  	变量名 类型</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意点：</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用批量声明变量必须指定变量类型，否则会报错</span></span><br><span class="line"><span class="comment">// 需要指定期望的变量类型</span></span><br><span class="line">syntax <span class="type">error</span>: unexpected newline, expecting <span class="keyword">type</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="5、一行声明多个变量"><a href="#5、一行声明多个变量" class="headerlink" title="5、一行声明多个变量"></a>5、一行声明多个变量</h6><blockquote>
<ul>
<li>可以使用var关键字一行声明变量，但是必须指定变量类型</li>
<li>格式</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量a,变量b,变量c,变量d 变量类型</span><br></pre></td></tr></table></figure>

<ul>
<li>注意点</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用批量声明变量必须指定变量类型，否则会报错</span></span><br><span class="line"><span class="comment">// 需要指定期望的变量类型</span></span><br><span class="line">syntax <span class="type">error</span>: unexpected newline, expecting <span class="keyword">type</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="3-1-2-短变量声明"><a href="#3-1-2-短变量声明" class="headerlink" title="3.1.2 短变量声明"></a>3.1.2 短变量声明</h5><blockquote>
<ul>
<li><p><code>go</code>语言中可以使用短变量声明方式进行声明变量，会自动推到变量类型</p>
</li>
<li><p>格式</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量名 := 变量值</span><br></pre></td></tr></table></figure>

<ul>
<li>注意</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这种方式只适用于函数体内，如果在函数体外定义，就会报错</span></span><br><span class="line"><span class="comment">// 提示不能在函数体外声明变量</span></span><br><span class="line">non-declaration statement outside function body</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如下，短变量声明</span></span><br><span class="line">sf := <span class="string">&quot;sf&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-注意点"><a href="#3-2-注意点" class="headerlink" title="3.2 注意点"></a>3.2 注意点</h4><blockquote>
<ul>
<li><p>变量声明注意点</p>
<ul>
<li><code>var</code>  变量声明，可以适用于函数内外 </li>
<li><code>:=</code>  短变量声明，只能在函数内声明</li>
<li><code>_</code>  匿名变量多用于占位，表示忽略某个值</li>
<li>同一个作用域不可重复声明同名的变量</li>
</ul>
</li>
<li><p>一个花括号就是一个作用域</p>
<ul>
<li>需要注意的是<code>Go</code>语言中变量声明必须使用，不使用就编译不过去</li>
<li>这里需要注意的是全局变量可以声明但不使用，在函数外面使用<code>var</code>声明的变量</li>
<li>非全局变量声明后赋值且必须使用，在函数内声明变量</li>
</ul>
</li>
<li><p>因为编译器会减少编译后的体积，所以声明了变量但未使用就会编译不通过</p>
</li>
<li><p><code>Go</code>语言没有什么缩进格式要求，当然好的代码格式是比较方便阅读的</p>
</li>
</ul>
</blockquote>
<h3 id="4、匿名变量"><a href="#4、匿名变量" class="headerlink" title="4、匿名变量"></a>4、匿名变量</h3><blockquote>
<p>匿名变量可以想象成linux中的标准输入，表示我不需要查看该输出，相当于忽略</p>
<p>如果想要忽略某个值，可以使用匿名变量，匿名变量使用一个下划线<code>_</code>表示</p>
<p>匿名变量不占用命名空间，不会分配内存，所以匿名变量之间不存在重复声明</p>
<p>匿名变量适用于批量声明变量</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	a1 = <span class="number">100</span></span><br><span class="line">	a2</span><br><span class="line">	_   <span class="comment">// 这里就代表将这个值以匿名变量跳过</span></span><br><span class="line">	a3 = <span class="literal">iota</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;第一个批量定义常量&quot;</span>)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, a1)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, a2)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, a3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、常量"><a href="#5、常量" class="headerlink" title="5、常量"></a>5、常量</h3><blockquote>
<p>程序运行期间固定不变的值</p>
<p>推荐在函数外部进行声明</p>
<p>常量声明以后不可以再重新赋值</p>
</blockquote>
<h4 id="5-1-常量声明"><a href="#5-1-常量声明" class="headerlink" title="5.1 常量声明"></a>5.1 常量声明</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量是指程序运行期间永不变的值</span></span><br><span class="line"><span class="keyword">const</span> pi = <span class="number">3.1415926</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(pi)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 并且常量定义后不能重新赋值</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pi = <span class="number">3.1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    pi = <span class="number">45</span>  <span class="comment">// 对常量进行重复赋值</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, pi)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出报错如下图</span></span><br><span class="line"><span class="comment">// 翻译过来就是不能指定给pi，已声明未const</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211206141410106.png" class="" title="image-20211206141410106">

<h4 id="5-2-批量声明"><a href="#5-2-批量声明" class="headerlink" title="5.2 批量声明"></a>5.2 批量声明</h4><blockquote>
<p>因式分解形式进行批量声明常量</p>
<p>批量声明变量，如果后面没写值就和上一行一样的值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量声明</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    CODE_OK = <span class="number">200</span></span><br><span class="line">    CODE_NOT_FOUND = <span class="number">404</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量声明变量，如果后面没写值就和上一行一样的值</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    n1 = <span class="number">100</span></span><br><span class="line">    n2</span><br><span class="line">    n3 = <span class="number">300</span></span><br><span class="line">    n4</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(CODE_OK) <span class="comment">// 200</span></span><br><span class="line">    fmt.Println(CODE_NOT_FOUND) <span class="comment">// 404</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &lt;---&gt;</span></span><br><span class="line">    fmt.Println(n1) <span class="comment">// 100</span></span><br><span class="line">    fmt.Println(n2) <span class="comment">// 100</span></span><br><span class="line">    fmt.Println(n3) <span class="comment">// 300</span></span><br><span class="line">    fmt.Println(n4) <span class="comment">// 300</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-iota"><a href="#5-3-iota" class="headerlink" title="5.3 iota"></a>5.3 <code>iota</code></h4><blockquote>
<p><code>iota</code>是常量计数器，只能在<code>conts</code>常量中使用</p>
<ul>
<li><code>iota</code>的初始值为0</li>
<li><code>const</code>中每新增一行常量声明，将使<code>iota</code>的计数加一</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//批量声明变量，如果后面没写值就和上一行一样的值</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    n1 = <span class="literal">iota</span> <span class="comment">// 0</span></span><br><span class="line">    n2        <span class="comment">// 1</span></span><br><span class="line">    n3        <span class="comment">// 2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    b1 = <span class="literal">iota</span> <span class="comment">// 0</span></span><br><span class="line">    b2        <span class="comment">// 1</span></span><br><span class="line">    _         <span class="comment">// 2 匿名变量表示不需要这个值，可以丢弃掉</span></span><br><span class="line">    b3        <span class="comment">// 3</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(n1) <span class="comment">// 0</span></span><br><span class="line">    fmt.Println(n2) <span class="comment">// 1</span></span><br><span class="line">    fmt.Println(n3) <span class="comment">// 2</span></span><br><span class="line">    <span class="comment">// ----</span></span><br><span class="line">    fmt.Println(b1) <span class="comment">// 0</span></span><br><span class="line">    fmt.Println(b2) <span class="comment">// 1</span></span><br><span class="line">    fmt.Println(b3) <span class="comment">// 3 因为是匿名变量将iota等于2的舍弃掉了，所以b3=3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-4-iota的几种场景"><a href="#5-4-iota的几种场景" class="headerlink" title="5.4 iota的几种场景"></a>5.4 iota的几种场景</h4><h5 id="5-4-1-iota被插队"><a href="#5-4-1-iota被插队" class="headerlink" title="5.4.1 iota被插队"></a>5.4.1 iota被插队</h5><blockquote>
<ul>
<li><code>iota</code>的核心: 每新增一行常量声明，将使<code>iota</code>的计数加一</li>
<li>同一个<code>const</code>关键字声明里，如果iota有一行被插队了，那么被插队的下一个常量仍是会继续加一</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iota插队: const中每新增一行常量声明，将使iota的计数加一，</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	b1 = <span class="literal">iota</span></span><br><span class="line">	b2 = <span class="number">100</span> <span class="comment">// 表示在const中新增一行，并且是在同一个const中</span></span><br><span class="line">	b3 = <span class="literal">iota</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<blockquote>
<ul>
<li>使用<code>const</code>关键字重新声明常量时，再新的const中iota才会置为0</li>
<li>出现<code>iota</code>才会置为0</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iota默认从0开始</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iota插队: const中每新增一行常量声明，将使iota的计数加一，</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	b1 = <span class="literal">iota</span></span><br><span class="line">	b2 = <span class="number">100</span> <span class="comment">// 表示在const中新增一行，并且是在同一个const中</span></span><br><span class="line">	b3 = <span class="literal">iota</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个常量声明在一行，那么一行的iota值是同一个</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">// d1和d2在同一行，所以iota是0，所以d1:0 + 1 = 1, d2: 0 + 2 = 2</span></span><br><span class="line">	d1, d2 = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// d3和d4在同一行，所以iota是1，所以d3:1 + 1 = 2, d4: 1 + 2 = 3</span></span><br><span class="line">	d3, d4 = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(b1) <span class="comment">// 0</span></span><br><span class="line">	fmt.Println(b2) <span class="comment">// 100</span></span><br><span class="line">	fmt.Println(b3) <span class="comment">// 2</span></span><br><span class="line">	fmt.Println(b4) <span class="comment">// 2</span></span><br><span class="line">	</span><br><span class="line">	fmt.Println(<span class="string">&quot;&lt;--&gt;&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	fmt.Println(d1) <span class="comment">// 1</span></span><br><span class="line">	fmt.Println(d2) <span class="comment">// 2</span></span><br><span class="line">	fmt.Println(d3) <span class="comment">// 2</span></span><br><span class="line">	fmt.Println(d4) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-4-3-iota位运算"><a href="#5-4-3-iota位运算" class="headerlink" title="5.4.3 iota位运算"></a>5.4.3 iota位运算</h5><h2 id="四、数据类型"><a href="#四、数据类型" class="headerlink" title="四、数据类型"></a>四、数据类型</h2><h3 id="1、整型"><a href="#1、整型" class="headerlink" title="1、整型"></a>1、整型</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/793efa912d4e">https://www.jianshu.com/p/793efa912d4e</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d02f454f6439#comments">https://www.jianshu.com/p/d02f454f6439#comments</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d02f454f6439?ivk_sa=1024320u">https://www.jianshu.com/p/d02f454f6439?ivk_sa=1024320u</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a011fb51f2f4">https://www.jianshu.com/p/a011fb51f2f4</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/tmtony/p/11804575.html">https://www.cnblogs.com/tmtony/p/11804575.html</a></p>
<p>整型分为以下两个大类，按长度分为：</p>
<ul>
<li><p>有符号整型：<code>int8、int16、int32、int64</code> </p>
</li>
<li><p>对应的无符号整型：<code>uint8、uint16、uint32、uint64</code></p>
</li>
</ul>
<p>其中，<code>uint8</code>就是我们熟知的<code>byte</code>型，<code>int16</code>对应C语言中的<code>short</code>型，<code>int64</code>对应C语言中的<code>long</code>型。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 定义整型变量</span></span><br><span class="line">    i1 := <span class="number">101</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, i1) <span class="comment">// 表示输出10进制数, 101</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%b\n&quot;</span>, i1) <span class="comment">// 10进制转换为2进制, 1100101</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%o\n&quot;</span>, i1) <span class="comment">// 10进制转换为8进制, 145</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%x\n&quot;</span>, i1) <span class="comment">// 10进制转换为16进制, 65</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 八进制,表示0-7的数字，一般以0开头，用于文件权限</span></span><br><span class="line">    i2 := <span class="number">077</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, i2) <span class="comment">// 表示将8进制转换为10进制，63</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 十六进制，表示0-f的值，一般以0x开头,用于内存地址</span></span><br><span class="line">    i3 := <span class="number">0x1234567</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, i3) <span class="comment">// 表示将16进制转换为10进制，19088743</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明int8的类型,指定数字为什么类型，否则就是int类型</span></span><br><span class="line">    i4 := <span class="type">int8</span>(<span class="number">9</span>)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, i4) <span class="comment">// 9</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, i4) <span class="comment">// int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、浮点数"><a href="#2、浮点数" class="headerlink" title="2、浮点数"></a>2、浮点数</h3><blockquote>
<p>1、Go语言支持两种浮点型数：<code>float32</code>和<code>float64</code></p>
<p>2、这两种浮点型数据格式遵循<code>IEEE 754</code>标准：</p>
<ul>
<li><code>float32</code> 的浮点数的最大范围约为 <code>3.4e38</code>，可以使用常量定义：<code>math.MaxFloat32</code></li>
<li><code>float64</code> 的浮点数的最大范围约为 <code>1.8e308</code>，可以使用一个常量定义：<code>math.MaxFloat64</code></li>
</ul>
<p>3、打印浮点数时，可以使用<code>fmt</code>包配合动词<code>%f</code></p>
<p>4、默认<code>Go</code>语言的小数都是<code>float64</code></p>
<p>5、<code>float32</code>的变量值不能赋值给<code>float64</code>位</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%f\n&quot;</span>, math.Pi) <span class="comment">// 3.141593</span></span><br><span class="line">    <span class="comment">// %.2f 表示保留小数点后两位</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%.2f\n&quot;</span>, math.Pi) <span class="comment">// 3.14</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, math.Pi) <span class="comment">// float64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义float32类型</span></span><br><span class="line">    s2 := <span class="type">float32</span>(<span class="number">1.3245</span>)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%f\n&quot;</span>, s2) <span class="comment">// 1.324500</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// float32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、布尔值"><a href="#3、布尔值" class="headerlink" title="3、布尔值"></a>3、布尔值</h3><blockquote>
<p>Go语言中以<code>bool</code>类型进行声明布尔型数据，布尔型数据只有<code>true（真）</code>和<code>false（假）</code>两个值。</p>
<p><strong>注意：</strong></p>
<ol>
<li>布尔类型变量的默认值为<code>false</code>。</li>
<li>Go 语言中不允许将整型强制转换为布尔型。</li>
<li>布尔型无法参与数值运算，也无法与其他类型进行转换。</li>
</ol>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> s1 <span class="type">bool</span> <span class="comment">// 只声明布尔值不赋值，默认值是false</span></span><br><span class="line">    s2 := <span class="literal">true</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// bool</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// bool</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// false</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、字符串"><a href="#4、字符串" class="headerlink" title="4、字符串"></a>4、字符串</h3><blockquote>
<p><code>Go</code>语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型（int、bool、float32、float64 等）一样</p>
<p><code>Go</code>语言里的字符串的内部实现使用<code>UTF-8</code>编码</p>
<p>字符串的值为<code>双引号(&quot;)</code>中的内容</p>
<p><code>Go</code>语言中字符串必须是双引号<code>(&quot;)</code>，单引号<code>(&#39;)</code>表示字符</p>
<p><code>golang</code>中<code>string</code>底层是通过<code>byte数组</code>实现的</p>
<p>中文字符在<code>unicode</code>下占<code>2个字节</code>，在<code>utf-8编</code>码下占<code>3个字节</code>，而<code>golang</code>默认编码正好是<code>utf-8</code>,所以一个中文表示3个字符</p>
</blockquote>
<h4 id="4-1-字符串"><a href="#4-1-字符串" class="headerlink" title="4.1 字符串"></a>4.1 字符串</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 字符串</span></span><br><span class="line">    s1 := <span class="string">&quot;hello&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// string</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, s1) <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单独的字母，汉字、符号表示一个字符</span></span><br><span class="line">    s2 := <span class="string">&#x27;h&#x27;</span></span><br><span class="line">    s3 := <span class="string">&#x27;e&#x27;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// int32</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// 104</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// 101</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字节: 1字节=8bit(8个二进制位)</span></span><br><span class="line">    <span class="comment">// 1个字符&#x27;A&#x27;等于1个字节</span></span><br><span class="line">    <span class="comment">// 1个utf8编码的汉字&#x27;沙&#x27; 一般占3个字节</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-转义符号"><a href="#4-2-转义符号" class="headerlink" title="4.2 转义符号"></a>4.2 转义符号</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`\r	回车符（返回行首）</span></span><br><span class="line"><span class="string">\n	换行符（直接跳到下一行的同列位置）</span></span><br><span class="line"><span class="string">\t	制表符</span></span><br><span class="line"><span class="string">\&#x27;	单引号</span></span><br><span class="line"><span class="string">\&quot;	双引号</span></span><br><span class="line"><span class="string">\\	反斜杠`</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	path := <span class="string">&quot;\&quot;D:\\Go\\src\\code.xx.name\\day01\&quot;&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, path) <span class="comment">// &quot;D:\Go\src\code.xx.name\day01&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-多行字符串"><a href="#4-3-多行字符串" class="headerlink" title="4.3 多行字符串"></a>4.3 多行字符串</h4><blockquote>
<p>输出多行字符串，需要使用反引号，在<code>esc</code>键位下方的按键</p>
<p>反引号的内容会原样输出，可以用来输出文件路径</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">`this is</span></span><br><span class="line"><span class="string">	a</span></span><br><span class="line"><span class="string">	good</span></span><br><span class="line"><span class="string">	day!</span></span><br><span class="line"><span class="string">	`</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-4-字符串长度"><a href="#4-4-字符串长度" class="headerlink" title="4.4 字符串长度"></a>4.4 字符串长度</h4><blockquote>
<p><code>len(str)</code>返回一个<code>int</code>型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;hi, go~&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="built_in">len</span>(s1)) <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-5-字符串拼接"><a href="#4-5-字符串拼接" class="headerlink" title="4.5 字符串拼接"></a>4.5 字符串拼接</h4><blockquote>
<p>返回一个新的字符串变量</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s2 := <span class="string">&quot;good&quot;</span></span><br><span class="line">	s3 := <span class="string">&quot; day&quot;</span></span><br><span class="line">	<span class="comment">// 拼接法1： +号</span></span><br><span class="line">	s4 := s2 + s3</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s4) <span class="comment">// good day</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 拼接法2：使用fmt包的Sprintf接收两个变量值然后拼接后返回给一个变量</span></span><br><span class="line">	s5 := fmt.Sprintf(<span class="string">&quot;%s%s&quot;</span>, s2, s3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s5) <span class="comment">// good day</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-6-分割"><a href="#4-6-分割" class="headerlink" title="4.6 分割"></a>4.6 分割</h4><blockquote>
<p>需要引入包<code>strings</code></p>
<p>分割后返回值为一个切片<code>list</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;hi\\go\\haha&quot;</span></span><br><span class="line">	s2 := strings.Split(s1, <span class="string">&quot;\\&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// [hi go haha]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-7-包含"><a href="#4-7-包含" class="headerlink" title="4.7 包含"></a>4.7 包含</h4><blockquote>
<p>返回值是<code>true/false</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;hi\\go\\haha&quot;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 包含</span></span><br><span class="line">	s2 := strings.Contains(s1, <span class="string">&quot;go&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// true</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 不包含</span></span><br><span class="line">	s3 := strings.Contains(s1, <span class="string">&quot;gos&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-8-前缀-x2F-后缀"><a href="#4-8-前缀-x2F-后缀" class="headerlink" title="4.8 前缀&#x2F;后缀"></a>4.8 前缀&#x2F;后缀</h4><blockquote>
<p>返回值是<code>true/false</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;hi\\go\\haha&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断前缀是否是以hi开头</span></span><br><span class="line">	s2 := strings.HasPrefix(s1, <span class="string">&quot;hi&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断后缀是否是以gos结尾</span></span><br><span class="line">	s3 := strings.HasSuffix(s1, <span class="string">&quot;gos&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-9-子串位置"><a href="#4-9-子串位置" class="headerlink" title="4.9 子串位置"></a>4.9 子串位置</h4><blockquote>
<p>返回子串的索引位置</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;hi\\go\\haha&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回子串的第一个字符出现的索引位置</span></span><br><span class="line">	s2 := strings.Index(s1, <span class="string">&quot;hi&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 返回子串最后一个字符出现的索引位置</span></span><br><span class="line">	s3 := strings.LastIndex(s1, <span class="string">&quot;go&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-10-join"><a href="#4-10-join" class="headerlink" title="4.10 join"></a>4.10 join</h4><blockquote>
<p><code>join</code>可以将数组以某个格式拼接起来，比如：<code>-</code>、<code>+</code>等</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 先将字符串切割为数组</span></span><br><span class="line">	s1 := <span class="string">&quot;hi\\go\\haha&quot;</span></span><br><span class="line">	s2 := strings.Split(s1, <span class="string">&quot;\\&quot;</span>)</span><br><span class="line">	<span class="comment">// 再将数组join连接成字符串</span></span><br><span class="line">	s3 := strings.Join(s2, <span class="string">&quot;+&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// hi+go+haha</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-11-字符串修改"><a href="#4-11-字符串修改" class="headerlink" title="4.11 字符串修改"></a>4.11 字符串修改</h4><blockquote>
<p>首先字符串不可以修改，不过可将字符串修改为其他类型再进行修改</p>
<p>将字符串先转换为一个切片，切片里保存的就是字符</p>
<p>然后对切换的字符进行重新赋值后再输出就达到了字符串修改</p>
<p><code>rune</code>类型是<code>int32</code>类型的</p>
<p><code>byte</code>是<code>uint8</code>类型的</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s2 := <span class="string">&quot;白萝卜&quot;</span></span><br><span class="line">	s3 := []<span class="type">rune</span>(s2) <span class="comment">// 把字符串强制转换成了一个rune切片,切换里保存的就是字符</span></span><br><span class="line">	s3[<span class="number">0</span>] = <span class="string">&#x27;红&#x27;</span></span><br><span class="line">	s4 := <span class="type">string</span>(s3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s4) <span class="comment">// 红萝卜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-12-强制类型转换"><a href="#4-12-强制类型转换" class="headerlink" title="4.12 强制类型转换"></a>4.12 强制类型转换</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 类型转换</span></span><br><span class="line">	<span class="comment">// 整型和浮点型转换</span></span><br><span class="line">	s1 := <span class="number">10</span></span><br><span class="line">	s2 := <span class="type">float64</span>(s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// 10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// float64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、字符类型"><a href="#5、字符类型" class="headerlink" title="5、字符类型"></a>5、字符类型</h3><blockquote>
<p>在go语言中，组成每个字符串的元素叫做<code>字符</code>，所以可以通过循环遍历拿到字符</p>
<ul>
<li>字符使用<code>单引号</code>包裹起来</li>
<li>字符的值和类型<ul>
<li>值是输出的<code>ASCII</code>的值，对应<code>ASCII</code>表查询整数对应的字符，就可以查看到字符，比如<code>a</code>对应97</li>
<li>类型是int32</li>
</ul>
</li>
<li>字符只能输入一个元素，不能大于两个</li>
<li><code>%c</code>用来原样输出字符</li>
<li>字符分类为：byte类型和rune类型</li>
</ul>
</blockquote>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 字符</span></span><br><span class="line">	char1 := <span class="string">&#x27;a&#x27;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, char1) <span class="comment">// 97</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, char1) <span class="comment">// int32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-1-字符类型一：byte类型"><a href="#5-1-字符类型一：byte类型" class="headerlink" title="5.1 字符类型一：byte类型"></a>5.1 字符类型一：byte类型</h4><blockquote>
<ul>
<li><p>uint8类型(uint表示无符号，是正整数)，表示byte（字节）类型，代表了<code>ASCII</code>码的有一个字符</p>
</li>
<li><p>字符串中的每个字符是uint8类型</p>
</li>
<li><p>一个汉字占用3个字节，一个字母占用一个字节</p>
<ul>
<li>汉字使用utf8编码</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;golang&quot;</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i&lt; <span class="built_in">len</span>(s1); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;值v:%v 原样输出:%c 类型：%T\n&quot;</span>, s1[i], s1[i], s1[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220807222652263.png" class="" title="image-20220807222652263">

<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="string">&quot;你好go&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1 len:%v\n&quot;</span>, <span class="built_in">len</span>(s1)) <span class="comment">// s1 len:8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-字符类型二：rune类型"><a href="#5-2-字符类型二：rune类型" class="headerlink" title="5.2 字符类型二：rune类型"></a>5.2 字符类型二：rune类型</h4><blockquote>
<p><code>rune</code>官方解释：</p>
<ul>
<li><p>rune is an alias for int32 and is equivalent to int32 in all ways. It is used, by convention, to distinguish character values from integer values</p>
</li>
<li><p>int32的别名，几乎在所有方面等同于int32，一般用来表示字符的</p>
</li>
<li><p>可以使用<code>%c</code>取到对应的字符</p>
</li>
<li><p>用于区分字符值（rune用来表示字符值）和整数值</p>
</li>
<li><p>当需要处理中文等其他符合字符时，都需要用到<code>rune</code>类型，<code>rune</code>类型是int32</p>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="type">rune</span> = <span class="type">int32</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str = <span class="string">&quot;hello 你好&quot;</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;len(str):&quot;</span>, <span class="built_in">len</span>(str)) <span class="comment">// 12	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>结果是12，从字符串字面量看 len(str) 的结果应该是8<ul>
<li>因为<code>go</code>是<code>utf-8</code>编码，而<code>go</code>底层字符串是用<code>byte</code>编码的，一个汉字表示3个字符</li>
<li>所以<code>str</code>的长度是<code>hello(5个字符)</code>+<code>空格(1个字符)</code>+<code>你好(6个字符)</code>&#x3D;&#96;12个字符</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>如果字符串里汉字，那么就可以将字符串转为rune类型，来计算字符串长度，这样就符合肉眼看到的字符串长度</p>
<p>转换了以后就不会单独根据汉字或字母自身占用的字符去计算长度了</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">&quot;hello 世界&quot;</span></span><br><span class="line">	str1 := []<span class="type">rune</span>(str)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> str1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;v:%c\n&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;str1:%v\n&quot;</span>, str1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;str1 len:%v\n&quot;</span>, <span class="built_in">len</span>(str1))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从执行结果来看，返回的字符串长度是8，符合我们的预期了</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220413190349824.png" class="" title="image-20220413190349824">

<h2 id="五、流程控制"><a href="#五、流程控制" class="headerlink" title="五、流程控制"></a>五、流程控制</h2><h3 id="1、if语句"><a href="#1、if语句" class="headerlink" title="1、if语句"></a>1、if语句</h3><blockquote>
<p>常见的<code>if</code>判断语句</p>
<p>格式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式 &#123;</span><br><span class="line">  	语句<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  	语句<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-1-单个if语句"><a href="#1-1-单个if语句" class="headerlink" title="1.1 单个if语句"></a>1.1 单个if语句</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 类型转换</span></span><br><span class="line">	<span class="comment">// 整型和浮点型转换</span></span><br><span class="line">	s1 := <span class="number">10</span></span><br><span class="line">	<span class="keyword">if</span> s1 == <span class="number">10</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;s1 等于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;s1 不等于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="comment">// s1 等于 10</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-嵌套if语句"><a href="#1-2-嵌套if语句" class="headerlink" title="1.2 嵌套if语句"></a>1.2 嵌套if语句</h4><blockquote>
<p>格式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式 &#123;</span><br><span class="line">  	语句<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> 表达式 &#123;</span><br><span class="line">  	语句<span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  	语句<span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 类型转换</span></span><br><span class="line">	<span class="comment">// 整型和浮点型转换</span></span><br><span class="line">	s1 := <span class="number">10</span></span><br><span class="line">	<span class="keyword">if</span> s1 &gt; <span class="number">10</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;s1 大于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> s1 &lt; <span class="number">10</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;s1 小于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;s1 等于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-特殊写法"><a href="#1-3-特殊写法" class="headerlink" title="1.3 特殊写法"></a>1.3 特殊写法</h4><blockquote>
<p>可以将变量写到if判断里，以减少内存占用</p>
<p>并且在if语句外是无法访问到if里的变量值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 将变量和if写在一行，这个s1变量的作用域只在if判断里生效，if判断外无法进行变量访问</span></span><br><span class="line">	<span class="comment">// 这样可以减少内存占用</span></span><br><span class="line">	<span class="keyword">if</span> s1 := <span class="number">10</span>; s1 == <span class="number">10</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;s1 等于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;s1 不等于 %v\n&quot;</span>, s1)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 在这里是没法访问到s1的，因为s1在if的作用域里</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// undefined: s1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、for语句"><a href="#2、for语句" class="headerlink" title="2、for语句"></a>2、for语句</h3><h4 id="2-1-基础格式"><a href="#2-1-基础格式" class="headerlink" title="2.1 基础格式"></a>2.1 基础格式</h4><blockquote>
<p>格式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 初始语句;条件表达式;结束语句&#123;</span><br><span class="line">    		循环体语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i:= <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    0</span></span><br><span class="line"><span class="comment">    1</span></span><br><span class="line"><span class="comment">    2</span></span><br><span class="line"><span class="comment">    3</span></span><br><span class="line"><span class="comment">    4</span></span><br><span class="line"><span class="comment">    5</span></span><br><span class="line"><span class="comment">    6</span></span><br><span class="line"><span class="comment">    7</span></span><br><span class="line"><span class="comment">    8</span></span><br><span class="line"><span class="comment">    9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-for变种1"><a href="#2-2-for变种1" class="headerlink" title="2.2 for变种1"></a>2.2 <code>for</code>变种1</h4><blockquote>
<p>将初始值提到<code>for</code>循环外面</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">5</span></span><br><span class="line">	<span class="keyword">for</span> ;i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    5</span></span><br><span class="line"><span class="comment">    6</span></span><br><span class="line"><span class="comment">    7</span></span><br><span class="line"><span class="comment">    8</span></span><br><span class="line"><span class="comment">    9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h4 id="2-3-for变种2"><a href="#2-3-for变种2" class="headerlink" title="2.3 for变种2"></a>2.3 <code>for</code>变种2</h4><blockquote>
<p>将初始值提到<code>for</code>循环外面</p>
<p>将结束语句放到<code>for</code>循环内部</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">5</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="number">10</span>&#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, i)</span><br><span class="line">			i++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    5</span></span><br><span class="line"><span class="comment">    6</span></span><br><span class="line"><span class="comment">    7</span></span><br><span class="line"><span class="comment">    8</span></span><br><span class="line"><span class="comment">    9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="2-4-无限循环"><a href="#2-4-无限循环" class="headerlink" title="2.4 无限循环"></a>2.4 无限循环</h4><blockquote>
<p>切记不要轻易尝试，这是死循环，<code>go</code>性能很高，很容易将机器性能打满</p>
<p>死循环代码格式</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	循环语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当前也可以给<code>for</code>后面跟条件判断语句,有点类似于其他语言的<code>while</code>语句，达成某种条件后退出循环</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> s &lt; <span class="number">3</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;这是for循环\n&quot;</span>)</span><br><span class="line">		s++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果为三个for循环结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是for循环</span></span><br><span class="line"><span class="comment">这是for循环</span></span><br><span class="line"><span class="comment">这是for循环</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="3、for-range循环"><a href="#3、for-range循环" class="headerlink" title="3、for range循环"></a>3、<code>for range</code>循环</h3><h4 id="3-1-基础格式"><a href="#3-1-基础格式" class="headerlink" title="3.1 基础格式"></a>3.1 基础格式</h4><blockquote>
<ul>
<li><p><code>Go</code>语言中可以使用<code>for range</code>遍历数组、切片、字符串、<code>map</code>及通道（<code>channel</code>），通过<code>for range</code>遍历的返回值有以下规律：</p>
<ul>
<li>数组、切片、字符串返回索引和值</li>
<li><code>map</code>返回键和值</li>
<li>通道（<code>channel</code>）只返回通道内的值</li>
</ul>
</li>
<li><p><code>for</code>循环中输出每个字符，那必须使用<code>%c</code>来输出字符</p>
</li>
</ul>
</blockquote>
<blockquote>
<p>代码格式</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里面的i是循环的索引值</span></span><br><span class="line"><span class="comment">// v是值</span></span><br><span class="line"></span><br><span class="line">s := <span class="string">&quot;Hello测几&quot;</span></span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%d : %c&quot;</span>,i, v)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// for range 循环</span></span><br><span class="line">	s := <span class="string">&quot;Hello悦悦&quot;</span></span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">		<span class="keyword">if</span> i &lt; <span class="number">1</span> &#123;    </span><br><span class="line">			fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, i)  <span class="comment">// 索引值 0</span></span><br><span class="line">			fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, v)  <span class="comment">// int32 ,所以需要转换成字符类型</span></span><br><span class="line">			fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, v)  <span class="comment">// H</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-1-只有一个变量"><a href="#3-1-只有一个变量" class="headerlink" title="3.1 只有一个变量"></a>3.1 只有一个变量</h4><blockquote>
<p>当<code>for range</code>中只有一个变量时，那这个变量是索引值而不是元素值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">&quot;for range 只有一个变量&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> v := <span class="keyword">range</span> rangeNameStr &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-匿名变量接收索引值"><a href="#3-3-匿名变量接收索引值" class="headerlink" title="3.3 匿名变量接收索引值"></a>3.3 匿名变量接收索引值</h4><blockquote>
<p>在<code>3.2</code>中描述只有一个变量时，这个变量是索引值而不是元素值，当不想要索引值时，可以使用匿名变量来接收索引值</p>
<p>这里就是匿名变量的用处，可以作为一个</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">&quot;for range 使用匿名变量接收索引&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> rangeNameStr &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%c&quot;</span>, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、for循环例子"><a href="#4、for循环例子" class="headerlink" title="4、for循环例子"></a>4、<code>for</code>循环例子</h3><blockquote>
<p>9x9乘法口诀</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= i; j++ &#123;</span><br><span class="line">			z := i * j</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%d * %d = %d\t &quot;</span>, i, j, z)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、break"><a href="#5、break" class="headerlink" title="5、break"></a>5、break</h3><blockquote>
<p><code>break</code>用来表示直接退出循环</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;i = %d\n&quot;</span>, i)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Print(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line">i = <span class="number">2</span></span><br><span class="line">i = <span class="number">3</span></span><br><span class="line">i = <span class="number">4</span></span><br><span class="line">i = <span class="number">5</span></span><br><span class="line"><span class="comment">// 可以看到等于5就退出循环了</span></span><br></pre></td></tr></table></figure>

<h3 id="6、continue"><a href="#6、continue" class="headerlink" title="6、continue"></a>6、continue</h3><blockquote>
<p>跳过这一次循环</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;i = %d\n&quot;</span>, i)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Print(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果,可以看到5被跳过不输出</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    i = 1</span></span><br><span class="line"><span class="comment">    i = 2</span></span><br><span class="line"><span class="comment">    i = 3</span></span><br><span class="line"><span class="comment">    i = 4</span></span><br><span class="line"><span class="comment">    i = 6</span></span><br><span class="line"><span class="comment">    i = 7</span></span><br><span class="line"><span class="comment">    i = 8</span></span><br><span class="line"><span class="comment">    i = 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="7、switch"><a href="#7、switch" class="headerlink" title="7、switch"></a>7、switch</h3><blockquote>
<p>主要是简化大量判断</p>
<p>当大量<code>if</code>需要判断某个变量等于某个值，然后执行一些功能块时，就可用<code>switch</code>语句来简化代码</p>
<p><code>switch</code>和<code>case</code>两个关键字是同一列，不需要<code>case</code>在<code>switch</code>下缩进</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 多个if判断可以使用switch语句</span></span><br><span class="line">    age := <span class="number">18</span></span><br><span class="line">    <span class="keyword">if</span> age == <span class="number">1</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;age = 1&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> age == <span class="number">2</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;age = 2&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;age = 3&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// switch简化大量判断</span></span><br><span class="line">    <span class="keyword">switch</span> age &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;age = 1&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;age = 2&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(<span class="string">&quot;age not found&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-1-switch变种"><a href="#7-1-switch变种" class="headerlink" title="7.1 switch变种"></a>7.1 <code>switch</code>变种</h4><blockquote>
<p>可以在<code>swicth</code>语句的<code>case</code>里放置多个值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 多个if判断可以使用switch语句</span></span><br><span class="line">    age := <span class="number">8</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// switch的case可以放置多个值</span></span><br><span class="line">    <span class="keyword">switch</span> age &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>:</span><br><span class="line">    	fmt.Println(<span class="string">&quot;age = 1&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>:</span><br><span class="line">    	fmt.Println(<span class="string">&quot;age = 2&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    	fmt.Println(<span class="string">&quot;age not found&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8、goto-了解"><a href="#8、goto-了解" class="headerlink" title="8、goto(了解)"></a>8、<code>goto</code>(了解)</h3><blockquote>
<p><code>goto</code>表示跳到某个位置，在代码里可以指定对应标签</p>
<p>建议：<code>goto</code>尽量少用</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// goto 语句，表示调到这个位置</span></span><br><span class="line">    <span class="comment">// goto 后面跟着标签Label，这可以直接跳出多个循环</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">      <span class="keyword">if</span> i == <span class="number">3</span> &#123;</span><br><span class="line">      	  fmt.Printf(<span class="string">&quot;i = %d\n&quot;</span>, i)</span><br><span class="line">      	  <span class="keyword">goto</span> LABEL_BREAK</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    LABEL_BREAK:</span><br><span class="line">    fmt.Println(<span class="string">&quot;done!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="六、运算符"><a href="#六、运算符" class="headerlink" title="六、运算符"></a>六、运算符</h2><h3 id="1、算数运算符"><a href="#1、算数运算符" class="headerlink" title="1、算数运算符"></a>1、算数运算符</h3><blockquote>
<p>常见的加减乘除余</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">int</span></span><br><span class="line">    c <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a = <span class="number">4</span></span><br><span class="line">    b = <span class="number">2</span></span><br><span class="line">    <span class="comment">// 加法</span></span><br><span class="line">    fmt.Println(a + b) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 减法</span></span><br><span class="line">    fmt.Println(a - b) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 乘法</span></span><br><span class="line">    fmt.Println(a * b) <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 除法</span></span><br><span class="line">    fmt.Println(a / b) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 取余</span></span><br><span class="line">    fmt.Println(a % b) <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、递减与递增"><a href="#2、递减与递增" class="headerlink" title="2、递减与递增"></a>2、递减与递增</h3><blockquote>
<ul>
<li><p>变量递增：<code>a++</code></p>
<ul>
<li>单独的语句， 不能放在&#x3D;的右边赋值， 等价于：a &#x3D; a + 1</li>
</ul>
</li>
<li><p>变量递减：<code>a--</code></p>
<ul>
<li>单独的语句， 不能放在&#x3D;的右边赋值， 等价于：a &#x3D; a - 1</li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li>变量与<code>++</code>&#x2F;<code>--</code>符号之间可以留一个空格，或者不留都可以进行递增或递减运算，个人建议可以不留空格</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;---&gt;\n&quot;</span>)</span><br><span class="line">	s1 := <span class="number">10</span></span><br><span class="line">	s1++</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、关系运算符"><a href="#3、关系运算符" class="headerlink" title="3、关系运算符"></a>3、关系运算符</h3><blockquote>
<p>关系运算可以包含等于、不等于、大于等于、小于等于、大于、小于这几种关系</p>
<p>关系运算返回的一定是<code>bool</code>类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">int</span></span><br><span class="line">    c <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a = <span class="number">4</span></span><br><span class="line">    b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关系运算符</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等于</span></span><br><span class="line">    fmt.Println( a == b) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不等于</span></span><br><span class="line">    fmt.Println( a != b) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 大于等于</span></span><br><span class="line">    fmt.Println( a &gt;= b) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小于等于</span></span><br><span class="line">    fmt.Println( a &lt;= b) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 大于</span></span><br><span class="line">    fmt.Println( a &gt; b) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小于</span></span><br><span class="line">    fmt.Println( a &lt; b) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4、逻辑运算符"><a href="#4、逻辑运算符" class="headerlink" title="4、逻辑运算符"></a>4、逻辑运算符</h3><blockquote>
<p>和其他语言一样，<code>go</code>语言可以进行多个逻辑判断</p>
</blockquote>
<h4 id="4-1-与运算"><a href="#4-1-与运算" class="headerlink" title="4.1 与运算"></a>4.1 与运算</h4><blockquote>
<p><code>&amp;&amp; </code>表示与</p>
<p>两个条件都为真才为真</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span>	</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">int</span></span><br><span class="line">    c <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a = <span class="number">4</span></span><br><span class="line">    b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 与运算符</span></span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">3</span> &amp;&amp; b &lt; <span class="number">3</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Print(<span class="string">&quot;bbb&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-或运算"><a href="#4-2-或运算" class="headerlink" title="4.2 或运算"></a>4.2 或运算</h4><blockquote>
<p><code>||</code>表示或运算</p>
<p>只要有一个条件为真则为真</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">int</span></span><br><span class="line">    c <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a = <span class="number">4</span></span><br><span class="line">    b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 或运算符</span></span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">3</span> || b &lt; <span class="number">3</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Print(<span class="string">&quot;bbb&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-3-非运算"><a href="#4-3-非运算" class="headerlink" title="4.3 非运算"></a>4.3 非运算</h4><blockquote>
<p><code>!</code>表示非，取反</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">bool</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a = <span class="number">4</span></span><br><span class="line">    b = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 或运算符</span></span><br><span class="line">    <span class="keyword">if</span> !b &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Print(<span class="string">&quot;bbb&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要注意<code>非运算</code>只能跟布尔类型的值，其他的类型会报错，不能对一个变量直接判断是否为true&#x2F;false</p>
<p>这个和其他语言是最不一样的地方，<code>python</code>中是可以对其他类型进行非运算判断</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="number">10</span></span><br><span class="line">	s2 := <span class="string">&quot;sam&quot;</span></span><br><span class="line">	<span class="keyword">if</span> !s1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;不是10&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> !s2 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;不是10&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211206161257244.png" class="" title="image-20211206161257244">

<h3 id="5、位运算"><a href="#5、位运算" class="headerlink" title="5、位运算"></a>5、位运算</h3><blockquote>
<p>针对的是二进制数</p>
</blockquote>
<h4 id="5-1-按位与"><a href="#5-1-按位与" class="headerlink" title="5.1 按位与"></a>5.1 按位与</h4><blockquote>
<p>符号：<code>&amp;</code></p>
<p>两位都为1才为1</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 5的二进制： 101</span></span><br><span class="line">	<span class="comment">// 2的二进制：  10</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 按位与 (两位都为1才为1)</span></span><br><span class="line">	<span class="comment">// 5的二进制数每一位和2的二进制的每一位进行运算</span></span><br><span class="line">	<span class="comment">// 5    1 0 1</span></span><br><span class="line">	<span class="comment">// 2      1 0</span></span><br><span class="line">	<span class="comment">// --------------</span></span><br><span class="line">	<span class="comment">//      0 0 0</span></span><br><span class="line">	<span class="comment">// 结果是3个0，那么</span></span><br><span class="line">    <span class="comment">// 0 X 2^2 + 0x2^1 + 0x2^0 = 0 + 0 + 0 = 0</span></span><br><span class="line">    <span class="comment">// 所以 5 &amp; 2就是0</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &amp; <span class="number">2</span>) <span class="comment">// 000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-按位或"><a href="#5-2-按位或" class="headerlink" title="5.2 按位或"></a>5.2 按位或</h4><blockquote>
<p>符号: <code>|</code></p>
<p>两位有一个为1就为1</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 5的二进制： 101</span></span><br><span class="line">	<span class="comment">// 2的二进制：  10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 按位与 (两位有一个为1就为1)</span></span><br><span class="line">	<span class="comment">// 5的二进制数每一位和2的二进制的每一位进行运算</span></span><br><span class="line">	<span class="comment">// 5    1 0 1</span></span><br><span class="line">	<span class="comment">// 2      1 0</span></span><br><span class="line">	<span class="comment">// --------------</span></span><br><span class="line">	<span class="comment">//      1 1 1</span></span><br><span class="line">	<span class="comment">// 1 X 2^2 + 1x2^1 + 1x2^0 = 4 + 2 + 1 = 7</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> | <span class="number">2</span>) <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-按位异或"><a href="#5-3-按位异或" class="headerlink" title="5.3 按位异或"></a>5.3 按位异或</h4><blockquote>
<p>符号: <code>^</code></p>
<p>两位不一样就为1</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 5的二进制： 101</span></span><br><span class="line">	<span class="comment">// 2的二进制：  10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 按位异或 (两位不一样就为1)</span></span><br><span class="line">	<span class="comment">// 5的二进制数每一位和2的二进制的每一位进行运算</span></span><br><span class="line">	<span class="comment">// 5    1 0 1</span></span><br><span class="line">	<span class="comment">// 2      1 0</span></span><br><span class="line">	<span class="comment">// --------------</span></span><br><span class="line">	<span class="comment">//      1 1 1</span></span><br><span class="line">	<span class="comment">// 1 X 2^2 + 1x2^1 + 1x2^0 = 4 + 2 + 1 = 7</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> ^ <span class="number">2</span>) <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-4-左移"><a href="#5-4-左移" class="headerlink" title="5.4 左移"></a>5.4 左移</h4><blockquote>
<p>符号：<code>&lt;&lt;</code></p>
<p>将二进制数往左移动指定的数字,移动后的空出来的位数由0补全</p>
</blockquote>
<blockquote>
<p>比如5的二进制： 101</p>
<p>将5往左位移动1位,相当于将5的二进制101整体往左移动一位，移动后空出来的位置由0补全，所以就变成了101 + 0 &#x3D; 1010</p>
<p>详细计算见下</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 5的二进制： 101</span></span><br><span class="line">	<span class="comment">// 往左移动1位, 变成了 1010</span></span><br><span class="line">	<span class="comment">// 5 &lt;&lt; 1 等价于</span></span><br><span class="line">	<span class="comment">// 1 x 2^3 + 0 x 2^2 + 1 x 2^1 + 1 x 2^0 = 8 + 0 + 2 + 0 = 10</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &lt;&lt; <span class="number">1</span>) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 往左移动2位, 变成了 10100</span></span><br><span class="line">	<span class="comment">// 5 &lt;&lt; 2 等价于</span></span><br><span class="line">	<span class="comment">// 1 x 2^4 + 0 x 2^3 + 1 x 2^2 + 0 x 2^1 + 0 x 2^0  = 16 + 0 + 4 + 0 + 0 = 20</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &lt;&lt; <span class="number">2</span>) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 往左移动3位, 变成了 101000</span></span><br><span class="line">	<span class="comment">// 5 &lt;&lt; 2 等价于</span></span><br><span class="line">	<span class="comment">// 1 x 2^5 + 0 x 2^4 + 1 x 2^3 + 0 x 2^2 + 0 x 2^1 + 0 x 2^0  = 32 + 0 + 8 + 0 + 0 + 0 = 40</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &lt;&lt; <span class="number">3</span>) <span class="comment">// 40</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-5-右移"><a href="#5-5-右移" class="headerlink" title="5.5 右移"></a>5.5 右移</h4><blockquote>
<p>符号：<code>&gt;&gt;</code></p>
<p>将二进制数往右移动指定的数字,相当于将二进制数从右边删除对应的位数，这样来看就相当于是往右边移动了</p>
</blockquote>
<blockquote>
<p>比如5的二进制： 101</p>
<p>将5往右位移动1位,相当于将5的二进制101整体往右减少一位，那么101右边减少一位就变成了10， 101最右边的1被减去了</p>
<p>详细计算见下</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 5的二进制： 101</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 往左移动1位, 变成了 10</span></span><br><span class="line">	<span class="comment">// 5 &gt;&gt; 1 等价于</span></span><br><span class="line">	<span class="comment">// 1 x 2^1 + 0 x 2^0 = 2 + 0 = 2</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &gt;&gt; <span class="number">1</span>) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 往左移动2位, 变成了 1</span></span><br><span class="line">	<span class="comment">// 5 &gt;&gt; 1 等价于</span></span><br><span class="line">	<span class="comment">// 1 x 2^0 = 1</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &gt;&gt; <span class="number">2</span>) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 往左移动3位, 变成了 0</span></span><br><span class="line">	<span class="comment">// 5 &gt;&gt; 1 等价于</span></span><br><span class="line">	<span class="comment">// 0 x 2^0 = 0</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &gt;&gt; <span class="number">3</span>) <span class="comment">// 0</span></span><br><span class="line">	<span class="comment">// 依次往下继续右移也会一直为0</span></span><br><span class="line">	fmt.Println(<span class="number">5</span> &gt;&gt; <span class="number">4</span>) <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-5-左移与右移理解"><a href="#5-5-左移与右移理解" class="headerlink" title="5.5 左移与右移理解"></a>5.5 左移与右移理解</h4><blockquote>
<p>类比在计算器上输入数字的例子，在计算器里输入数字:<code>23</code></p>
<ul>
<li>想让23往左移动，那么就需要<ul>
<li>左移一位，23后面补0，变为230</li>
<li>左移二位，230后面补0，变为2300</li>
<li>左移三位，2300后面补0，变为23000</li>
<li>这样来看屏幕就相当于把23往左移动了</li>
<li>当然也要注意，当定义的整数位数的长度不能被左移超过，如果超过也没什么意义</li>
</ul>
</li>
<li>想让23往右移动，那么就需要：<ul>
<li>右移一位，23先把3删除，变为2</li>
<li>右移二位，2把自己删除，变为0</li>
<li>右移三位，0继续删除自己然后补0，所以会一直为0</li>
<li>这样来看屏幕就相当于把23往右移动了，有点类似于删除的感觉，当右移位数超过该值的位数，最终一直会为0</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="5-6-左移与右移例子"><a href="#5-6-左移与右移例子" class="headerlink" title="5.6 左移与右移例子"></a>5.6 左移与右移例子</h4><blockquote>
<p>可以用来定义数量集</p>
<p>这里的<code>&lt;&lt;</code>表示左移操作，<code>1&lt;&lt;10</code>表示将1的二进制表示向左移10位，也就是由<code>1</code>变成了<code>10000000000</code>，也就是十进制的1024</p>
<p>同理<code>2&lt;&lt;2</code>表示将2的二进制表示向左移2位，也就是由<code>10</code>变成了<code>1000</code>，也就是十进制的8</p>
<p>左移与右移常用于权限配置这一类设置</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义数量集</span></span><br><span class="line"><span class="comment">// &lt;&lt; 表示左移符号，向左移动几位</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    _ = <span class="literal">iota</span></span><br><span class="line">    KB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>) <span class="comment">// 表示向左移动10位，也就是2的10次方，转换为二进制就是1024</span></span><br><span class="line">    MB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">    GB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">    TB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(KB) <span class="comment">// 1024</span></span><br><span class="line">    fmt.Println(MB) <span class="comment">// 1048576</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、赋值运算符"><a href="#6、赋值运算符" class="headerlink" title="6、赋值运算符"></a>6、赋值运算符</h3><blockquote>
<p>给变量赋值</p>
<p><code>+=</code> 相加后再赋值</p>
<p><code>-=</code> 相减后再赋值</p>
<p><code>*=</code> 相乘后再赋值</p>
<p><code>/=</code> 相除后再赋值</p>
<p><code>%=</code> 求余后再赋值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="number">13</span></span><br><span class="line">	s1 += <span class="number">1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// 14</span></span><br><span class="line"></span><br><span class="line">	s1 -= <span class="number">1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// 13</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、复合数据类型"><a href="#七、复合数据类型" class="headerlink" title="七、复合数据类型"></a>七、复合数据类型</h2><h3 id="1、数组"><a href="#1、数组" class="headerlink" title="1、数组"></a>1、数组</h3><blockquote>
<p>数组类似于其他语言的列表，比如<code>python</code>的<code>list</code>、<code>shell</code>语言的数组，但又完全不一样</p>
<p>常用来存储元素，元素是基本数据类型：字符串、整型、布尔值</p>
<p><code>一个数组只能指定一种数据类型，不支持一个数组中有多种数据类型的元素存在</code></p>
<ul>
<li><p>注意</p>
<ul>
<li><code>go</code>中的数组需要指定长度和类型</li>
<li>并且长度和元素类型是数组整个类型的一部分，这是和其他语言的不一样的地方</li>
</ul>
</li>
<li><p>数组使用场景不多，用的比较多的是切片</p>
</li>
</ul>
</blockquote>
<h4 id="1-1-数组声明"><a href="#1-1-数组声明" class="headerlink" title="1.1 数组声明"></a>1.1 数组声明</h4><blockquote>
<ul>
<li>数组声明<ul>
<li>数组声明只是相当于定义了一个数组，并没有给数组指定具体的值，数组声明的所有元素值都是<code>go</code>语言中的零值</li>
<li>数组声明以后长度和类型都确定好了，不能再修改</li>
<li>数组只声明，不初始化，那这个数组每种类型的元素都有一个零值(默认值)，没有具体的值，默认零值如下<ul>
<li>字符串类型初始值为<code>&quot;&quot;</code></li>
<li>整型类型初始值为<code>0</code></li>
<li>布尔类型初始值为<code>false</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="1-1-1-var关键字声明数组"><a href="#1-1-1-var关键字声明数组" class="headerlink" title="1.1.1 var关键字声明数组"></a>1.1.1 <code>var</code>关键字声明数组</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="keyword">var</span> 数组名 [数组长度]数组类型</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组名：定义的数组变量名</span></span><br><span class="line"><span class="comment">// 数组长度：一个具体的数字，可以为0，但是没有意义</span></span><br><span class="line"><span class="comment">// 数组类型：支持int/string/bool三种常见类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>]<span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> arr2 [<span class="number">3</span>]<span class="type">string</span></span><br><span class="line">	<span class="keyword">var</span> arr3 [<span class="number">3</span>]<span class="type">bool</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, arr1) <span class="comment">// [0 0 0]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 可以看到arr1的类型不仅包含长度，还包含了元素类型</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, arr1) <span class="comment">// [3]int</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, arr2) <span class="comment">// [     ]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, arr2) <span class="comment">// [3]string</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, arr3) <span class="comment">// [false false false]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, arr3) <span class="comment">// [3]bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-1-短变量声明数组"><a href="#1-2-1-短变量声明数组" class="headerlink" title="1.2.1 短变量声明数组"></a>1.2.1 短变量声明数组</h5><blockquote>
<p>除了<code>var</code>关键字声明数组，也可以用短变量方式声明数组</p>
<ul>
<li>短变量声明数组有两种格式<ul>
<li>第一种：指定确定的数组长度值</li>
<li>第二种：用<code>...</code>代替确定的数组长度值，表示数组值的个数由go自动推导长度，这种方式声明的数组个数都是0</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">数组名 := [数组长度]数组类型&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	数组名：定义的数组变量名</span></span><br><span class="line"><span class="comment">	数组长度：一个具体的数字，可以为0，但是没有意义，必须是一个数字，不能是三个点</span></span><br><span class="line"><span class="comment">	数组类型：支持int/string/bool三种常见类型</span></span><br><span class="line"><span class="comment">	&#123;&#125; : 用短变量声明一定要有，不带会报错</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 方法1</span></span><br><span class="line">	<span class="comment">// 指定长度，此时该数组长度就是指定的长度</span></span><br><span class="line">	s1 := [<span class="number">3</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	fmt.Println(s1) <span class="comment">// [0 0 0]</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(s1)) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-数组初始化赋值"><a href="#1-2-数组初始化赋值" class="headerlink" title="1.2 数组初始化赋值"></a>1.2 数组初始化赋值</h4><blockquote>
<p>为什么要对数组初始化？</p>
<ul>
<li>定义完数组后，<code>go</code>会自动给数组元素设置初始的零值(默认值)，这应该不是我们想要的，所以要对数组已经设置的值进行重新赋值，所以需要初始化赋值，相当于覆盖了默认值</li>
<li>数组定义以后每种类型的元素都有一个零值(默认值)<ul>
<li>字符串类型初始值为<code>&quot;&quot;</code></li>
<li>整型类型初始值为<code>0</code></li>
<li>布尔类型初始值为<code>false</code></li>
</ul>
</li>
</ul>
<p>下面代码是初始化数组的三种方式</p>
<ul>
<li><p>初始化赋值方式</p>
<ul>
<li>第一种：先声明，再初始化</li>
<li>第二种：短变量方式声明并且初始化，一步完成</li>
<li>第三种：根据索引来初始化，其他元素用零值(默认值)补全</li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li>其实数组不管哪种方式声明并且初始化赋值<ul>
<li>既可以分步骤执行，先声明，再初始化完成</li>
<li>也可以声明和初始化赋值在一行代码完成</li>
<li>使用哪种方式取决于自己</li>
</ul>
</li>
<li>用短变量方式直接定义数组，但是必须要对数组进行初始化(也就是要一定带上{}符号，表示创建了一个数组)，否则会下面的错误<ul>
<li>错误提示：<code>./main.go:7:8: type []int is not an expression</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="1-2-1-var初始化赋值"><a href="#1-2-1-var初始化赋值" class="headerlink" title="1.2.1 var初始化赋值"></a>1.2.1 <code>var</code>初始化赋值</h5><blockquote>
<p>推荐使用：</p>
<ul>
<li>通过<code>var</code>关键字需要分两步<ul>
<li>先声明</li>
<li>再初始化赋值数组</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明数组</span></span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>]<span class="type">int</span></span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [0 0 0]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 数组初始化赋值</span></span><br><span class="line">	arr1 = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [1 2 3]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不推荐：</p>
<ul>
<li>当然也可以将声明和初始化一步完成</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 不推荐：一行代码完成声明和初始化赋值</span></span><br><span class="line">	<span class="keyword">var</span> arr2 [<span class="number">3</span>]<span class="type">int</span> = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">	fmt.Println(arr2) <span class="comment">// [4, 5, 6]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-2-短变量初始化赋值"><a href="#1-2-2-短变量初始化赋值" class="headerlink" title="1.2.2 短变量初始化赋值"></a>1.2.2 短变量初始化赋值</h5><blockquote>
<p>推荐使用：</p>
<ul>
<li>短变量方式声明和初始化赋值一行代码完成，推荐使用<code>[...]</code>形式<ul>
<li>可以在<code>[]</code>设置确认的长度值</li>
<li>可以在<code>[]</code>用三个<code>...</code>代替(<code>[...]</code>)，表示数组值的个数由<code>go</code>自动推导长度</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// ！！！推荐：一行代码完成，三个点表示数组值的个数由go自动推导长度</span></span><br><span class="line">	arr2 := [...]<span class="type">int</span>&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">	fmt.Println(arr2) <span class="comment">// [4, 5, 6]</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 数组初始化赋值</span></span><br><span class="line">    arr1 := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [1 2 3]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不推荐使用分步骤先声明、再赋值</p>
</blockquote>
<h5 id="1-2-3-固定索引值初始化赋值"><a href="#1-2-3-固定索引值初始化赋值" class="headerlink" title="1.2.3 固定索引值初始化赋值"></a>1.2.3 固定索引值初始化赋值</h5><blockquote>
<p>指定固定索引值进行声明初始化数组，其余元素有零值补全</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 一行代码完成</span></span><br><span class="line">	arr1 := [...]<span class="type">int</span>&#123;<span class="number">0</span>:<span class="number">3</span>, <span class="number">4</span>:<span class="number">3</span>&#125;</span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [4, 5, 6]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-数组比较"><a href="#1-3-数组比较" class="headerlink" title="1.3 数组比较"></a>1.3 数组比较</h4><blockquote>
<p><code>数组长度和元素类型是数组整个类型的一部分</code>,所以长度不同，即使类型相同的数组也不能进行比较</p>
<p>这是和其他语言的不一样的地方</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>]<span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> arr2 [<span class="number">3</span>]<span class="type">int</span></span><br><span class="line">	<span class="keyword">var</span> arr3 [<span class="number">4</span>]<span class="type">int</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(arr1 == arr2) <span class="comment">// true</span></span><br><span class="line">	fmt.Println(arr1 == arr3)  <span class="comment">// invalid operation: arr1 == arr3 (mismatched types [3]int and [4]int)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// arr1 == arr3 不能比较，会报错，因为长度也是数组的一部分,那么arr1和arr3不相等</span></span><br><span class="line"><span class="comment">// 会报错：invalid operation: arr1 == arr3 (mismatched types [3]int and [4]int)</span></span><br><span class="line"><span class="comment">// 翻译过来就是：无效操作：arr1 == arr3（类型[3]int和[4]int不匹配）</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211206173943254.png" class="" title="image-20211206173943254">

<h4 id="1-4-数组的遍历"><a href="#1-4-数组的遍历" class="headerlink" title="1.4 数组的遍历"></a>1.4 数组的遍历</h4><blockquote>
<p>对数组进行变量，使用<code>for</code>循环</p>
</blockquote>
<blockquote>
<p>c语言风格for循环</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>]<span class="type">string</span></span><br><span class="line">	arr1 = [<span class="number">3</span>]<span class="type">string</span>&#123;<span class="string">&quot;sam&quot;</span>, <span class="string">&quot;bob&quot;</span>, <span class="string">&quot;lily&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// c语言风格for循环</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr1); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v: %v\n&quot;</span>,i, arr1[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    0: sam</span></span><br><span class="line"><span class="comment">    1: bob</span></span><br><span class="line"><span class="comment">    2: lily</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>for range</code>循环数组</p>
<p><code>for range</code>只有一个变量时，这个值为索引值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// for range遍历</span></span><br><span class="line">	arr2 := [...]<span class="type">string</span>&#123;<span class="string">&quot;jix&quot;</span>, <span class="string">&quot;sem&quot;</span>, <span class="string">&quot;eop&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> arr2 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v:%v\n&quot;</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    0:jix</span></span><br><span class="line"><span class="comment">    1:sem</span></span><br><span class="line"><span class="comment">    2:eop</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="1-5-多维数组"><a href="#1-5-多维数组" class="headerlink" title="1.5 多维数组"></a>1.5 多维数组</h4><h5 id="1-5-1-定义多维数组"><a href="#1-5-1-定义多维数组" class="headerlink" title="1.5.1 定义多维数组"></a>1.5.1 定义多维数组</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 多维数组</span></span><br><span class="line">	<span class="comment">// [[1 2] [3 4] [5 6]]</span></span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>][<span class="number">2</span>]<span class="type">int</span></span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [[0 0] [0 0] [0 0]]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 初始化</span></span><br><span class="line">	arr1 = [<span class="number">3</span>][<span class="number">2</span>]<span class="type">int</span>&#123;</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;,</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">3</span>, <span class="number">4</span>&#125;,</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">5</span>, <span class="number">6</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [[1 2] [3 4] [5 6]]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-5-2-遍历多维数组"><a href="#1-5-2-遍历多维数组" class="headerlink" title="1.5.2 遍历多维数组"></a>1.5.2 遍历多维数组</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 多维数组</span></span><br><span class="line">	<span class="comment">// [[1 2] [3 4] [5 6]]</span></span><br><span class="line">	<span class="keyword">var</span> arr1 [<span class="number">3</span>][<span class="number">2</span>]<span class="type">int</span></span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [[0 0] [0 0] [0 0]]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 初始化</span></span><br><span class="line">	arr1 = [<span class="number">3</span>][<span class="number">2</span>]<span class="type">int</span>&#123;</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;,</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">3</span>, <span class="number">4</span>&#125;,</span><br><span class="line">		[<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">5</span>, <span class="number">6</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(arr1) <span class="comment">// [[1 2] [3 4] [5 6]]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// C语言风格</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr1); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j:= <span class="number">0</span>; j &lt; <span class="built_in">len</span>(arr1[i]); j++ &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;每个元素: %v\n&quot;</span>, arr1[i][j])</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// for range风格</span></span><br><span class="line">	<span class="keyword">for</span> _, v1 := <span class="keyword">range</span> arr1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;\n最外层的元素: %v\n&quot;</span>, v1)</span><br><span class="line">		<span class="keyword">for</span> _, v2 := <span class="keyword">range</span> v1 &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;最里面的元素: %v\n&quot;</span>, v2)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211206181116451.png" class="" title="image-20211206181116451">



<h4 id="1-6-数组是值类型"><a href="#1-6-数组是值类型" class="headerlink" title="1.6 数组是值类型"></a>1.6 数组是值类型</h4><blockquote>
<p>将一个<code>A数组</code>赋值给另一个<code>B数组</code>，这样就相当于是将<code>A</code>数组完全复制了一份给<code>B数组</code></p>
<p>修改<code>B数组</code>的元素，不会影响<code>A数组</code>，相当于<code>B数组</code>是<code>A数组</code>的副本，完全拷贝了<code>A数组</code>一份</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 数组是值类型</span></span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	s2 := s1</span><br><span class="line">	s2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(s1) <span class="comment">// [1 2 3]</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">// [100 2 3]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-7-数组例题"><a href="#1-7-数组例题" class="headerlink" title="1.7 数组例题"></a>1.7 数组例题</h4><blockquote>
<p>求数组元素的所有和</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addArrSum</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s1 &#123;</span><br><span class="line">		sum = sum + v</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;sum = %v&quot;</span>, sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>求数组和为数组中指定的两个元素的下标</p>
<p>例如：[1,2,3,4,5]</p>
<p>求和为5的两个元素的下标</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	<span class="keyword">const</span> sum = <span class="number">5</span></span><br><span class="line">	<span class="keyword">for</span> i:= <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s1); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; <span class="built_in">len</span>(s1); j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> s1[i] + s1[j] == sum &#123;</span><br><span class="line">				fmt.Printf(<span class="string">&quot;(%v, %v)\n&quot;</span>, i, j)</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">continue</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*		</span></span><br><span class="line"><span class="comment">输出</span></span><br><span class="line"><span class="comment">	(0, 3)</span></span><br><span class="line"><span class="comment">	(1, 2)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="2、切片"><a href="#2、切片" class="headerlink" title="2、切片"></a>2、切片</h3><blockquote>
<p><code>!!!比较重要</code></p>
<ul>
<li>切片是一个用于相同类型元素的可变长的序列</li>
<li>是数组类型的一层包装，更加灵活，支持自动增加数组长度</li>
<li>切片属于<code>引用类型</code><ul>
<li>内部包含: <code>地址</code>、<code>长度</code>和<code>容量</code></li>
</ul>
</li>
<li>切片可以快速操作数据集合</li>
</ul>
</blockquote>
<h4 id="2-1-声明切片"><a href="#2-1-声明切片" class="headerlink" title="2.1 声明切片"></a>2.1 声明切片</h4><blockquote>
<p>切片声明时只指定了类型，不需要指定切片长度，别的声明、初始化赋值切片格式都和数组一致，不做过多赘述</p>
<ul>
<li><p>不过切片底层还是数组</p>
</li>
<li><p>切片声明以后</p>
<ul>
<li>切片是没有零值(默认值)的，这个和数组是很大的区别</li>
<li>因为该切片长度为0，容量也为0</li>
<li>切片没有零值(默认值)，那这个切片的值是空，一个元素都没有，该切片的值就是<code>nil</code>，在其他编程语言里表示空，<code>redis</code>里表示空就是用<code>nil</code>表示</li>
<li>声明切片和nil相比较等于关系，一定是<code>true</code></li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明切片格式</span></span><br><span class="line"><span class="keyword">var</span> 切片变量名 []T</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切片名： 也叫变量名</span></span><br><span class="line"><span class="comment">// [] ：表示不需要设置切片长度</span></span><br><span class="line"><span class="comment">// T：表示切片中的元素类型</span></span><br><span class="line"><span class="comment">// 可以看到声明切片就不需要指定长度了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 切片</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义整型类型的切片</span></span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义字符串类型的切片</span></span><br><span class="line">	<span class="keyword">var</span> s2 []<span class="type">string</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 定义布尔类型的切片</span></span><br><span class="line">	<span class="keyword">var</span> s3 []<span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, s1) <span class="comment">// []int(nil)</span></span><br><span class="line">    fmt.Printf(s1 == <span class="literal">nil</span>) <span class="comment">// true</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// []int</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// []</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// []string</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// []</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s3) <span class="comment">// []bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-切片初始化"><a href="#2-2-切片初始化" class="headerlink" title="2.2 切片初始化"></a>2.2 切片初始化</h4><blockquote>
<p>切片初始化和数组初始化是一样进行操作的，切片不需要在<code>[]</code>中写长度</p>
<p>支持三种方式</p>
<ul>
<li><p>第一种：先声明，再初始化</p>
</li>
<li><p>第二种：短变量方式声明并且初始化，一步完成，一定要带花括号(<code>&#123;&#125;</code>)</p>
</li>
<li><p>第三种：根据索引来初始化，其他元素用零值(默认值)补全</p>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义整型类型的切片</span></span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span></span><br><span class="line">	s1 = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// []int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 短变量声明切片</span></span><br><span class="line">	s2 := []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// [1 2 3 4 5]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// []int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 指定固定索引值</span></span><br><span class="line">	s3 := []<span class="type">int</span>&#123;<span class="number">0</span>:<span class="number">4</span>, <span class="number">4</span>:<span class="number">9</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// [4 0 0 0 9]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s3) <span class="comment">// []int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-由数组得到切片"><a href="#2-3-由数组得到切片" class="headerlink" title="2.3 由数组得到切片"></a>2.3 由数组得到切片</h4><blockquote>
<p>可以由原始数组得到切片，和<code>python</code>的切片操作一致</p>
<ul>
<li>切片<code>s[x:y]</code><ul>
<li>表示<code>左包含右不包含</code>(左闭右开)，俗称”顾头不顾腚”</li>
<li>那么<code>切片s</code>就是从<code>原始数组</code>的<code>x索引开始</code>，到<code>原始数组</code>的<code>(y-1)索引结束</code>的这一段元素</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义一个数组</span></span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片1</span></span><br><span class="line">	s2 := s1[<span class="number">0</span>:<span class="number">4</span>]</span><br><span class="line">	fmt.Println(s2) <span class="comment">// [1 2 3 4]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片2</span></span><br><span class="line">	s3 := s1[:<span class="number">4</span>] <span class="comment">// 等价于 s1[0:4]</span></span><br><span class="line">	fmt.Println(s3) <span class="comment">// [1 2 3 4]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片3</span></span><br><span class="line">	s4 := s1[:<span class="built_in">len</span>(s1)] <span class="comment">// 等价于 s1[:len(s1)],因为是左闭右开，所以右边的值会比索引小1</span></span><br><span class="line">	fmt.Println(s4) <span class="comment">// [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片3</span></span><br><span class="line">	s5 := s1[:] <span class="comment">// 表示切片了整个数组，相当于是复制了整个数组，但是注意切片是引用类型</span></span><br><span class="line">	fmt.Println(s5) <span class="comment">// [1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-切片长度和容量"><a href="#2-4-切片长度和容量" class="headerlink" title="2.4 切片长度和容量"></a>2.4 切片长度和容量</h4><blockquote>
<ul>
<li><p>切片长度：<code>len(切片变量名)</code>，求出切片的元素个数</p>
</li>
<li><p>切片容量：<code>cap(切片变量名)</code>, 是指将从原始数组被切片的第一个元素开始，到切片原始数组的的最后一个元素的全部元素个数</p>
<ul>
<li>切片容量表示了可以往右边切元素，直到切到原始数组最后一个元素，也就是说可以切片的总体容量</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 切片</span></span><br><span class="line">	<span class="comment">// 由数组得到切片</span></span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 表示切片了整个数组，相当于是复制了整个数组，但是注意切片是引用类型</span></span><br><span class="line">	s2 := s1[:<span class="number">4</span>]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2) <span class="comment">// [1 2 3 4]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="built_in">len</span>(s2)) <span class="comment">// 4</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="built_in">cap</span>(s2)) <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line">	s3 := s1[<span class="number">4</span>:<span class="number">7</span>]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3) <span class="comment">// [5 6 7]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="built_in">len</span>(s3)) <span class="comment">// 3</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="built_in">cap</span>(s3)) <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211206194456407.png" class="" title="image-20211206194456407">





<h4 id="2-5-切片再切片"><a href="#2-5-切片再切片" class="headerlink" title="2.5 切片再切片"></a>2.5 切片再切片</h4><blockquote>
<p>可以对切片再进行切片，但是索引长度不能超过原数组长度，否则会出现数组索引越界情况 </p>
<ul>
<li><code>切片是引用类型，指向了底层数组</code>:<ul>
<li>引用类型：表示切片和原始数组都指向了同一个数组</li>
<li>修改了底层数组的元素值，那么切片对应位置元素的值也会被修改</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span></span><br><span class="line">	s1 = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 先对定义的切片s1进行切片s2</span></span><br><span class="line">	s2 := s1[<span class="number">2</span>:]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s2)=%v cap(s2)=%v\n&quot;</span>, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 再对切片s2再进行切片出来s3</span></span><br><span class="line">	s3 := s2[<span class="number">1</span>:<span class="number">2</span>]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s3)=%v cap(s3)=%v\n&quot;</span>, <span class="built_in">len</span>(s3), <span class="built_in">cap</span>(s3))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片是引用类型，指向了底层数组</span></span><br><span class="line">	<span class="comment">// 可以看到修改了原始切片s1，对应的s2切片的值也会修改成和s1一样</span></span><br><span class="line">	s1[<span class="number">4</span>] = <span class="number">400</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-6-make函数定义切片"><a href="#2-6-make函数定义切片" class="headerlink" title="2.6 make函数定义切片"></a>2.6 <code>make</code>函数定义切片</h4><blockquote>
<p>上面的<code>切片声明</code>、<code>由数组获得切片</code>都是基于数组而产生切片，这两种方式创建的切片，长度和容量是由原始数组限制了，不能超过原始数组的长度和容量，没法在指定切片的时候就指定切片的长度和容量，那有没有直接定义切片的方式，那就是<code>make</code>函数</p>
<ul>
<li><code>make</code>函数是内置函数，可以动态创建切片<ul>
<li>为什么说动态呢？<ul>
<li>因为<code>make</code>提供了两个参数：<code>size</code>和<code>cap</code>，可以自由指定切片长度和容量</li>
<li>定义以后的切片根据<code>size</code>值通过零值(默认值)填充切片</li>
<li>定义后初始化切片，切片的容量可以不受<code>cap</code>值的限制，可以在初始化时定义大于<code>cap</code>值数量的元素，那么这个初始化以后的切片的长度和容量会根据初始化时填写的元素数量动态变化</li>
<li>那为什么<code>make</code>函数定义切片时还需要指定<code>size</code>和<code>cap</code>，个人理解是定义切片时只是作为一个初始值，但是初始化切片(往切片里塞元素值)时可以无限增大，这就是动态创建切片</li>
<li>但是<code>make</code>函数定义切片时可以省略<code>cap</code>参数值(不传<code>cap</code>值表示和<code>size</code>值一样)，不能不传<code>len</code>参数，会报错提示缺少<code>len</code>参数<ul>
<li><code>./main.go:6:12: missing len argument to make([]int)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>make</code>函数定义后，需要进行初始化，初始化和声明切片的方式一样，但是不能超过容量长度，否则会爆错</li>
<li>注意<ul>
<li>make函数定义切片是，size参数值不能大于cap参数值，否则会报错<ul>
<li><code>./main.go:6:12: len larger than cap in make([]int)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// make函数创建切片</span></span><br><span class="line"><span class="built_in">make</span>([]T, size, <span class="built_in">cap</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// []T: 表示切片的类型</span></span><br><span class="line"><span class="comment">// size: 表示切片的长度，也就是len()切片元素个数返回的值</span></span><br><span class="line"><span class="comment">// cap: 表示切片的容量，也就是cap()切片容量返回的值</span></span><br><span class="line"><span class="comment">// 当size、cap参数只写一个数字时，表示size和cap都是同一个值</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 只写size的值，表示size和cap参数值都是同一个</span></span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>,s1) <span class="comment">// [0 0 0 0 0]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v cap(s1)=%v\n&quot;</span>,<span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=5 cap(s1)=5</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 下面表示切片长度为0，容量为10</span></span><br><span class="line">    <span class="comment">// s2=[]，表示底层数组就是空的,但是这个切片的容量长度是10</span></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>,s2) <span class="comment">// </span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s2)=%v cap(s2)=%v\n&quot;</span>,<span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))  <span class="comment">// len(s1)=0 cap(s1)=10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	s3 := <span class="built_in">make</span>([]<span class="type">bool</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 通过make函数初始化的切片，对切片进行初始化</span></span><br><span class="line">	s1 = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-7-切片比较运算"><a href="#2-7-切片比较运算" class="headerlink" title="2.7 切片比较运算"></a>2.7 切片比较运算</h4><blockquote>
<p>因为切片是<code>引用类型</code>，不能使用<code>==</code>来进行两个切片的全部元素是否相等比较</p>
<p>切片只能和<code>nil</code>进行比较</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Println(s1 == s2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下图的报错提示了slice只能用nil来比较</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211207130223515.png" class="" title="image-20211207130223515">



<h4 id="2-8-切片nil值"><a href="#2-8-切片nil值" class="headerlink" title="2.8 切片nil值"></a>2.8 切片<code>nil</code>值</h4><blockquote>
<ul>
<li><p>只有声明切片方式得到的切片的值是<code>nil</code></p>
</li>
<li><p>切片值是<code>nil</code></p>
<ul>
<li>这个切片的长度和容量都是0</li>
<li>表示这个切片是没有底层数组的</li>
</ul>
</li>
<li><p>不能说<code>长度为0</code>、<code>容量为0</code>的切片一定是<code>nil</code></p>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明一个切片，它的值才是nil</span></span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span></span><br><span class="line">	fmt.Println(s1 == <span class="literal">nil</span>) <span class="comment">// true</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%#v len(s1)=%v cap(s1)=%v\n&quot;</span>, s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// s1=[]int(nil) len(s1)=0 cap(s1)=0</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 短变量声明并初始化一个切片，可以看到s2的长度和容量都是0，但是s2不等于nil</span></span><br><span class="line">	s2 := []<span class="type">int</span>&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2=%#v len(s2)=%v cap(s2)=%v\n&quot;</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2)) <span class="comment">// s2=[]int&#123;&#125; len(s2)=0 cap(s2)=0</span></span><br><span class="line">	fmt.Println(s2 == <span class="literal">nil</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// make函数构造一个切片</span></span><br><span class="line">	s3 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>)</span><br><span class="line">	fmt.Println(s3 == <span class="literal">nil</span>) <span class="comment">// false</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s3=%#v len(s3)=%v cap(s3)=%v\n&quot;</span>, s3, <span class="built_in">len</span>(s3), <span class="built_in">cap</span>(s3)) <span class="comment">// s3=[]int&#123;&#125; len(s3)=0 cap(s3)=0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-9-判断切片是否为空"><a href="#2-9-判断切片是否为空" class="headerlink" title="2.9 判断切片是否为空"></a>2.9 判断切片是否为空</h4><blockquote>
<p>判断切片是否为空，不能用<code>nil</code>判断，而是要用<code>len() == 0</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明一个切片，它的值才是nil</span></span><br><span class="line">    <span class="comment">// s1长度是0</span></span><br><span class="line">	<span class="keyword">var</span> s1 []<span class="type">int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%#v len(s1)=%v cap(s1)=%v\n&quot;</span>, s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// s1=[]int(nil) len(s1)=0 cap(s1)=0</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(s1) == <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 短变量声明并初始化一个切片，可以看到s2的长度和容量都是0，s2的长度是0</span></span><br><span class="line">	s2 := []<span class="type">int</span>&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2=%#v len(s2)=%v cap(s2)=%v\n&quot;</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2)) <span class="comment">// s2=[]int&#123;&#125; len(s2)=0 cap(s2)=0</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(s2) == <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211207132221179.png" class="" title="image-20211207132221179">



<h4 id="2-10-切片赋值"><a href="#2-10-切片赋值" class="headerlink" title="2.10 切片赋值"></a>2.10 切片赋值</h4><blockquote>
<p>可以将切片作为另一个变量的值</p>
<p>可以看出来<code>s2</code>引用了<code>s1</code>切片，<code>s1</code>的第三个元素值变化了，那么<code>s2</code>的第三值也会变化</p>
<p>切片不保存值，切片只是一个框，切片的值指向底层的数组</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">	s2 := s1</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;修改切片s1之前&quot;</span>)</span><br><span class="line">	fmt.Println(s1) <span class="comment">// [1 2 3 4]</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">// [1 2 3 4]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	s1[<span class="number">2</span>] = <span class="number">1000</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n修改切片s1以后&quot;</span>)</span><br><span class="line">	fmt.Println(s1) <span class="comment">// [1 2 1000 4]</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">// [1 2 1000 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-11-切片遍历"><a href="#2-11-切片遍历" class="headerlink" title="2.11 切片遍历"></a>2.11 切片遍历</h4><blockquote>
<p>可以使用<code>for</code>循环对切片进行遍历,和遍历数组一样</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 通过make函数初始化的切片，对切片进行初始化</span></span><br><span class="line">	s1 = []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// c语言风格</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\nc语言风格&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s1); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v:%v\n&quot;</span>, i, s1[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// for range形式</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\nfor range形式&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> s1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v:%v\n&quot;</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-12-切片append添加元素"><a href="#2-12-切片append添加元素" class="headerlink" title="2.12 切片append添加元素"></a>2.12 切片<code>append</code>添加元素</h4><blockquote>
<ul>
<li>调用<code>append</code>函数必须要用原数组变量名接收返回值</li>
<li>追加元素时，原来的底层数组放不下时，<code>go</code>会将底层数组更换一个新的数组内存地址，并且新的数组内存地址进行了自动扩容，那么更换了个那就必须接收，所以要用原来的切片变量名来进行接收</li>
<li>自动扩容有时候是原来数组长度的2倍</li>
<li><code>append</code>函数可以追加一个元素，追加多个元素，追加切片<ul>
<li>相当于是两个切片相加</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line">切片 = <span class="built_in">append</span>(切片变量名，需要追加的元素)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义切片</span></span><br><span class="line">	s1 := []<span class="type">string</span>&#123;<span class="string">&quot;sam&quot;</span>, <span class="string">&quot;bob&quot;</span>, <span class="string">&quot;lily&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v  cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=3  cap(s1)=3</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 调用append函数必须要用原数组变量名接收返回值</span></span><br><span class="line">	<span class="comment">// 追加一个元素</span></span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="string">&quot;six_people&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// [sam bob lily six_people]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v  cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=4  cap(s1)=6</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 追加多个元素</span></span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="string">&quot;aliy&quot;</span>, <span class="string">&quot;wide&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// [sam bob lily six_people wide wide]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v  cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=4  cap(s1)=6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>将一个切片追加到另一个切片</p>
<p><code>append</code>函数里追加另一个切片</p>
<ul>
<li><code>s1 = append(s1, s2...)</code></li>
<li><code>s2...</code>表示将s2切片拆开，不是省略号</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义切片</span></span><br><span class="line">	s1 := []<span class="type">string</span>&#123;<span class="string">&quot;sam&quot;</span>, <span class="string">&quot;bob&quot;</span>, <span class="string">&quot;lily&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v  cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=3  cap(s1)=3</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 追加一个切片</span></span><br><span class="line">	s2 := []<span class="type">string</span>&#123;<span class="string">&quot;lining&quot;</span>, <span class="string">&quot;xiaohong&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// s2... 表示将s2拆开，不是省略号，将s2切片整个都追加到s1切片</span></span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, s2...)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// [sam bob lily lining xiaohong]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s1)=%v  cap(s1)=%v\n&quot;</span>, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1)) <span class="comment">// len(s1)=7  cap(s1)=12</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-13-切片copy"><a href="#2-13-切片copy" class="headerlink" title="2.13 切片copy"></a>2.13 切片<code>copy</code></h4><blockquote>
<p>由于切片是引用类型，当把一个切片指向另一个切片时，修改一个切片的值，另一个切片也会跟着修改</p>
<p>为了解决这种问题，引入了<code>copy</code>函数</p>
<ul>
<li><code>copy</code>函数可以快速的将一个切片完整复制到另一个切片空间中</li>
<li>即使修改了原始的切片元素值，<code>copy</code>过去的切片对应位置的元素值也不会修改</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="built_in">copy</span>(目标切片， 源切片 []T)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义切片</span></span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	s2 := s1</span><br><span class="line">	s3 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="comment">// copy切片，s3是目标切片，s1是源切片</span></span><br><span class="line">	<span class="built_in">copy</span>(s3, s1)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改源切片s1的第一个元素值为100</span></span><br><span class="line">	s1[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1 = %v\n&quot;</span>, s1) <span class="comment">//  [100 2 3]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2 = %v\n&quot;</span>, s2) <span class="comment">//  [100 2 3]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s3 = %v\n&quot;</span>, s3) <span class="comment">//  [1 2 3]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以看到s3 copy了s1切片后，即使s1的元素值修改了，s3的也不会变</span></span><br></pre></td></tr></table></figure>

<h4 id="2-14-切片append删除元素"><a href="#2-14-切片append删除元素" class="headerlink" title="2.14 切片append删除元素"></a>2.14 切片append删除元素</h4><blockquote>
<p><code>go</code>语言中没有特定删除切片指定元素的方法，需要自己写</p>
<ul>
<li><code>切片</code>修改的是底层数组</li>
<li>切片修改了某个值，底层数组的值也会进行修改，因为切片是引用类型，指向的也是底层的数组</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line">a := []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">a = <span class="built_in">append</span>(a[:index], a[index+<span class="number">1</span>:]...)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这三个点(...)是表示把切片元素拆开追加到另一个数组里，不是省略号的意思</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 删除切片指定索引位置元素</span></span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 比如删除索引位置为2，值为3的元素</span></span><br><span class="line">	s1 = <span class="built_in">append</span>(s1[:<span class="number">2</span>], s1[<span class="number">3</span>:]...)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:</p>
<ul>
<li><code>append</code>切片删除元素时，给<code>append</code>里传入的第一个值一定必须是切片类型，不能是其他类型，否则会下面的报错，提示<code>append</code>第一个元素必须是切片(<code>slice</code>)</li>
</ul>
</blockquote>


<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义数组</span></span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">	<span class="comment">// 拿到切片</span></span><br><span class="line">	s2 := s1[:]</span><br><span class="line">	<span class="comment">// 删除元素3前:</span></span><br><span class="line">	<span class="comment">// 切片s2是 [1 2 3 4 5 6]</span></span><br><span class="line">	<span class="comment">// len(s2) = 6, cap(s2)=6</span></span><br><span class="line">	fmt.Println(s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 切片是引用类型，如果对切片进行了删除值的操作</span></span><br><span class="line">	<span class="comment">// 那么底层数组的值也会被修改，但是切片不保存值</span></span><br><span class="line">	<span class="comment">// 切片操作的是底层数组</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除元素3前，s2[0]的内存地址：0xc00000c450</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;s2[<span class="number">0</span>])</span><br><span class="line">	s2 = <span class="built_in">append</span>(s2[:<span class="number">2</span>], s2[<span class="number">3</span>:]...)  <span class="comment">// 操作的是底层数组</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除元素3后，s2[0]的内存地址：0xc00000c450</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;s2[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 可以看出来，删除元素前后，切片的内存地址没有变</span></span><br><span class="line">	<span class="comment">// 那么也说明了切片不存值，对应操作的也是底层数组</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除元素3后:</span></span><br><span class="line">	<span class="comment">// 切片s2变成了 [1 2 4 5 6]</span></span><br><span class="line">	<span class="comment">// len(s2) = 5, cap(s2)=6</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;s1:&quot;</span>, s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line">	fmt.Println(<span class="string">&quot;s2:&quot;</span>, s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 比如修改切片s2的第一个元素值</span></span><br><span class="line">	<span class="comment">//s2[0] = 100</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2[0]的内存地址: %p\n&quot;</span>, &amp;s2[<span class="number">0</span>])</span><br><span class="line">	fmt.Printf(<span class="string">&quot;底层数组s1: %v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;切片s2: %v\n&quot;</span>, s2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-15-切片是引用类型验证"><a href="#2-15-切片是引用类型验证" class="headerlink" title="2.15 切片是引用类型验证"></a>2.15 切片是引用类型验证</h4><blockquote>
<p><code>切片是引用类型，指向了底层数组</code></p>
<p>下面是切片属于引用类型的验证</p>
<ul>
<li>可以看到从<code>数组s1</code>进行了切片得到了<code>切片s2</code></li>
<li>然后对切片后得到的<code>切片s2</code>进行了第一个元素重新赋值</li>
<li>以及对<code>原始数组s1</code>的第三个元素重新赋值</li>
<li>最后输出<code>数组s1</code>和<code>数组s2</code>的元素都为一致</li>
</ul>
<p>由此可以看出切片是引用类型，不管是修改了切片的某个元素值，还是修改了原始数组的某个元素值，原始数组或切片共同位置的元素也会进行同步修改</p>
<p>对于引用类型，若使用var进行声明变量，<code>必须使用make函数对其进行分配内存,</code>若不初始化，该变量默认值为nil，向其添加元素时会导致panic。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 切片</span></span><br><span class="line">	<span class="comment">// 由数组得到切片</span></span><br><span class="line">	s1 := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 表示切片了整个数组，相当于是复制了整个数组，但是注意切片是引用类型</span></span><br><span class="line">	s2 := s1[:]</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改s2的第一元素的值</span></span><br><span class="line">	s2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改s1的第三元素的值</span></span><br><span class="line">	s1[<span class="number">2</span>] = <span class="number">399</span></span><br><span class="line">	<span class="comment">// 可以看到s1和s2的第一个元素的值都被修改了</span></span><br><span class="line">	fmt.Println(s2) <span class="comment">// [100 2 399 4 5 6 7 8 9]</span></span><br><span class="line">	fmt.Println(s1) <span class="comment">// [100 2 399 4 5 6 7 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-16-切片本质"><a href="#2-16-切片本质" class="headerlink" title="2.16 切片本质"></a>2.16 切片本质</h4><blockquote>
<p>切片本质就是一个框，框住了一段连续的内存区域，真正的数据是保存在底层数组中</p>
<p>切片是引用类型</p>
<p>切片不保存具体的值</p>
<p>切片对应一个底层数组</p>
<p>底层数组是一段连续的内存区域</p>
</blockquote>
<h4 id="2-17-切片练习题"><a href="#2-17-切片练习题" class="headerlink" title="2.17 切片练习题"></a>2.17 切片练习题</h4><h5 id="2-17-1-for循环生成切片"><a href="#2-17-1-for循环生成切片" class="headerlink" title="2.17.1 for循环生成切片"></a>2.17.1 <code>for</code>循环生成切片</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建切片,下面是长度为5，有5个0的切片</span></span><br><span class="line">	s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++&#123;</span><br><span class="line">		s1 = <span class="built_in">append</span>(s1, i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v&quot;</span>, s1) <span class="comment">// 追加到5个0后面，所以结果是: [0 0 0 0 0 0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-17-2-实现lstrip-函数"><a href="#2-17-2-实现lstrip-函数" class="headerlink" title="2.17.2 实现lstrip()函数"></a>2.17.2 实现lstrip()函数</h5><blockquote>
<p>编写删除字符串首部的空格代码，和<code>python</code>的<code>lstrip()</code>一样</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strLeftStrip</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="comment">//  去除字符串首位左侧的空格</span></span><br><span class="line">	<span class="keyword">if</span> !strings.HasPrefix(s, <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> s</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 将s转换为切片</span></span><br><span class="line">	sToSlice := strings.Split(s, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	sToSlice = <span class="built_in">append</span>(sToSlice[:<span class="number">0</span>], sToSlice[<span class="number">1</span>:]...)</span><br><span class="line">	ret := strings.Join(sToSlice, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-17-3-实现rstrip-函数"><a href="#2-17-3-实现rstrip-函数" class="headerlink" title="2.17.3 实现rstrip()函数"></a>2.17.3 实现rstrip()函数</h5><blockquote>
<p>编写删除字符串尾部的空格代码，和<code>python</code>的<code>rstrip()</code>一样</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strRightStrip</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="comment">//  去除字符串首位左侧的空格</span></span><br><span class="line">	<span class="keyword">if</span> !strings.HasSuffix(s, <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> s</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 将s转换为切片</span></span><br><span class="line">	sToSlice := strings.Split(s, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	sToSlice = <span class="built_in">append</span>(sToSlice[<span class="number">0</span>:<span class="built_in">len</span>(sToSlice) - <span class="number">1</span>], <span class="string">&quot;&quot;</span>)</span><br><span class="line">	ret := strings.Join(sToSlice, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-17-4-实现strip-函数"><a href="#2-17-4-实现strip-函数" class="headerlink" title="2.17.4 实现strip()函数"></a>2.17.4 实现strip()函数</h5><blockquote>
<p>编写删除字符串首部和尾部的空格代码，和<code>python</code>的<code>strip()</code>一样</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strStrip</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> !strings.HasSuffix(s, <span class="string">&quot; &quot;</span>) &amp;&amp; !strings.HasPrefix(s, <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> s</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 先处理左侧首部空格</span></span><br><span class="line">	s = strLeftStrip(s)</span><br><span class="line">	</span><br><span class="line">	s = strRightStrip(s)</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、指针"><a href="#3、指针" class="headerlink" title="3、指针"></a>3、指针</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://studygolang.com/articles/29273">https://studygolang.com/articles/29273</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yonggeit/article/details/102521391">https://blog.csdn.net/yonggeit/article/details/102521391</a></p>
</blockquote>
<blockquote>
<p><code>go</code>语言中不存在指针运算，仅可以操作指针</p>
<ul>
<li><code>指针</code>：<ul>
<li>是指某一个指针类型的一个值，通过<code>&amp;变量名</code>获取到的值就是<code>指针</code>(表示这个<code>变量名</code>指向的内存地址)</li>
<li>一个指针可以存一个内存地址，所以指针也就是内存地址</li>
<li>一个指针中存储的内存地址为另外一个值(也叫变量)的地址</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="3-1-指针操作"><a href="#3-1-指针操作" class="headerlink" title="3.1 指针操作"></a>3.1 指针操作</h4><h5 id="3-1-1-获取指针"><a href="#3-1-1-获取指针" class="headerlink" title="3.1.1 获取指针"></a>3.1.1 获取指针</h5><blockquote>
<p><code>&amp;</code> : 取变量的内存地址，内存地址是一个16进制数</p>
<p><code>%p</code>: 是指直接使用<code>fmt</code>打印指针值，打印的时候需要在变量前面加<code>&amp;</code>符号</p>
<ul>
<li>十六进制(前缀0x)表示</li>
<li>一般是用来打印指针的，<code>fmt.Printf(“%p\n”, &amp;s1)</code></li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211221174834896.png" class="" title="image-20211221174834896">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 查看内存地址符号：&amp;</span></span><br><span class="line">	age := <span class="number">18</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//age的值:18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;age值:%v\n&quot;</span>, age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//直接打印age的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址: %v\n&quot;</span>, &amp;age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//直接打印age的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址: %p\n&quot;</span>, &amp;age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// age的内存地址: *int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址类型: %T\n&quot;</span>, &amp;age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码可以看出来</p>
<ul>
<li>使用%v和%p打印变量age的内存地址都可以，因为%v表示接收任意类型的变量，而%p专门打印16进制的值，所以后面打印内存地址都使用%p</li>
<li>可以看到打印变量age的内存地址的类型是<code>*int</code><ul>
<li>以后遇到变量类型的前面有个星号，那就表示是该类型对应的指针类型</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-1-2-根据指针获取值"><a href="#3-1-2-根据指针获取值" class="headerlink" title="3.1.2 根据指针获取值"></a>3.1.2 根据指针获取值</h5><blockquote>
<p><code>*</code> : 根据指针(内存地址)取值，获取到的是这个内存地址指向的原始值</p>
<ul>
<li>注意：<ul>
<li>给函数中传入一个指针类型形参，就表示这个形参是一个内存地址</li>
<li>所以在函数内部，要取得这个内存地址的值，就需要使用<code>*变量名</code>拿到内存地址对应的具体值，然后进行操作</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 查看内存地址符号：&amp;</span></span><br><span class="line">	age := <span class="number">18</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//age的值:18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;age值:%v\n&quot;</span>, age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//直接打印age的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址: %p\n&quot;</span>, &amp;age)</span><br><span class="line"></span><br><span class="line">	ageVal := *(&amp;age)</span><br><span class="line">	<span class="comment">// 获取age的原始值: 18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;获取age的原始值: %v\n&quot;</span>, ageVal)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-1-3-变量重新赋值指针不变"><a href="#3-1-3-变量重新赋值指针不变" class="headerlink" title="3.1.3 变量重新赋值指针不变"></a>3.1.3 变量重新赋值指针不变</h5><blockquote>
<ul>
<li>从下面代码可以看出来，代码运行期间：<ul>
<li>变量<code>a</code>定义后会申请一块内存空间，用来存变量<code>a</code>的值</li>
<li>那么申请的内存空间的地址在代码运行期间永远不会变，但是变量<code>a</code>的值可以变，就是说变量<code>a</code>可以进行重复赋值，但是变量<code>a</code>的内存地址永不会变</li>
</ul>
</li>
<li>就是说变量<code>a</code>申请好内存地址以后，可以放任意值进去，也可以对放进去的值进行修改(也叫重新赋值)，但是变量<code>a</code>的内存地址申请好以后是永远不会变的</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 查看内存地址符号：&amp;</span></span><br><span class="line">	age := <span class="number">18</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//age的值:18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;age值:%v\n&quot;</span>, age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//&amp;符号获取age的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址: %p\n&quot;</span>, &amp;age)</span><br><span class="line"></span><br><span class="line">	age = <span class="number">28</span></span><br><span class="line">	<span class="comment">//age变量重新赋值的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;age变量重新赋值的内存地址: %p\n&quot;</span>, &amp;age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-1-4-指针打印理解"><a href="#3-1-4-指针打印理解" class="headerlink" title="3.1.4 指针打印理解"></a>3.1.4 指针打印理解</h5><blockquote>
<p>在fmt包中，有两种格式都可以打印内存地址</p>
<p><code>%v</code>万能打印占位符，什么类型都可以打印</p>
<p><code>%p</code>专门打印16进制0x开头的值，所以后面打印内存地址就使用<code>%p</code>，专门的占位符打印内存地址</p>
</blockquote>
<h4 id="3-2-指针类型"><a href="#3-2-指针类型" class="headerlink" title="3.2 指针类型"></a>3.2 指针类型</h4><blockquote>
<p>如果定义变量的是什么类型，那么他的指针就是什么类型，常见的就是<code>string</code>、<code>int</code>、<code>bool</code>三种指针类型，后面会有结构体类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	strData <span class="type">string</span></span><br><span class="line">	intData <span class="type">int</span></span><br><span class="line">	boolData <span class="type">bool</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 如果定义变量的是什么类型，那么他的指针就是什么类型</span></span><br><span class="line">	<span class="comment">// string类型指针</span></span><br><span class="line">	strData = <span class="string">&quot;hello&quot;</span></span><br><span class="line">	strDataAddr := &amp;strData</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, strDataAddr) <span class="comment">// 是hello的内存地址: 0x113cf30</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, strDataAddr) <span class="comment">// *string 类型的指针</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// int类型指针</span></span><br><span class="line">	intData = <span class="number">13</span></span><br><span class="line">	intDataAddr := &amp;intData</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, intDataAddr) <span class="comment">// 是13的内存地址: 0x116bd30</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, intDataAddr) <span class="comment">// *int 类型指针</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// bool类型指针</span></span><br><span class="line">	boolData = <span class="literal">true</span></span><br><span class="line">	boolDataAddr := &amp;boolData</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, boolDataAddr) <span class="comment">// 是bool的内存地址: 0x116bca1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, boolDataAddr) <span class="comment">// *bool 类型指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-变量接收内存地址值"><a href="#3-3-变量接收内存地址值" class="headerlink" title="3.3 变量接收内存地址值"></a>3.3 变量接收内存地址值</h4><blockquote>
<p>在一个数据类型获取内存地址时，可以把获取到的内存地址用一个纯新变量来接收</p>
<p>注意：</p>
<ul>
<li>此时纯新变量的值就是获取到的内存地址</li>
<li>而纯新变量自己的内存地址是自己，而不是获取到内存地址</li>
</ul>
<p>从下图来看：</p>
<ul>
<li>a变量赋值18</li>
<li>获取a的内存地址后，赋值给b<ul>
<li>此时b的值就是a的内存地址</li>
<li>b的类型就是指针类型，因为b的值是a的内存地址</li>
</ul>
</li>
<li>但是b自己的内存地址和b的值是两个值，这一块要注意，有时候会搞混</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220424080913306.png" class="" title="image-20220424080913306">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 查看内存地址符号：&amp;</span></span><br><span class="line">	age := <span class="number">18</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//age的值:18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;age值:%v\n&quot;</span>, age)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// &amp;符号获取age的内存地址: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;&amp;符号获取age的内存地址: %p\n&quot;</span>, &amp;age)</span><br><span class="line"></span><br><span class="line">	ageMer := &amp;age</span><br><span class="line">	<span class="comment">// ageMer变量接收age内存地址的值: 0xc00000a098</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;ageMer变量接收age内存地址的值: %p\n&quot;</span>, ageMer)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ageMer变量接收age内存地址的值: *int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;ageMer变量接收age内存地址的值: %T\n&quot;</span>, ageMer)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ageMer的内存地址: 0xc000006030</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;ageMer的内存地址: %p\n&quot;</span>, &amp;ageMer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、new"><a href="#4、new" class="headerlink" title="4、new"></a>4、<code>new</code></h3><blockquote>
<p><code>new</code>函数用来申请内存地址</p>
<p><code>new</code>很少用，一般用来给基础数据类型申请内存，string\int, 返回的是对应类型指针 </p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// var 声明变量时需要指定类型，下面是给a1指定的类型是 指针类型，表示我想定义一个空指针变量, 然后对这个空指针经过*号获取原来的值进行重新赋值</span></span><br><span class="line">	<span class="comment">// 但是指针类型的零值是nil，</span></span><br><span class="line">	<span class="comment">// 所以会报错：panic: runtime error: invalid memory address or nil pointer dereference，翻译过来: 解除对空指针的引用</span></span><br><span class="line">	<span class="comment">//var a1 *int</span></span><br><span class="line">	<span class="comment">//fmt.Printf(&quot;%v\n&quot;, a1)</span></span><br><span class="line">	<span class="comment">//*a = 100</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// new函数申请内存地址</span></span><br><span class="line">	<span class="keyword">var</span> a2 = <span class="built_in">new</span>(<span class="type">int</span>)</span><br><span class="line">	<span class="comment">// 申请了一个内存地址</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, a2)  <span class="comment">// 0xc00001e098</span></span><br><span class="line">	<span class="comment">// *a2表示根据内存地址找到对应的值</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, *a2) <span class="comment">// 0</span></span><br><span class="line">	<span class="comment">// 重新对这个内存地址对应的值进行赋值,因为它是一个int类型的内存地址,所以int类型的零值是0，所以输出为0</span></span><br><span class="line">	<span class="comment">// 再对这个内存地址对应的值重新赋值为100，其实可以把(*a2)理解为一个变量名，一开始它的值是0，下面重新又赋一个值100</span></span><br><span class="line">	*a2 = <span class="number">100</span></span><br><span class="line">	<span class="comment">// 再次打印出该内存地址对应的值</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, *a2) <span class="comment">// 100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、make和new的区别"><a href="#5、make和new的区别" class="headerlink" title="5、make和new的区别"></a>5、<code>make</code>和<code>new</code>的区别</h3><blockquote>
<p><code>make</code>也是用于内存分配，区别于<code>new</code></p>
<p><code>make</code>区别点:</p>
<ul>
<li>只用于切片<code>slice</code>、<code>map</code>、<code>chanl</code>的内存创建</li>
<li>并且返回的是上面这三种类型本身，不是他们的指针类型, 因为这三种属于引用类型</li>
</ul>
</blockquote>
<h3 id="6、map"><a href="#6、map" class="headerlink" title="6、map"></a>6、<code>map</code></h3><blockquote>
<p><code>map</code>是一种无序的基于<code>key-value</code>的数据结构</p>
<p><code>map</code>属于引用类型</p>
<p>必须初始化才可以用</p>
<p><code>map</code>和<code>python</code>里的<code>dict</code>很类似</p>
</blockquote>
<h4 id="6-1-var关键字声明map"><a href="#6-1-var关键字声明map" class="headerlink" title="6.1 var关键字声明map"></a>6.1 <code>var</code>关键字声明<code>map</code></h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="keyword">map</span>[KeyType]ValueType</span><br><span class="line"></span><br><span class="line"><span class="comment">// KeyType:表示键类型</span></span><br><span class="line"><span class="comment">// ValueType:表示值类型</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>从下面代码可以看到</p>
<ul>
<li><code>var</code>关键字声明的<code>map</code>本来就是<code>map[]</code>，本质的值是<code>nil</code>,所以和<code>nil</code>比较是<code>true</code></li>
<li><code>map</code>的类型是包含了<code>KeyType</code>和<code>ValueType</code>，<code>key-value</code>的<code>type</code>也是<code>map</code>整个类型的一部分</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, m1) <span class="comment">// map[string]int(nil)</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;m1==nil:%v\n&quot;</span>, m1==<span class="literal">nil</span>) <span class="comment">// m1==nil:true</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, m1) <span class="comment">// map[string]int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>map</code>类型初始值是<code>nil</code>，不能直接给<code>map</code>来赋值，会报错的</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	m1[<span class="string">&quot;age&quot;</span>] = <span class="number">18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1[<span class="string">&quot;age&quot;</span>])</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 会看到有一个panic错误</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211208233358205.png" class="" title="image-20211208233358205">



<h4 id="6-2-map初始化"><a href="#6-2-map初始化" class="headerlink" title="6.2 map初始化"></a>6.2 <code>map</code>初始化</h4><h5 id="6-2-1-var关键字初始化"><a href="#6-2-1-var关键字初始化" class="headerlink" title="6.2.1 var关键字初始化"></a>6.2.1 <code>var</code>关键字初始化</h5><blockquote>
<p>如果只是用var声明了一个<code>map</code>,并没有初始化，那这个<code>map</code>的值是<code>nil</code>，表示还没有初始化（也就是没有在内存里开辟空间）</p>
<p>需要使用<code>make()</code>函数来分配内存，也就是初始化<code>map</code></p>
</blockquote>
<blockquote>
<p>先来看看<code>make()</code>函数初始化格式</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">map</span>[KeyType]ValueType, [<span class="built_in">cap</span>])</span><br><span class="line"><span class="comment">// make的第一个参数：map[KeyType]ValueType 表示是一个map类型</span></span><br><span class="line"><span class="comment">// make的第二个参数： [cap]表示map的容量，非必填参数，但还需要给指定一个容量</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	m1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>) <span class="comment">// </span></span><br><span class="line">	m1[<span class="string">&quot;age1&quot;</span>] = <span class="number">18</span></span><br><span class="line">	m1[<span class="string">&quot;age2&quot;</span>] = <span class="number">28</span></span><br><span class="line">	m1[<span class="string">&quot;age2&quot;</span>] = <span class="number">900</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[age1:18 age2:900]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1[<span class="string">&quot;age1&quot;</span>]) <span class="comment">// 18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1[<span class="string">&quot;age2&quot;</span>]) <span class="comment">// 900</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码可以看出，在初始化好<code>map</code>以后：</p>
<ul>
<li>可以正常填充键值对</li>
<li>当键有多个一样时，最终在<code>map</code>里只会留下最后一个相同的<code>key-value</code></li>
<li>因为容量是可以自动扩容的，所以建议在使用<code>make</code>函数定义容量时，估算好容量，避免自动扩容，因为自动扩容会增大运行速度</li>
</ul>
</blockquote>
<h5 id="6-2-2-短变量初始化"><a href="#6-2-2-短变量初始化" class="headerlink" title="6.2.2 短变量初始化"></a>6.2.2 短变量初始化</h5><blockquote>
<p><code>map</code>也可以使用短变量进行初始化，省去了声明的步骤，一步做到声明+初始化</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// map</span></span><br><span class="line">	m1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>, <span class="number">5</span>)</span><br><span class="line">	m1[<span class="number">0</span>] = <span class="string">&quot;bob&quot;</span></span><br><span class="line">	m1[<span class="number">1</span>] = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	m1[<span class="number">2</span>] = <span class="string">&quot;alop&quot;</span></span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[0:bob 1:sam 2:alop]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-3-map获取key-value"><a href="#6-3-map获取key-value" class="headerlink" title="6.3 map获取key-value"></a>6.3 <code>map</code>获取<code>key-value</code></h4><blockquote>
<p><code>map</code>取值也是用中括号里面放<code>key</code>来取值，和<code>python</code>一样</p>
<p>注意：</p>
<ul>
<li>取值时是可以接收两个值，第一个是值本身，第二个是这个值是否存在的布尔说明，如果存在则返回<code>true</code>，不存在则返回<code>false</code><ul>
<li><code>v1, ok := m1[&quot;age1&quot;]</code> 这个ok是约定成俗的一个接收<code>key</code>是否存在的变量，就和<code>python</code>面向对象里的<code>self</code>一样,换成别的也可以<ul>
<li>所以就可以用<code>ok</code>这个值来判断<code>key</code>是否存在</li>
</ul>
</li>
<li>当获取的<code>key</code>不存在时，<code>ok</code>是<code>false</code>,并且查找的值是值类型的零值(默认值)</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	m1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	m1[<span class="string">&quot;age1&quot;</span>] = <span class="number">18</span></span><br><span class="line">	m1[<span class="string">&quot;age2&quot;</span>] = <span class="number">28</span></span><br><span class="line">	m1[<span class="string">&quot;age3&quot;</span>] = <span class="number">900</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1[<span class="string">&quot;age1&quot;</span>])</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1[<span class="string">&quot;age2&quot;</span>])</span><br><span class="line"></span><br><span class="line">	v1, ok := m1[<span class="string">&quot;age1&quot;</span>]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v1=%v ok=%v\n&quot;</span>, v1, ok) <span class="comment">// v1=18 ok=true</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;v1=%T ok=%T\n&quot;</span>, v1, ok) <span class="comment">// v1=int ok=bool</span></span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;age1的val:%v\n&quot;</span>, v1)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;age1这个key不存在\n&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如果key不存在直接去获取，那么拿到的是对应值类型的零值(默认值)</span></span><br><span class="line">	v2， ok := m1[<span class="string">&quot;age&quot;</span>]</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v2=%v\n&quot;</span>, v2) <span class="comment">// v2=0 ok=false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-map遍历"><a href="#6-3-map遍历" class="headerlink" title="6.3 map遍历"></a>6.3 <code>map</code>遍历</h4><blockquote>
<p>使用<code>for range</code>来遍历<code>map</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	m1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	m1[<span class="string">&quot;age1&quot;</span>] = <span class="number">18</span></span><br><span class="line">	m1[<span class="string">&quot;age2&quot;</span>] = <span class="number">28</span></span><br><span class="line">	m1[<span class="string">&quot;age3&quot;</span>] = <span class="number">900</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历map的key-value</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;遍历map的key-value\n&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> k,v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v:%v\n&quot;</span>,k,v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 只遍历map的key</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;\n只遍历map的key\n&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> k := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v\n&quot;</span>,k)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 只遍历map的value</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;\n只遍历map的value\n&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v\n&quot;</span>,v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-5-删除键值对"><a href="#6-5-删除键值对" class="headerlink" title="6.5 删除键值对"></a>6.5 删除键值对</h4><blockquote>
<p>使用<code>delete函数</code>删除<code>map</code>的键值对</p>
<p>当删除的<code>key</code>不存在时，不做任何处理</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="built_in">delete</span>(<span class="keyword">map</span>, key)</span><br><span class="line"></span><br><span class="line"><span class="comment">// map: 表示要删除的map</span></span><br><span class="line"><span class="comment">// key: 表示要删除的键值对的键</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义map</span></span><br><span class="line">	<span class="keyword">var</span> m1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span></span><br><span class="line">	m1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	m1[<span class="string">&quot;age1&quot;</span>] = <span class="number">18</span></span><br><span class="line">	m1[<span class="string">&quot;age2&quot;</span>] = <span class="number">28</span></span><br><span class="line">	m1[<span class="string">&quot;age3&quot;</span>] = <span class="number">900</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除键值对</span></span><br><span class="line">	<span class="built_in">delete</span>(m1, <span class="string">&quot;age1&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[age2:28 age3:900]</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除不存在的键</span></span><br><span class="line">	<span class="built_in">delete</span>(m1, <span class="string">&quot;age&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[age2:28 age3:900]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-6-map和切片互相转换"><a href="#6-6-map和切片互相转换" class="headerlink" title="6.6 map和切片互相转换"></a>6.6 <code>map</code>和切片互相转换</h4><blockquote>
<p><code>map</code>里可以放切片，同时切片里可以放<code>map</code></p>
</blockquote>
<h5 id="6-6-1-切片的元素值是map"><a href="#6-6-1-切片的元素值是map" class="headerlink" title="6.6.1 切片的元素值是map"></a>6.6.1 切片的元素值是<code>map</code></h5><blockquote>
<p>切片的每个元素的值都是<code>map</code>类型</p>
<p>注意：</p>
<ul>
<li>因为定义的切片的元素是<code>map</code>，所以要对每个元素还要进行分配内存初始化(<code>make</code>函数分配内存)</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 元素类型为map的切片</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 先对切片初始化，分配内存空间</span></span><br><span class="line">	<span class="keyword">var</span> s1  = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 需要先对切片里，内部的map进行初始化</span></span><br><span class="line">	s1[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	s1[<span class="number">1</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	s1[<span class="number">2</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 重新赋值</span></span><br><span class="line">	s1[<span class="number">0</span>][<span class="string">&quot;name1&quot;</span>] = <span class="number">13</span></span><br><span class="line">	s1[<span class="number">1</span>][<span class="string">&quot;name2&quot;</span>] = <span class="number">23</span></span><br><span class="line">	s1[<span class="number">2</span>][<span class="string">&quot;name3&quot;</span>] = <span class="number">33</span></span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1[<span class="number">2</span>][<span class="string">&quot;name3&quot;</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="6-6-2-map的元素值是切片"><a href="#6-6-2-map的元素值是切片" class="headerlink" title="6.6.2 map的元素值是切片"></a>6.6.2 <code>map</code>的元素值是切片</h5><blockquote>
<p><code>map</code>的每个元素的值都是切片</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// map的键值对的值是切片类型</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 定义并初始化map,并且ValueType是一个切片类型: []int</span></span><br><span class="line">	<span class="keyword">var</span> m1  = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>][]<span class="type">int</span>, <span class="number">5</span>)</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[]</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 对切片类型进行初始化</span></span><br><span class="line">	m1[<span class="string">&quot;name1&quot;</span>] = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">	m1[<span class="string">&quot;name2&quot;</span>] = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 对切片进行重新赋值</span></span><br><span class="line">	m1[<span class="string">&quot;name1&quot;</span>] = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	m1[<span class="string">&quot;name2&quot;</span>] = []<span class="type">int</span>&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, m1) <span class="comment">// map[name1:[1 2 3] name2:[4 5 6]]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-7-map练习题"><a href="#6-7-map练习题" class="headerlink" title="6.7 map练习题"></a>6.7 <code>map</code>练习题</h4><blockquote>
<p> <code>map</code>可以用来统计长段字符串里每个单词出现的次数，下面是<code>go</code>&#x2F;<code>python</code>版本</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go版本</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// how do you do每个单词出现的次数</span></span><br><span class="line">	longStr := <span class="string">&quot;how do you do&quot;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将字符串转换成切片</span></span><br><span class="line">	longStrToList := strings.Split(longStr, <span class="string">&quot; &quot;</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 声明一个空map</span></span><br><span class="line">	longStrToMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">6</span>)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> longStrToList &#123;</span><br><span class="line">		_, ok := longStrToMap[v]</span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			longStrToMap[v] = <span class="number">1</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			longStrToMap[v]++</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;\n%v\n&quot;</span>, longStrToMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211209122734426.png" class="" title="image-20211209122734426">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python版本</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_words_times</span>():</span><br><span class="line">    <span class="comment"># 统计&quot;how do you do&quot;每个单词出现的次数</span></span><br><span class="line">    say_hi = <span class="string">&quot;how do you do&quot;</span></span><br><span class="line">    say_hi_list = say_hi.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">    say_hi_dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> say_hi_list:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">in</span> say_hi_dict:</span><br><span class="line">            say_hi_dict[i] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            say_hi_dict[i] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> say_hi_dict</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211209122721022.png" class="" title="image-20211209122721022">

<blockquote>
<p>其实能够看出来，<code>go</code>和<code>python</code>语法有较多类似的地方，核心编程思想都是一样的，就是看如何用不同语言去实现</p>
</blockquote>
<h3 id="7、值类型和引用类型区别"><a href="#7、值类型和引用类型区别" class="headerlink" title="7、值类型和引用类型区别"></a>7、值类型和引用类型区别</h3><h4 id="1-1-值类型"><a href="#1-1-值类型" class="headerlink" title="1.1 值类型"></a>1.1 值类型</h4><blockquote>
<ul>
<li><strong>定义</strong>：值类型包括基本类型（如 <code>int</code>, <code>float64</code>, <code>string</code> 等）和结构体（<code>struct</code>）。</li>
<li><strong>底层实现</strong>：值类型的底层实现不涉及指针，它们在传递时是按值传递的。</li>
<li><strong>行为</strong>：<ul>
<li>传递值类型时，传递的是该值的副本。对副本的修改不会影响原始值。</li>
<li>值类型在使用<code>var</code>声明时会分配内存，并初始化为默认值。</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-2-引用类型"><a href="#1-2-引用类型" class="headerlink" title="1.2 引用类型"></a>1.2 引用类型</h4><blockquote>
<ul>
<li><strong>定义</strong>：引用类型包括 <code>slice</code>, <code>map</code>, <code>channel</code>, <code>function</code>, <code>interface</code>。</li>
<li><strong>底层实现</strong>：引用类型的底层实现涉及指针，它们在传递时是按引用传递的。</li>
<li><strong>行为</strong>：<ul>
<li>传递引用类型时，传递的是该值的引用。对引用的修改会影响原始值。</li>
<li>引用类型在使用<code>var</code>声明但未初始化时，其值为 <code>nil</code>。</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-3-var、make、new区别"><a href="#1-3-var、make、new区别" class="headerlink" title="1.3 var、make、new区别"></a>1.3 var、make、new区别</h4><blockquote>
<h4 id="var声明方式："><a href="#var声明方式：" class="headerlink" title="var声明方式："></a>var声明方式：</h4><ul>
<li><strong>用途</strong>：用于声明变量，并可以选择性地初始化它。</li>
<li><strong>适用范围</strong>：适用于所有类型，包括基本类型（如 <code>int</code>, <code>float64</code>, <code>string</code> 等）和引用类型（如 <code>slice</code>, <code>map</code>, <code>channel</code> 等）。</li>
<li><strong>初始化</strong>：<ul>
<li>对于基本类型，<code>var</code> 可以直接初始化。</li>
<li>对于引用类型，<code>var</code> 只能声明它们，但不能分配内存或初始化它们。声明的引用类型变量是 <code>nil</code>，不能直接使用。</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<h4 id="make声明方式"><a href="#make声明方式" class="headerlink" title="make声明方式"></a>make声明方式</h4><ul>
<li><strong>用途</strong>：专门用于创建和初始化引用类型（<code>slice</code>, <code>map</code>, <code>channel</code>）。</li>
<li><strong>适用范围</strong>：只适用于引用类型。</li>
<li><strong>初始化</strong>：<code>make</code> 不仅会分配内存，还会初始化内部结构，使得这些引用类型可以立即使用。</li>
</ul>
</blockquote>
<blockquote>
<h4 id="new声明方式"><a href="#new声明方式" class="headerlink" title="new声明方式"></a>new声明方式</h4><ul>
<li><strong>new</strong>创建的变量是指定类型的零值，并返回该变量的指针</li>
<li><strong>new</strong>适用于创建引用类型以外的其他类型变量</li>
</ul>
</blockquote>
<h2 id="八、函数"><a href="#八、函数" class="headerlink" title="八、函数"></a>八、函数</h2><blockquote>
<p>比较重要的语法: <code>函数</code></p>
<p>支持匿名函数、闭包</p>
</blockquote>
<h3 id="1、函数定义"><a href="#1、函数定义" class="headerlink" title="1、函数定义"></a>1、函数定义</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数格式</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> 函数名<span class="params">(参数)</span></span> (返回值) &#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数名：见名知意的函数名</span></span><br><span class="line"><span class="comment">// 参数： 参数由参数名和参数变量组成，多个以逗号隔开</span></span><br><span class="line"><span class="comment">// 返回值：由返回值变量和其类型组成，也可以只写返回类型，多个返回值用()包裹，用逗号(,)隔开</span></span><br><span class="line"><span class="comment">// 函数体：具体函数代码实现</span></span><br></pre></td></tr></table></figure>

<h4 id="1-1-有参数和返回值变量"><a href="#1-1-有参数和返回值变量" class="headerlink" title="1.1 有参数和返回值变量"></a>1.1 有参数和返回值变量</h4><blockquote>
<p>参数可以命名也可以不命名，<br>命名的返回值：</p>
<ul>
<li>相当于是在函数中提前声明一遍变量，比如下面的<code>ret</code><ul>
<li>可以在函数中直接使用,因为在函数定义时已经声明了<code>ret</code>这个变量</li>
<li>并且return时不需要显式指出<code>ret</code>这个变量名，因为都在函数定义时已经指明了返回值名字叫<code>ret</code></li>
</ul>
</li>
<li>并且需要用<code>括号</code>将命名的返回值包裹起来<code>(ret int)</code><ul>
<li>表示返回值的变量名是<code>ret</code>，并且是一个<code>int</code>类型</li>
</ul>
</li>
<li>当然不管是形参、还是返回值变量名可以定义，也可不定义，不定义就只写返回类型，但是需要在函数<code>return</code>时显式的指定返回值</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参数有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> (ret <span class="type">int</span>) &#123;</span><br><span class="line">	ret = a + b</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-函数定义变种"><a href="#1-2-函数定义变种" class="headerlink" title="1.2 函数定义变种"></a>1.2 函数定义变种</h4><blockquote>
<p>下面的几种变种都是围绕<code>1.1</code>来扩展的</p>
</blockquote>
<h5 id="1-2-1-有形参但没有返回值"><a href="#1-2-1-有形参但没有返回值" class="headerlink" title="1.2.1 有形参但没有返回值"></a>1.2.1 有形参但没有返回值</h5><blockquote>
<p>只有<code>形参</code>，没有返回值</p>
<p>没有返回值的函数，不能用变量接收函数，直接<code>函数名+()</code>执行就可以</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">	add(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span>&#123;</span><br><span class="line">	c := a + b</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v + %v = %v\n&quot;</span>,a,b,c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-2-没有形参但有返回值"><a href="#1-2-2-没有形参但有返回值" class="headerlink" title="1.2.2 没有形参但有返回值"></a>1.2.2 没有形参但有返回值</h5><blockquote>
<p>只有返回值，没有形参</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := add()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret = %v\n&quot;</span>, ret)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	c := <span class="number">1</span> + <span class="number">3</span></span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="1-2-3-没有形参和返回值"><a href="#1-2-3-没有形参和返回值" class="headerlink" title="1.2.3 没有形参和返回值"></a>1.2.3 没有形参和返回值</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	add()</span><br><span class="line">	<span class="comment">// fmt.Printf(&quot;ret = %v\n&quot;, ret)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">	s := <span class="number">45</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-4-返回值没有指定变量名"><a href="#1-2-4-返回值没有指定变量名" class="headerlink" title="1.2.4 返回值没有指定变量名"></a>1.2.4 返回值没有指定变量名</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := add()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret = %v\n&quot;</span>, ret)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	s := <span class="number">45</span></span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-5-返回值有多个"><a href="#1-2-5-返回值有多个" class="headerlink" title="1.2.5 返回值有多个"></a>1.2.5 返回值有多个</h5><blockquote>
<ul>
<li>返回值有多个，用括号包裹，然后逗号隔开</li>
<li>在执行函数时，返回多少个值，必须用多少个值来接收<ul>
<li>或者考虑将多个返回值组装成<code>切片</code>或者<code>map</code>返回</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x,y,z := add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, x) <span class="comment">// 1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, y) <span class="comment">// 2</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, z) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x,y <span class="type">int</span>)</span></span> (<span class="type">int</span>,<span class="type">int</span>,<span class="type">int</span>) &#123;</span><br><span class="line">	z := x + y</span><br><span class="line">	<span class="keyword">return</span> x, y, z</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-6-形参类型省略"><a href="#1-2-6-形参类型省略" class="headerlink" title="1.2.6 形参类型省略"></a>1.2.6 形参类型省略</h5><blockquote>
<p>当传入多个形参的类型都一样时，可以值留最后一个形参的类型，前面的都可以省略，这个只适用于同种类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, ret) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="type">int</span>)</span></span> (ret <span class="type">int</span>) &#123;</span><br><span class="line">	ret = x + y</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-7-函数签名"><a href="#1-2-7-函数签名" class="headerlink" title="1.2.7 函数签名"></a>1.2.7 函数签名</h5><blockquote>
<p>Go语言中，函数名和函数签名都是用来描述方法（函数）</p>
<p>函数签名：函数类型又叫函数签名，一个函数的类型就是函数定义首行去掉函数名、参数名和{}</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SayHello</span><span class="params">(name <span class="type">string</span>)</span></span><span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello!&quot;</span> + name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码来看：</p>
<ul>
<li>函数签名就是: func(string) string</li>
</ul>
</blockquote>
<h4 id="1-3-可变长参数"><a href="#1-3-可变长参数" class="headerlink" title="1.3 可变长参数"></a>1.3 可变长参数</h4><blockquote>
<p>很像<code>python</code>里的可变长参数<code>args</code>和<code>kwargs</code>,可以接收<code>n</code>个参数进来，接收进来是一个<code>切片类型</code>,切片的类型依据传进函数的值类型是什么就是什么类型切片</p>
<p>可变长参数使用三个点(<code>...</code>)表示,如下面的形参的<code>y</code></p>
<p>可变长参数必须放在形参后面</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> 函数名<span class="params">(形参 ...T)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 形参: 形参名</span></span><br><span class="line"><span class="comment">// ...T: 可变长参数的类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x, y := add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x = %v\n&quot;</span>, x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;y = %v\n&quot;</span>, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="type">int</span>, y ...<span class="type">int</span>)</span></span> (<span class="type">int</span>, []<span class="type">int</span>)&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x: %v\n&quot;</span>, x) </span><br><span class="line">	fmt.Printf(<span class="string">&quot;y: %v\n&quot;</span>, y) <span class="comment">//[2, 3]</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;y type: %T\n&quot;</span>, y) <span class="comment">// []int</span></span><br><span class="line">	<span class="keyword">return</span> x,y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可变长参数的函数，在别的函数内部调用他的时候，因为a是一个切片，所以需要将他打散再传进去，否则传递进去的是一个切片套切片</p>
<p>参数打散传递进去，需要对切片使用<code>切片…</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reciveArgs</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;a=%v\n&quot;</span>, a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">useReciveArgs</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 因为a是一个空接口类型的切片，传递给reciveArgs需要打散传递进去，使用a...</span></span><br><span class="line">	reciveArgs(a...) <span class="comment">// a=[19 bob [1 2 3 4]]</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 如果不打散，直接传递a进去，就是会把a作为一个整体给递给reciveArgs，这不是我们想要的</span></span><br><span class="line">	reciveArgs(a) <span class="comment">// a=[[19 bob [1 2 3 4]]]</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	useReciveArgs(<span class="number">19</span>, <span class="string">&quot;bob&quot;</span>, []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-形参没有默认值"><a href="#1-4-形参没有默认值" class="headerlink" title="1.4 形参没有默认值"></a>1.4 形参没有默认值</h4><blockquote>
<p><code>go</code>语言中形参是没有默认值，不像<code>python</code>的函数，可以在形参指定一个默认值</p>
</blockquote>
<h4 id="1-5-变量作用域"><a href="#1-5-变量作用域" class="headerlink" title="1.5 变量作用域"></a>1.5 变量作用域</h4><h5 id="1-5-1-全局作用域"><a href="#1-5-1-全局作用域" class="headerlink" title="1.5.1 全局作用域"></a>1.5.1 全局作用域</h5><blockquote>
<p>全局作用域是指定义在函数外部区域，这里的变量可以在全局的任意位置访问到</p>
<ul>
<li>函数中查找变量的规则顺序：<ol>
<li>先在函数内部查找</li>
<li>如果可以找到，就是用函数内部定义的变量</li>
<li>如果找不到，那就在函数外部的全局变量查找，找到则是用</li>
<li>在函数内部、函数外部都找不到，会报<code>undefined</code>的错误</li>
</ol>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x <span class="type">int</span> = <span class="number">10</span>  <span class="comment">// 定义的是全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	函数中查找变量的规则顺序</span></span><br><span class="line"><span class="comment">	1、先在函数内部查找</span></span><br><span class="line"><span class="comment">	2、如果可以找到，就是用函数内部定义的变量</span></span><br><span class="line"><span class="comment">	3、如果找不到，那就在函数外部的全局变量查找，找到则是用</span></span><br><span class="line"><span class="comment">	4、在函数内部、函数外部都找不到，会报undefined的错误</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	x = <span class="number">123</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;x=%v\n&quot;</span>, x) <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果变量在函数内外都没有定义，因为找不到该变量，会报<code>undefined</code>错误</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x <span class="type">int</span> = <span class="number">10</span>  <span class="comment">// 定义的是全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x = <span class="number">123</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;x=%v\n&quot;</span>, x) <span class="comment">// 123</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 输出变量y</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;y=%v\n&quot;</span>, y) <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20211213144417133.png" class="" title="image-20211213144417133">

<h5 id="1-5-2-局部作用域"><a href="#1-5-2-局部作用域" class="headerlink" title="1.5.2 局部作用域"></a>1.5.2 局部作用域</h5><blockquote>
<p>局部作用域就是在函数内部区域的</p>
<p>局部作用域和全局作用域变量重名，优先使用局部作用域，表示是<code>就近原则</code></p>
</blockquote>
<h5 id="1-5-3-语法块作用域"><a href="#1-5-3-语法块作用域" class="headerlink" title="1.5.3 语法块作用域"></a>1.5.3 语法块作用域</h5><blockquote>
<p><code>go</code>语言中一些语法块也有自己的作用域，比如:<code>if循环</code>、<code>for循环</code>、<code>switch语句</code>常见的这三种</p>
<p>如果在语法块外部访问语法块内部的变量，都会报<code>undefined</code>错误</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">13</span></span><br><span class="line">	<span class="keyword">if</span> x &gt; <span class="number">13</span> &#123;</span><br><span class="line">		y := <span class="number">23</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;y=%v\n&quot;</span>, y) <span class="comment">// if语句内的变量只能if语句内访问到，if外面访问不到</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;y=%v\n&quot;</span>, y) <span class="comment">// undefined: y</span></span><br><span class="line"></span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s1 &#123;</span><br><span class="line">		d := <span class="number">99</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;v=%v\n&quot;</span>, v)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;d=%v\n&quot;</span>, d)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d=%v\n&quot;</span>, d) <span class="comment">// undefined: d</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-6-形参是函数类型"><a href="#1-6-形参是函数类型" class="headerlink" title="1.6 形参是函数类型"></a>1.6 形参是函数类型</h4><blockquote>
<p>函数传入的形参时需要指定类型，形参的类型除了<code>int</code>&#x2F;<code>string</code>&#x2F;<code>boolean</code>，还可以是函数类型</p>
</blockquote>
<blockquote>
<p>那什么是函数类型？下面代码展示了什么是函数类型</p>
<ul>
<li>从<code>main</code>函数可以看出<ul>
<li><code>f1</code>函数的类型是<code>func()</code></li>
<li><code>f2</code>函数的类型是<code>func() int</code></li>
<li><code>f3</code>函数的类型是<code>func(int, string) int</code></li>
</ul>
</li>
<li>所以函数类型是什么依据与函数定义时，设置的形参类型和返回值类型</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;这是f1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	x := <span class="number">4</span></span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数传入到函数里</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(x <span class="type">int</span>, y <span class="type">string</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x=%v\n&quot;</span>, x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;y=%v\n&quot;</span>, y)</span><br><span class="line">	ret := <span class="number">33</span></span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f1 := f1</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 = %v\n&quot;</span>, f1) <span class="comment">// f1的内存地址：0x108b480</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 Type is:%T\n&quot;</span>, f1) <span class="comment">// f1函数的类型: func()</span></span><br><span class="line">	</span><br><span class="line">	f2 := f2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 = %v\n&quot;</span>, f2) <span class="comment">// f2的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 Type is:%T\n&quot;</span>, f2)<span class="comment">// f2函数的类型: func() int</span></span><br><span class="line">	</span><br><span class="line">	f3 := f3</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 = %v\n&quot;</span>, f3) <span class="comment">// f3的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 Type is:%T\n&quot;</span>, f3)<span class="comment">// f3函数的类型: func(int, string) int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>知道了函数类型是什么，那么就可以将函数类型作为形参的一种类型传入函数中</p>
<ul>
<li>下面代码的函数<code>f3</code>定义时，给形参<code>x</code>指定的类型是<code>func() int</code>,<ul>
<li><code>func() int</code>类型就表示形参<code>x</code>的类型是一个函数类型，并且这个函数类型本身是没有形参传入，但是有一个<code>int</code>型的返回值</li>
<li>执行<code>x()</code>就相当于是在执行<code>func() int</code>这个类型的函数<ul>
<li><code>func() int</code>函数有一个返回值是2，那么<code>x()</code>的结果就是<code>4</code>,所以函数<code>f3</code>里的<code>ret</code>值就是<code>4</code>,并且<code>ret</code>是整型，所以可以作为函数<code>f3</code>的返回值</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;这是f1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	x := <span class="number">4</span></span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数传入到函数里</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(x <span class="keyword">func</span>()</span></span> <span class="type">int</span>) <span class="type">int</span>&#123;</span><br><span class="line">	ret := x()</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f1 := f1</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 = %v\n&quot;</span>, f1) <span class="comment">// f1的内存地址：0x108b480</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 Type is:%T\n&quot;</span>, f1) <span class="comment">// f1函数的类型: func()</span></span><br><span class="line"></span><br><span class="line">	f2 := f2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 = %v\n&quot;</span>, f2) <span class="comment">// f2的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 Type is:%T\n&quot;</span>, f2)<span class="comment">// f2函数的类型: func() int</span></span><br><span class="line"></span><br><span class="line">	f3 := f3(f2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 = %v\n&quot;</span>, f3) <span class="comment">// f3的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 Type is:%T\n&quot;</span>, f3)<span class="comment">// f3的类型: int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-7-函数返回值是函数类型"><a href="#1-7-函数返回值是函数类型" class="headerlink" title="1.7 函数返回值是函数类型"></a>1.7 函数返回值是函数类型</h4><blockquote>
<p>形参的类型可以使函数类型，那么函数返回值也可以是函数类型</p>
<p><code>func() int</code>是一种函数类型，作为了函数返回值，那么最后在<code>f3</code>返回时，就可以把符合<code>func() int</code>类型的返回值的函数返回，比如<code>f1</code>函数</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">33</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	x := <span class="number">4</span></span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数传入到函数里</span></span><br><span class="line"><span class="comment">// 返回值是函数类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(x <span class="keyword">func</span>()</span></span> <span class="type">int</span>) <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> f1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f1 := f1</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 = %v\n&quot;</span>, f1) <span class="comment">// f1的内存地址：0x108b480</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1 Type is:%T\n&quot;</span>, f1) <span class="comment">// f1函数的类型: func() int</span></span><br><span class="line"></span><br><span class="line">	f2 := f2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 = %v\n&quot;</span>, f2) <span class="comment">// f2的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2 Type is:%T\n&quot;</span>, f2)<span class="comment">// f2函数的类型: func() int</span></span><br><span class="line"></span><br><span class="line">	f3 := f3(f2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 = %v\n&quot;</span>, f3) <span class="comment">// f3的内存地址：0x108b4e0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f3 Type is:%T\n&quot;</span>, f3)<span class="comment">// f3函数的类型: func() int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-8-匿名函数"><a href="#1-8-匿名函数" class="headerlink" title="1.8 匿名函数"></a>1.8 匿名函数</h4><blockquote>
<ul>
<li><code>匿名函数</code>出现的原因：在函数内部没法声明一个带名字的函数，但是可以声明匿名函数</li>
<li><code>匿名函数</code>定义：<ul>
<li>声明函数时，没有指定函数名的函数叫匿名函数</li>
</ul>
</li>
<li><code>匿名函数</code>出现的时机：一般都用在<code>函数内部</code></li>
<li>如果函数只调用一次，那么匿名函数可以是<code>立即执行函数</code><ul>
<li>立即执行函数就是在匿名函数定义后的后面放上括号表示立即执行</li>
</ul>
</li>
<li>注意：<ul>
<li>匿名函数是不指定函数名，但是可以<code>带形参</code>和<code>返回值</code></li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明匿名函数</span></span><br><span class="line">	<span class="comment">// 在函数内部定义</span></span><br><span class="line">	f1 := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">		c := a + b</span><br><span class="line">		<span class="keyword">return</span> c</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	ret := f1(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret: %v\n&quot;</span>, ret)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 如果是执行调用一次，可以定义成立即执行函数</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span> <span class="params">(x, y <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		z := x + y</span><br><span class="line">		fmt.Printf(<span class="string">&quot;z = %v\n&quot;</span>, z)</span><br><span class="line">	&#125;(<span class="number">12</span>,<span class="number">14</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-9-函数闭包"><a href="#1-9-函数闭包" class="headerlink" title="1.9 函数闭包"></a>1.9 函数闭包</h4><blockquote>
<p><code>函数闭包</code>是指：函数与外部变量的引用，就叫闭包</p>
<p>闭包是指当一个函数内部有变量，并且这个函数内部的变量是引用的这个函数外部作用域的一个变量，就是闭包</p>
<p>常见于一个有名函数里包含了一个匿名函数，匿名函数里使用的变量引用的是有名函数定义的变量，如下代码</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := closeBag(<span class="number">3</span>)</span><br><span class="line">	ret() <span class="comment">// tmp匿名函数中x的值: 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">closeBag</span><span class="params">(x <span class="type">int</span>)</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;tmp匿名函数中x的值: %v&quot;</span>, x)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-9-1-类比替换形参为函数类型"><a href="#1-9-1-类比替换形参为函数类型" class="headerlink" title="1.9.1 类比替换形参为函数类型"></a>1.9.1 类比替换形参为函数类型</h5><blockquote>
<p>在作用域概念里，当前函数内部引用变量时，优先在自己的函数内部找，没有找到的话，就在函数外层找</p>
<ul>
<li><p>那么类型到下面的<code>closeBag</code>函数就可以看到：</p>
<ul>
<li><p><code>tmp</code>变量接收一个匿名函数，里面打印一个变量<code>x</code>，这个变量在这个匿名函数里没有，就会往外层找，</p>
</li>
<li><p>可以看到外层函数的形参就是有一个变量<code>x</code>，那么打印的就是这个形参<code>x</code>的值</p>
</li>
<li><p>从返回值可以看到变量<code>tmp</code>的值是匿名函数的<code>指针</code>(内存地址)，并且<code>tmp</code>的类型是<code>func()</code>,是一个函数类型，那么<code>tmp</code>加上括号就在执行这个匿名函数</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	closeBag(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">closeBag</span><span class="params">(x <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;tmp匿名函数: %v&quot;</span>, x)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;tmp值: %v\n&quot;</span>, tmp) <span class="comment">// 0x4965c0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;tmp带类型说明的值:%#v\n&quot;</span>, tmp) <span class="comment">// (func())(0x4965c0)</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 表示在执行tmp这个匿名函数</span></span><br><span class="line">	tmp() <span class="comment">// tmp匿名函数: 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 执行结果:</span></span><br><span class="line"><span class="comment">	tmp值: 0x4965c0</span></span><br><span class="line"><span class="comment">	tmp带类型说明的值:(func())(0x4965c0)</span></span><br><span class="line"><span class="comment">	tmp匿名函数: 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>那么最外层的形参<code>x</code>可以是<code>int</code>类型，<code>x</code>类型替换一下就可以是<code>函数类型</code></p>
<ul>
<li>要传入一个形参是函数类型，就必须先有一个这样的函数，才可以在<code>main</code>函数中进行调用，执行后才可以看到最终的效果<ul>
<li>因为在函数<code>closeBag</code>中传入的函数类型是<code>func(int, int)</code>,那么定义这种类型的函数就是<code>f1</code></li>
<li>另外<code>f1</code>函数需要接收两个<code>int</code>形参，那么在<code>closeBag</code>函数中的<code>tmp</code>匿名函数时就需要将这两个<code>int</code>形参定义</li>
</ul>
</li>
<li>然后执行<code>closeBag</code>函数时，除了需要传入符合的函数类型<code>func(int, int)</code>外，还需要传入两个<code>int</code>变量<code>a和b</code>，因为他内部的<code>x</code>需要接收两个<code>int</code>形参</li>
<li>最后可以看到执行的结果：<ul>
<li>先打印了： <code>f1函数的内部地址:0x496460</code></li>
<li>接着打印了: <code>tmp值: 0x496730</code><ul>
<li>可以看到tmp的内存地址是他自己的匿名函数的内存地址</li>
</ul>
</li>
<li>继续打印： <code>tmp带类型说明的值:(func())(0x496730)</code><ul>
<li>可以看到tmp的类型是<code>func()</code>,表示他是一个匿名函数类型</li>
</ul>
</li>
<li>继续打印： <code>tmp匿名函数中的x: 0x496460</code><ul>
<li>注意看这里的x是<code>tmp</code>匿名函数里传入的变量<code>x</code>,并且这个变量x的值是一个指针(函数内存地址)，该<code>x</code>的值和<code>f1</code>函数的内存地址一致，那就说明<code>x</code>等价于<code>f1</code>,所以执行<code>x(a,b)</code>就等价于执行<code>f1(a,b)</code>函数</li>
</ul>
</li>
<li>继续打印：<code>tmp匿名函数中的x: (func(int, int))(0x496460)</code><ul>
<li>可以看到<code>x</code>的类型是<code>func(int, int)</code>,值是<code>0x496460</code>，和<code>f1</code>函数的内存地址一致</li>
</ul>
</li>
<li>最后打印：<code>4 + 5 = 9</code><ul>
<li>这里就是在执行<code>f1</code>函数里的代码</li>
</ul>
</li>
</ul>
</li>
<li>至此可以看出<code>tmp</code>匿名函数就是闭包，接收外部喊出传入的参数，传入的参数类型可以使基础数据类型，也可以是函数类型</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1函数的内部地址:%v\n&quot;</span>,f1)</span><br><span class="line">	closeBag(f1, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为要传入一个函数类型是: func(int, int)</span></span><br><span class="line"><span class="comment">// 需要先定义一个符合这个类型条件的函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v + %v = %v\n&quot;</span>, a, b, a + b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">closeBag</span><span class="params">(x <span class="keyword">func</span>(<span class="type">int</span>, <span class="type">int</span>)</span></span>, a, b <span class="type">int</span>) &#123;</span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;tmp匿名函数中的x: %v\n&quot;</span>, x)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;tmp匿名函数中的x: %#v\n&quot;</span>, x)</span><br><span class="line">		x(a, b)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;tmp值: %v\n&quot;</span>, tmp)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;tmp带类型说明的值:%#v\n&quot;</span>, tmp)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 执行tmp这个匿名函数</span></span><br><span class="line">	tmp()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：</span></span><br><span class="line"><span class="comment">		f1函数的内部地址:0x496460</span></span><br><span class="line"><span class="comment">        tmp值: 0x496730</span></span><br><span class="line"><span class="comment">        tmp带类型说明的值:(func())(0x496730)</span></span><br><span class="line"><span class="comment">        tmp匿名函数中的x: 0x496460</span></span><br><span class="line"><span class="comment">        tmp匿名函数中的x: (func(int, int))(0x496460)</span></span><br><span class="line"><span class="comment">        4 + 5 = 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="1-9-2-闭包函数分析"><a href="#1-9-2-闭包函数分析" class="headerlink" title="1.9.2 闭包函数分析"></a>1.9.2 闭包函数分析</h5><blockquote>
<p>下面是闭包函数例子的一个分析</p>
</blockquote>
<blockquote>
<ul>
<li>下面的<code>addr</code>函数：<ul>
<li><code>addr</code>函数自身是没有形参，<code>addr</code>函数的返回值是函数类型(<code>func(int) int</code>)，表示返回值的类型是一个函数类型，并且这个函数类型返回值自身是先形参接收一个<code>int</code>变量，然后返回值是一个<code>int</code></li>
<li><code>addr</code>函数内部定义了一个<code>int</code>的<code>x</code>,赋值为<code>100</code></li>
<li>使用变量<code>tmp</code>接收一个带形参以及返回值的匿名函数，最后将<code>tmp</code>值<code>return</code>返回</li>
</ul>
</li>
<li>从<code>addr</code>函数执行结果来看<ul>
<li><code>ret</code>就是<code>tmp</code>，是<code>addr</code>函数内部定义的<code>tmp</code>这个匿名函数的内存地址，并且该匿名函数符合<code>func(int) int</code>函数类型，所以<code>tmp</code>的值是一个函数内存地址</li>
<li>因为<code>ret</code>的值是一个函数的内存地址，当拿到了<code>ret</code>的内存地址，要执行<code>ret</code>函数，那就按<code>ret</code>函数接收形参和返回值的格式输入对应的形参值，就可以得到返回值了</li>
<li>执行<code>ret</code>函数，其实就是在执行<code>tmp</code>函数，相当于执行<code>ret(y int) int</code>,就是在执行&#96;&#96;ret(y int) int<code>这个函数，只需要传入给函数对应的</code>y&#96;参数就可以了</li>
<li>最后因为<code>x</code>是100，<code>y</code>是传入的200，最后<code>addr</code>函数执行结果就是：<code>100 + 200 = 300</code></li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := addr()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法执行 ret的值和类型: %#v\n&quot;</span>, ret)</span><br><span class="line"></span><br><span class="line">	data := ret(<span class="number">200</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;data是:%v\n&quot;</span>, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addr</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="type">int</span></span><br><span class="line">	x = <span class="number">100</span></span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">(y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		x += y <span class="comment">// x += y 等价于 x = x + y</span></span><br><span class="line">		<span class="keyword">return</span> x</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;addr函数内部 tmp的值和类型: %#v\n&quot;</span>, tmp)</span><br><span class="line">	<span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：</span></span><br><span class="line"><span class="comment">		addr函数内部 tmp的值和类型: (func(int) int)(0x496610)</span></span><br><span class="line"><span class="comment">        main方法执行 ret的值和类型: (func(int) int)(0x496610)</span></span><br><span class="line"><span class="comment">        data是:300</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>既然可以在<code>addr</code>里面定义<code>x</code>，那就可以将<code>x</code>提出来，放到<code>addr</code>函数的形参里，这样是把<code>x</code>写活了，可以穿入任意的整数值</p>
<p>再次执行<code>addr</code>函数可以看到执行结果和上面的一样</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := addr(<span class="number">100</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法执行 ret的值和类型: %#v\n&quot;</span>, ret)</span><br><span class="line"></span><br><span class="line">	data := ret(<span class="number">200</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;data是:%v\n&quot;</span>, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addr</span><span class="params">(x <span class="type">int</span>)</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">(y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		x += y <span class="comment">// x += y 等价于 x = x + y</span></span><br><span class="line">		<span class="keyword">return</span> x</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;addr函数内部 tmp的值和类型: %#v\n&quot;</span>, tmp)</span><br><span class="line">	<span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果:</span></span><br><span class="line"><span class="comment">		addr函数内部 tmp的值和类型: (func(int) int)(0x496610)</span></span><br><span class="line"><span class="comment">        main方法执行 ret的值和类型: (func(int) int)(0x496610)</span></span><br><span class="line"><span class="comment">        data是:300</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>既然<code>x</code>可以放到<code>addr</code>函数的形参里，并且类型是<code>int</code>，那么就可以对<code>x</code>类型替换为<code>函数类型</code></p>
<p>分析传入形参是函数类型的<code>addr</code>函数:</p>
<ul>
<li><code>addr</code>函数定义一个类型为<code>func(int, int) int</code>的形参<code>x</code>，表示传入<code>x</code>的类型一定是函数类型，这个函数类型接收两个<code>int</code>参数，并且有一个<code>int</code>类型的返回值</li>
<li><code>x</code>在<code>addr</code>函数内部被匿名函数使用，因为<code>x</code>本身是一个函数，所以在匿名函数内部就可以调用<code>x</code>函数，传入两个<code>int</code>形参，那这两个值就可以通过<code>addr</code>函数传入<ul>
<li>最后tmp返回的是<code>addr</code>函数内部的匿名函数的内存地址，在<code>main</code>函数里执行<code>addr</code>函数得到匿名函数的内存地址<code>ret</code>和<code>addr</code>函数内部<code>temp</code>函数的内存地址一样，并且<code>addr</code>函数内部的匿名函数接收一个<code>int</code>类型类型的形参并且返回一个<code>int</code>类型的值</li>
<li>所以在<code>main</code>函数中就可以给<code>ret</code>继续传入一个<code>int</code>值</li>
</ul>
</li>
<li>最终就将<code>addr</code>执行完毕，注意给<code>x</code>传入函数时一定要符合<code>addr</code>函数中<code>x</code>的类型</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法里的f1函数: %#v\n&quot;</span>, f1) <span class="comment">//  main方法里的f1函数: (func(int, int) int)(0x496570)</span></span><br><span class="line"></span><br><span class="line">	ret := addr(f1, <span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法执行 ret的值和类型: %#v\n&quot;</span>, ret) <span class="comment">// (func(int) int)(0x4966b0)</span></span><br><span class="line"></span><br><span class="line">	data := ret(<span class="number">200</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;data是:%v\n&quot;</span>, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addr</span><span class="params">(x <span class="keyword">func</span>(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">int</span>, a <span class="type">int</span>, b <span class="type">int</span>) <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	tmp := <span class="function"><span class="keyword">func</span><span class="params">(y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;tmp匿名函数中的x: %#v\n&quot;</span>, x) <span class="comment">// tmp匿名函数中的x: (func(int, int) int)(0x496570)</span></span><br><span class="line">		ret := x(a, b) + y</span><br><span class="line">		<span class="keyword">return</span> ret</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;addr函数内部 tmp的值和类型: %#v\n&quot;</span>, tmp) <span class="comment">// (func(int) int)(0x4966b0)</span></span><br><span class="line">	<span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        执行结果:</span></span><br><span class="line"><span class="comment">           main方法里的f1函数: (func(int, int) int)(0x496570)</span></span><br><span class="line"><span class="comment">           addr函数内部 tmp的值和类型: (func(int) int)(0x4966b0)</span></span><br><span class="line"><span class="comment">           main方法执行 ret的值和类型: (func(int) int)(0x4966b0)</span></span><br><span class="line"><span class="comment">           tmp匿名函数中的x: (func(int, int) int)(0x496570)</span></span><br><span class="line"><span class="comment">           data是:500</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="1-9-3-闭包例子"><a href="#1-9-3-闭包例子" class="headerlink" title="1.9.3 闭包例子"></a>1.9.3 闭包例子</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;this is from f1\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	z := x + y</span><br><span class="line">	<span class="keyword">return</span> z </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">(f <span class="keyword">func</span>()</span></span>) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;this is from f1\n&quot;</span>)</span><br><span class="line">	<span class="comment">// 这里执行closeBag返回的匿名函数</span></span><br><span class="line">	f()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">closeBag</span><span class="params">(f <span class="keyword">func</span>(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">int</span>, x <span class="type">int</span>, y <span class="type">int</span>) <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">	temp := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="comment">// 这里会执行符合条件的f2函数</span></span><br><span class="line">		ret := f(x, y)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;ret:%v\n&quot;</span>, ret)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fileSuffixData</span><span class="params">(sufstr <span class="type">string</span>)</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">string</span>)</span></span> <span class="type">string</span>&#123;</span><br><span class="line">	temp := <span class="function"><span class="keyword">func</span><span class="params">(name <span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> ! strings.HasSuffix(name, sufstr) &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;文件不是以%v结尾的\n&quot;</span>, sufstr)</span><br><span class="line">			fmt.Printf(<span class="string">&quot;传入的name:%v \t 传入的sufstr:%v\n&quot;</span>, name, sufstr)</span><br><span class="line">			name = name + sufstr</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;文件是以%v结尾的\n&quot;</span>, sufstr)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> name</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;temp的值:%v\n&quot;</span>, temp)</span><br><span class="line">	<span class="keyword">return</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 直接执行f1函数</span></span><br><span class="line">	f1()</span><br><span class="line">	</span><br><span class="line">	f1 := f1</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1: %v\n&quot;</span>, f1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1: %#v\n&quot;</span>, f1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1的类型: %T\n&quot;</span>, f1) <span class="comment">//func()</span></span><br><span class="line">	</span><br><span class="line">	fmt.Println(<span class="string">&quot;\n\n执行闭包函数！！！！\n&quot;</span>)</span><br><span class="line">	closeBag := closeBag(f2, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;closeBag: %v\n&quot;</span>, closeBag)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;closeBag Type is: %T\n&quot;</span>, closeBag)</span><br><span class="line">	</span><br><span class="line">	f3(closeBag)</span><br><span class="line">	</span><br><span class="line">	jpgSuffix := fileSuffixData(<span class="string">&quot;.jpg&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;jpgSuffix值是:%v\t jpgSuffix的类型是:%T\n&quot;</span>, jpgSuffix, jpgSuffix)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret:%v&quot;</span>, jpgSuffix(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-10-函数传参都是值拷贝"><a href="#1-10-函数传参都是值拷贝" class="headerlink" title="1.10 函数传参都是值拷贝"></a>1.10 函数传参都是值拷贝</h4><blockquote>
<p>函数内部传参都是值拷贝形式</p>
<ul>
<li>从下面代码可以看到<ul>
<li>当给函数<code>f1</code>传入<code>x</code>和在<code>main</code>函数里的<code>x</code>的内存地址不一样</li>
<li>所以函数<code>f1</code>对<code>x</code>的修改只发生在函数内部，退出函数后原来的<code>x</code>值不会变</li>
</ul>
</li>
<li>这就是值拷贝</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	strData <span class="type">string</span></span><br><span class="line">	intData <span class="type">int</span></span><br><span class="line">	boolData <span class="type">bool</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 当传给函数的形参是一个变量时，该变量是值拷贝</span></span><br><span class="line">	x := <span class="number">3</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1函数外传递进来的x的内存地址: %p\n&quot;</span>, &amp;x)</span><br><span class="line">	f1 := f1(x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, f1)             <span class="comment">// 结果是: 4</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1函数外最后x的值是: %v\n&quot;</span>, x) <span class="comment">// 结果是: 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(x <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	<span class="comment">// 函数内传参都是值拷贝，所以函数内x的值变化不会影响函数外x的值</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1函数内传递进来的x的内存地址: %p\n&quot;</span>, &amp;x)</span><br><span class="line">	x += <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-11-defer关键字"><a href="#1-11-defer关键字" class="headerlink" title="1.11 defer关键字"></a>1.11 <code>defer</code>关键字</h4><blockquote>
<ul>
<li>defer主要是用来回收资源</li>
<li>一个函数中有多个defer存在时，是以<code>栈(先进后出)</code>的形式运行，先执行最后一个defer函数，依次反着来</li>
<li><code>defer</code>主要用于延迟执行，清理回收资源等，在遇到defer语句时：<ul>
<li>先将该条defer语句后面的代码存起来，不执行</li>
<li>然后继续往下走，当其他代码都执行完以后，再来执行defer语句的代码</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Printf(<span class="string">&quot;第一个defer\n&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Printf(<span class="string">&quot;第二个defer\n&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Printf(<span class="string">&quot;第三个defer\n&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220104143521838.png" class="" title="image-20220104143521838">

<h5 id="1-11-1-defer执行时机"><a href="#1-11-1-defer执行时机" class="headerlink" title="1.11.1 defer执行时机"></a>1.11.1 defer执行时机</h5><blockquote>
<p>在<code>go</code>语言的函数中，<code>return</code>语句在底层并不是原子操作，它分为返回值赋值和RET指令两步，在函数被调用后最终返回值时按如下步骤：</p>
<ul>
<li>return语句的第一步先给返回值赋值</li>
<li><code>defer</code>语句开始执行</li>
<li>return语句的第二步执行<code>RET</code>指令真正执行返回值</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20240616234157805.png" class="" title="image-20240616234157805">

<blockquote>
<p>return第一步给返回值赋值，那么返回值赋值的变量暂时命名为 retval</p>
</blockquote>
<h5 id="1-11-2-defer例子分析一"><a href="#1-11-2-defer例子分析一" class="headerlink" title="1.11.2 defer例子分析一"></a>1.11.2 defer例子分析一</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f1())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// f1函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	x := <span class="number">5</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++ <span class="comment">// 修改的是x，不是返回值</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>在这个例子中，<code>f1</code>函数的返回值没有被命名，它只是一个<code>int</code>类型的返回值。这意味着在函数内部，返回值没有直接关联的变量名。<ol>
<li>在<code>f1</code>函数内部，变量<code>x</code>被声明并初始化为<code>5</code></li>
<li><code>defer</code>语句中的匿名函数<code>func() &#123; x++ &#125;</code>被注册，它会在函数即将返回之前执行<ul>
<li>由于<code>defer</code>语句的存在，匿名函数<code>func() &#123; x++ &#125;</code>会在函数即将返回之前执行。</li>
<li>在这个匿名函数中，<code>x</code>的值被自增为<code>6</code>。但是，这个操作并不会影响到已经赋值给<code>retval</code>的值，因为<code>retval</code>是一个独立的实体，它只存储了在<code>return</code>语句执行时<code>x</code>的值</li>
<li><code>defer</code>语句中的函数调用修改了变量<code>x</code>的值，但这个修改不会影响到已经赋值给返回值的值，因为返回值是一个独立的实体</li>
</ul>
</li>
<li><code>return x</code> 语句被执行，这会将变量<code>x</code>的值<code>5</code>赋给返回值（我们称之为<code>retval</code>）。<ul>
<li>此时，<code>retval</code>的值是<code>5</code>，并且<code>retval</code>与变量<code>x</code>是两个不同的实体</li>
</ul>
</li>
</ol>
</li>
<li>因此，<code>f1</code>函数return执行RET指令最终返回的值是<code>5</code>，而不是<code>6</code></li>
</ul>
</blockquote>
<h5 id="1-11-3-defer例子分析二"><a href="#1-11-3-defer例子分析二" class="headerlink" title="1.11.3 defer例子分析二"></a>1.11.3 defer例子分析二</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f2())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// f2函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> (x <span class="type">int</span>) &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>f2</code>函数的返回值被命名为<code>x</code>，这意味着Go编译器会为f2函数的返回值创建一个变量<code>x</code>，并且这个变量在整个函数执行期间都是可见的。当使用<code>return</code>语句返回一个值时，这个值会被赋给返回值变量</li>
<li><code>return 5</code> 语句被执行，这会将值<code>5</code>赋给返回值变量<code>x</code>。</li>
<li>由于<code>defer</code>语句的存在，匿名函数<code>func() &#123; x++ &#125;</code>会在函数即将返回之前执行。<ul>
<li>在<code>defer</code>语句执行时，匿名函数捕获了外部变量<code>x</code>的当前值（此时<code>x</code>的值是<code>5</code>），并在函数体内对<code>x</code>进行自增操作，即<code>x++</code>，这会将<code>x</code>的值变为<code>6</code>。</li>
</ul>
</li>
<li>f2函数return执行RET指令返回的是变量<code>x</code>的值，即<code>6</code></li>
</ul>
</blockquote>
<h5 id="1-11-4-defer例子分析三"><a href="#1-11-4-defer例子分析三" class="headerlink" title="1.11.4 defer例子分析三"></a>1.11.4 defer例子分析三</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f3())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">()</span></span> (y <span class="type">int</span>) &#123;</span><br><span class="line">	x := <span class="number">5</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		x++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><p><code>f3</code>函数的返回值被命名为<code>y</code>，这意味着Go编译器会为f3函数的返回值创建一个变量<code>y</code>，并且这个变量在整个函数执行期间都是可见的。当使用<code>return</code>语句返回一个值时，这个值5会被赋给返回值变量</p>
</li>
<li><p>在<code>f3</code>函数内部，变量<code>x</code>被声明并初始化为<code>5</code>。</p>
</li>
<li><p><code>defer</code>语句中的匿名函数<code>func() &#123; x++ &#125;</code>被注册，它会在函数即将返回之前执行。</p>
</li>
<li><p><code>return x</code> 语句被执行，这会将变量<code>x</code>的值<code>5</code>直接赋给命名的返回值变量<code>y</code>。此时，<code>y</code>的值是<code>5</code>。</p>
</li>
<li><p>由于<code>defer</code>语句的存在，匿名函数<code>func() &#123; x++ &#125;</code>会在函数即将返回之前执行。在这个匿名函数中，<code>x</code>的值被自增为<code>6</code>。但是，这个操作并不会影响到已经赋值给<code>y</code>的值，因为<code>y</code>是一个独立的实体，它只存储了在<code>return</code>语句执行时<code>x</code>的值。</p>
</li>
<li><p>因此，<code>f3</code>函数return执行RET指令最终返回的值是<code>5</code>，而不是<code>6</code>，<code>defer</code>语句中的函数调用修改了变量<code>x</code>的值，但这个修改不会影响到已经赋值给返回值<code>y</code>的值，因为返回值是一个独立的实体</p>
</li>
</ul>
</blockquote>
<h5 id="1-11-5-defer例子分析四"><a href="#1-11-5-defer例子分析四" class="headerlink" title="1.11.5 defer例子分析四"></a>1.11.5 defer例子分析四</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f4())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f4</span><span class="params">()</span></span> (x <span class="type">int</span>) &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">		x++</span><br><span class="line">	&#125;(x)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>f4</code>函数的返回值被命名为<code>x</code>，这意味着Go编译器会为f4函数的返回值创建一个变量<code>x</code>，并且这个变量在整个函数执行期间都是可见的。当使用<code>return</code>语句返回一个值时，这个值会被赋给返回值变量</li>
<li><code>return 5</code> 语句被执行，这会将值<code>5</code>赋给返回值变量<code>x</code>。</li>
<li>由于<code>defer</code>语句的存在，匿名函数<code>func() &#123; x++ &#125;</code>会在函数即将返回之前执行。<ul>
<li>在<code>defer</code>语句执行时，匿名函数通过x传参的方式，将外部变量<code>x</code>的当前值（此时<code>x</code>的值是<code>5</code>）传入匿名函数，并在函数体内对<code>x</code>进行自增操作，即<code>x++</code></li>
<li>在匿名函数内部，<code>x</code>的值被自增为<code>6</code>。但是由于go函数中形参传值是值传递，所以自增修改只影响匿名函数内部的<code>x</code>副本，而不会影响到外部函数中的<code>x</code>。</li>
</ul>
</li>
<li>f4函数return执行RET指令返回的是变量<code>x</code>的值，即<code>5</code></li>
</ul>
</blockquote>
<h5 id="1-11-6-defer例子分析五"><a href="#1-11-6-defer例子分析五" class="headerlink" title="1.11.6 defer例子分析五"></a>1.11.6 defer例子分析五</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	b := <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">&quot;10&quot;</span>, a, calc(<span class="string">&quot;10&quot;</span>, a, b))</span><br><span class="line">	a = <span class="number">0</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">&quot;20&quot;</span>, a, calc(<span class="string">&quot;20&quot;</span>, a, b))</span><br><span class="line">	b = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(index <span class="type">string</span>, a, b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">	ret := a + b</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v %#v %#v %#v\n&quot;</span>,index, a, b, ret)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 第一个defer: defer calc(&quot;10&quot;, a, calc(&quot;10&quot;, a, b))</span></span><br><span class="line"><span class="comment">// 先执行defer中的calc函数: calc(&quot;10&quot;, a, b) ==&gt; calc(&quot;10&quot;, 1, 2) =&gt; return得到3，打印 &quot;10&quot;, 1, 2, 3</span></span><br><span class="line"><span class="comment">// 第一个defer就变成了: defer calc(&quot;10&quot;, 1, 3) 此时的defer先不执行存起来</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接着执行第二个defer: defer calc(&quot;20&quot;, a, calc(&quot;20&quot;, a, b))，并且a重新赋值为0, b仍等于2</span></span><br><span class="line"><span class="comment">// 同样先执行第二个defer中的calc函数: calc(&quot;20&quot;, a, b) ==&gt; calc(&quot;20&quot;, 0, 2) ==&gt; return得到2， 打印&quot;20&quot;, 0, 2, 2</span></span><br><span class="line"><span class="comment">// 第二个defer就变成了: defer calc(&quot;20&quot;, 0, 2) 此时的defer也先不执行存起来</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接着继续往下走，将b重新赋值为了1</span></span><br><span class="line"><span class="comment">// 再执行defer语句,有多个defer语句时,逆序执行defer语句代码</span></span><br><span class="line"><span class="comment">// 所以第二个defer语句先执行, defer calc(&quot;20&quot;, 0, 2) ==&gt; 打印&quot;20&quot;, 0, 2, 2</span></span><br><span class="line"><span class="comment">// 接着第二个defer语句执行, defer calc(&quot;10&quot;, 1, 3) ==&gt; 打印&quot;10&quot;, 1, 3, 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最后输出结果就是依次就是</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&quot;10&quot;, 1, 2, 3</span></span><br><span class="line"><span class="comment">&quot;20&quot;, 0, 2, 2</span></span><br><span class="line"><span class="comment">&quot;20&quot;, 0, 2, 2</span></span><br><span class="line"><span class="comment">&quot;10&quot;, 1, 3, 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="1-12-常见内置函数"><a href="#1-12-常见内置函数" class="headerlink" title="1.12 常见内置函数"></a>1.12 常见内置函数</h4><blockquote>
<p>常见的有</p>
<ul>
<li><code>close</code>关闭<code>channel</code></li>
<li><code>len</code>用来求长度，比如<code>string/array/slice/map/channel</code></li>
<li><code>new</code>用来分配内存，主要是分配值类型，比如<code>int/struct</code>，返回的是指针</li>
<li><code>make</code>用来分配内存，只要用来分配引用类型，比如<code>channel/map/slice</code></li>
<li><code>append</code>用来追加元素到数组、切片中</li>
<li><code>panic</code>和<code>recover</code>用来错误处理</li>
</ul>
</blockquote>
<h5 id="1-12-1-panic"><a href="#1-12-1-panic" class="headerlink" title="1.12.1 panic"></a>1.12.1 panic</h5><blockquote>
<p>用来引出错误，类似于<code>python</code>的<code>raise</code>，主动抛出错误，表示程序出现严重错误</p>
<p>比如数据库连接失败</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	panicStu()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panicStu</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;哈哈哈，出错了&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220113232527069.png" class="" title="image-20220113232527069">

<h5 id="1-12-2-recover"><a href="#1-12-2-recover" class="headerlink" title="1.12.2 recover"></a>1.12.2 recover</h5><blockquote>
<p>用来出现错误时，恢复程序</p>
<p>还是少用</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	panicStu()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panicStu</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		err := <span class="built_in">recover</span>()</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;释放数据库连接&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;数据库连接失败&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;outer&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 输出</span></span><br><span class="line"><span class="comment">err: 数据库连接失败</span></span><br><span class="line"><span class="comment">释放数据库连接</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="1-13-fmt-包使用总结"><a href="#1-13-fmt-包使用总结" class="headerlink" title="1.13 fmt 包使用总结"></a>1.13 <code>fmt </code>包使用总结</h4><h5 id="1-13-1-打印方法"><a href="#1-13-1-打印方法" class="headerlink" title="1.13.1 打印方法"></a>1.13.1 打印方法</h5><blockquote>
<p>常见的有三种：</p>
<ul>
<li><code>print</code></li>
<li><code>printf</code></li>
<li><code>println</code></li>
</ul>
<p>常用的fmt包输出格式：</p>
<ul>
<li><code>%v</code>:是万能输出变量的值，任何类型变量都可以输出</li>
<li><code>%#v</code>:输出变量并且与变量的类型</li>
<li><code>%T</code>:查看变量的类型</li>
<li><code>%s</code>:输出字符串</li>
<li><code>%d</code>:输出数字</li>
<li><code>%p</code>:输出内存地址<ul>
<li><code>fmt.Printf(&quot;%p\n&quot;, &amp;name)</code></li>
</ul>
</li>
<li><code>%f</code>:输出浮点值<ul>
<li><code>%.2f</code>：默认宽度，精度为2(就是小数点后面留两位)</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    s1 := <span class="number">100</span></span><br><span class="line">    <span class="comment">// 查看变量的类型</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s1) <span class="comment">// int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查看变量的值，任何类型都可以看</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, s1) <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出整型的值</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, s1) <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将10进制转换为2进制</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%b\n&quot;</span>, s1) <span class="comment">// 1100100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将10进制转换为8进制</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%o\n&quot;</span>, s1) <span class="comment">// 144</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将10进制转换为16进制</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%x\n&quot;</span>, s1) <span class="comment">// 64</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出字符,常用与for循环内输出每个元素值</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, s1)</span><br><span class="line"></span><br><span class="line">    s2 := <span class="string">&quot;bob&quot;</span></span><br><span class="line">    <span class="comment">// 输出字符串的值</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, s2) <span class="comment">// string</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, s2) <span class="comment">// bob</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, s2) <span class="comment">// &quot;bob&quot; 即输出了值，也输出了类型</span></span><br><span class="line">    </span><br><span class="line">    s3 := <span class="number">12.34</span></span><br><span class="line">    <span class="comment">// 输出浮点值</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%f\n&quot;</span>, s3) <span class="comment">// 12.340000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-13-2-获取输入"><a href="#1-13-2-获取输入" class="headerlink" title="1.13.2 获取输入"></a>1.13.2 获取输入</h5><blockquote>
<p><code>fmt</code>包可以获取标准输入，类似于<code>python</code>的<code>input</code>函数</p>
<p>常见的有三种</p>
<ul>
<li><code>fmt.Scan</code> <ul>
<li>会从标准输入扫描文本，读取空白符分隔的值保存到传递给<code>Sacn</code>函数的参数中，换行符为空白符</li>
<li><code>Sacn</code>函数返回成功扫描的数据个数和遇到的任何错误，如果读取的数据个数比提供的参数要，会返回一个错误原因</li>
</ul>
</li>
<li><code>fmt.Scanf</code>用法和<code>Scan</code>一样</li>
<li><code>fmt.Scanln</code>用法和<code>Scan</code>一样</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fmt.Scan代码</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="type">string</span></span><br><span class="line">	v, err := fmt.Scan(&amp;s)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v=%v\n, err=%v\n&quot;</span>, v, err)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;您输入了: %v\n&quot;</span>,s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>fmt.Scan</code>上面代码分析：</p>
<ul>
<li>先定义了一个<code>s</code>变量，<code>s</code>的值是零值(“”)</li>
<li>然后将<code>s</code>的内存地址传给<code>Sacn</code>完成读取<ul>
<li>为什么要传<code>s</code>的内存地址？<ul>
<li>因为<code>Scan</code>会把标准输入获得的值保存到传递给<code>Sacn</code>函数的参数<code>s</code>，如果不传入<code>s</code>的内存地址，而是直接把<code>s</code>传入，那么会直接将<code>s</code>的值输出，而不会进行等待标准输入</li>
<li>只有传入了内存地址，才可以对<code>s</code>的原有值进行重新赋值（保存值），这样最后输出的时候才是我们从标准输入里输入的值</li>
</ul>
</li>
</ul>
</li>
<li>如果不传<code>s</code>的内存地址，就会报下面的错误，可以看到<code>Scan</code>也抛出了<code>string</code>类型不是一个指针</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220114000247128.png" class="" title="image-20220114000247128">

<h5 id="1-13-3-输入有空格问题解决"><a href="#1-13-3-输入有空格问题解决" class="headerlink" title="1.13.3 输入有空格问题解决"></a>1.13.3 输入有空格问题解决</h5><blockquote>
<p>当标准输入的有空白符时，就会在输出时，只展示第一个空白符的前面的内容</p>
<p>为了解决这个问题，可以用bufio包来解决</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/17 22:51</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="type">string</span></span><br><span class="line">	reader := bufio.NewReader(os.Stdin)</span><br><span class="line">	fmt.Print(<span class="string">&quot;请输入内容:&quot;</span>)</span><br><span class="line">	<span class="comment">// 注意这里不需要短变量声明，而是直接用定义的s变量进行接收输入的内容</span></span><br><span class="line">	s, _ = reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;你输入了: %v\n&quot;</span>, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220220213806001.png" class="" title="image-20220220213806001">

<h4 id="1-14-递归函数"><a href="#1-14-递归函数" class="headerlink" title="1.14 递归函数"></a>1.14 递归函数</h4><blockquote>
<p>递归就是函数自己调用自己</p>
<p><code>go</code>语言中的递归</p>
<ul>
<li>递归适合处理问题规模相同，规模越来越小的场景</li>
<li>需要对递归设置退出条件，否则会出现无限循环</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f := jiechen(<span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f:%v\n&quot;</span>, f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阶乘</span></span><br><span class="line"><span class="comment">// 5！ = 5 x 4 x 3 x 2 x 1 = 5 x 4!</span></span><br><span class="line"><span class="comment">// 4！ = 5 x 4 x 3 x 2 x 1 = 4 x 3!</span></span><br><span class="line"><span class="comment">// 3！ = 5 x 4 x 3 x 2 x 1 = 3 x 2!</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">jiechen</span><span class="params">(n <span class="type">uint64</span>)</span></span> <span class="type">uint64</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n &lt;=<span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	ret := n * jiechen(n<span class="number">-1</span>)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-14-1-递归例子"><a href="#1-14-1-递归例子" class="headerlink" title="1.14.1 递归例子"></a>1.14.1 递归例子</h5><blockquote>
<p>上台阶问题</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f := step(<span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f:%v\n&quot;</span>, f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// n个台阶，一次走1步，也可以走2步，有多少走法</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">step</span><span class="params">(n <span class="type">uint64</span>)</span></span> <span class="type">uint64</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">		<span class="comment">// 只有一个台阶</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">2</span> &#123;</span><br><span class="line">		<span class="comment">// 走法1： 一步跨过2个</span></span><br><span class="line">		<span class="comment">// 走法2： 一步一个台阶</span></span><br><span class="line">		<span class="comment">// 总共2种走法</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">	&#125;</span><br><span class="line">	ret := step(n<span class="number">-1</span>) + step(n<span class="number">-2</span>)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-15-练习题"><a href="#1-15-练习题" class="headerlink" title="1.15 练习题"></a>1.15 练习题</h4><blockquote>
<p>统计字符串里中文字符出现的次数</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;unicode&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 判断字符串中汉字的字符数量</span></span><br><span class="line">	<span class="comment">// 思路：</span></span><br><span class="line">	<span class="comment">// 1、拿到字符串的字符</span></span><br><span class="line">	<span class="comment">// 2、判断字符串是否是汉字</span></span><br><span class="line">	<span class="comment">// 3、然后统计中文字符出现的次数</span></span><br><span class="line">	s := <span class="string">&quot;hello新年是新的年&quot;</span></span><br><span class="line">	</span><br><span class="line">	ret := <span class="number">0</span></span><br><span class="line">	<span class="comment">// 1、拿到字符串的字符</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">		<span class="comment">// 2、判断字符串是否是汉字</span></span><br><span class="line">		<span class="keyword">if</span> unicode.Is(unicode.Han, v) &#123;</span><br><span class="line">			ret += <span class="number">1</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;中文字符出现次数:%v\n&quot;</span>, ret) <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="九、结构体"><a href="#九、结构体" class="headerlink" title="九、结构体"></a>九、结构体</h2><h3 id="1、自定义类型"><a href="#1、自定义类型" class="headerlink" title="1、自定义类型"></a>1、自定义类型</h3><blockquote>
<p><code>go</code>语言中可以在内置类型基础上，自定义自己的类型，用<code>type</code>关键字来声明</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义类型格式</span></span><br><span class="line"><span class="keyword">type</span> 自定义类型名 T</span><br><span class="line"></span><br><span class="line">T表示内置的类型，比如<span class="type">int</span>/<span class="type">string</span>/<span class="type">bool</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> myint <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s myint</span><br><span class="line">	s = <span class="number">10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s) <span class="comment">// 10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %T\n&quot;</span>, s) <span class="comment">// main.myint属于main函数里的myint类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、类型别名"><a href="#2、类型别名" class="headerlink" title="2、类型别名"></a>2、类型别名</h3><blockquote>
<p>可以对原有的内置数据类型起一个别名，在函数中可以用类型别名来代替原有类型名</p>
<ul>
<li><p>类型别名只在定义的程序中有效</p>
</li>
<li><p>比如<code>rune</code>就是<code>int32</code>的类型别名，底层里<code>rune</code>用来表示字符</p>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示给int类型起了个名字</span></span><br><span class="line"><span class="keyword">type</span> myint = <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s myint</span><br><span class="line">	s = <span class="number">10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s) <span class="comment">// 10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %T\n&quot;</span>, s) <span class="comment">// 本质还是int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> m <span class="type">rune</span></span><br><span class="line">	m = <span class="string">&#x27;中&#x27;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;m: %v\n&quot;</span>, m) <span class="comment">// 20013</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;m: %T\n&quot;</span>, m) <span class="comment">// 本质还是int32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、结构体"><a href="#3、结构体" class="headerlink" title="3、结构体"></a>3、结构体</h3><blockquote>
<p>在<code>go</code>语言中，基础数据类型只能表示单一的属性，当我们需要表示复杂数据属性时，就显得不够用了，所以<code>go</code>语言中有一个自定义数据类型，可以用来封装多个基础数据类型，这种类型被称为&#96;结构体(struct)，用来表示混合数据类型</p>
<ul>
<li>结构体用来对标其他语言的面向对象<ul>
<li>结构体是一片连续的内存地址</li>
</ul>
<p>	</p>
</li>
<li>结构体类似于其他语言的面向对象编程，有<code>构造函数</code>、<code>方法</code>这种语法</li>
<li>内置的基础数据类型是用来描述一个值的，而结构体是用来描述一组值的<ul>
<li>比如一个人有名字、年龄、兴趣爱好等属性，本质上是一种聚合型的数据类型，就可以用结构体来表示</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用type和struct关键字来定义结构体，具体代码格式如下：</span></span><br><span class="line"><span class="keyword">type</span> 类型名 <span class="keyword">struct</span> &#123;</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    …</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	其中：	</span></span><br><span class="line"><span class="comment">		类型名：标识自定义结构体的名称，在同一个包内不能重复。</span></span><br><span class="line"><span class="comment">		字段名：表示结构体字段名。结构体中的字段名必须唯一。</span></span><br><span class="line"><span class="comment">		字段类型：表示结构体字段的具体类型。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="3-1-结构体定义"><a href="#3-1-结构体定义" class="headerlink" title="3.1 结构体定义"></a>3.1 结构体定义</h4><blockquote>
<p>下面代码就是表示定义一个结构体</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">	hobby []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, person)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ul>
<li>定义好的结构体不能直接打印，会提示不是一个表达式</li>
<li>需要使用给一个变量定义为定义好的结构体类型，再去打印就可以正常展示</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220117183743359.png" class="" title="image-20220117183743359">

<h5 id="3-1-1-同类型字段一行定义"><a href="#3-1-1-同类型字段一行定义" class="headerlink" title="3.1.1 同类型字段一行定义"></a>3.1.1 同类型字段一行定义</h5><blockquote>
<p>结构体定义时，类型一样的多个值可以写在一行，和函数定义多个类型一样的形参一样</p>
<p>比如下面的<code>name</code>,<code>gender</code>都是<code>string</code>类型，所以可以定义在一行</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name, gender <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-1-2-结构体字段默认为零值"><a href="#3-1-2-结构体字段默认为零值" class="headerlink" title="3.1.2 结构体字段默认为零值"></a>3.1.2 结构体字段默认为零值</h5><blockquote>
<p>定义好结构体后：</p>
<ul>
<li>给一个变量指定为定义好的结构体类型，但是没有对该变量进行结构体的初始化，也就是没有给结构体里面的对应字段给值，那么结构体类型里对应字段的值就是字段定义时类型的零值(默认值)</li>
<li>比如下面的p1定义为person类型后，此时p1的类型就是person这个结构体类型了，但是没有对p1，而是直接打印p1<ul>
<li>那么p1的值和类型就是：<code>main.person&#123;name:&quot;&quot;, age:0&#125;</code></li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%#v\n&quot;</span>, p1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%T\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220421171413351.png" class="" title="image-20220421171413351">

<blockquote>
<p>从上面的结果可以看出：</p>
<ul>
<li>p1里的name字段的值为string类型的零值(空字符串)</li>
<li>p1里的age字段的值为int类型的零值(0)</li>
<li>p1的类型就是main包的person结构体类型</li>
</ul>
</blockquote>
<h5 id="3-1-3-某个变量为结构体类型理解"><a href="#3-1-3-某个变量为结构体类型理解" class="headerlink" title="3.1.3 某个变量为结构体类型理解"></a>3.1.3 某个变量为结构体类型理解</h5><blockquote>
<p>当某个变量定义为结构体类型的理解：</p>
<ul>
<li>将某个变量类型指定为结构体类型，可以类比到其他语言中的面向对象知识<ul>
<li>person结构体就是定义了一个类名为<code>person</code>的类，</li>
<li>指定p1这个变量的类型为结构体<code>person</code>时，就是对<code>person</code>这个类的进行了初始化，并且将初始化的结果指向了p1，所以p1也就是<code>person</code>类的实例对象</li>
<li>这个p1实例对象定义为person类型时，就是生成了p1这个实例对象，并且将p1这个对象里的name、age字段自动设置为字段类型的零值，后面可以对字段值重新赋值，重新赋值就是结构体的初始化了</li>
</ul>
</li>
<li>从下面的python的面向对象代码对比过来理解<ul>
<li>对一个变量类型定义为结构体类型，就是在使用这个结构体，也就是将一个变量进行类的实例化，不过是实例化过程中，将结构体定义的字段值默认设置为类型零值</li>
<li>最终变量的类型就是结构体的类型，也就是python里定义的类的类型</li>
<li>从下面代码可以清晰看出来</li>
</ul>
</li>
<li>所以针对结构体的理解，就可以对比面向对象的知识来理解</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下面是python的面向对象，可以类比来理解变量类型为结构体类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;name=<span class="subst">&#123;self.name&#125;</span>, age=<span class="subst">&#123;self.age&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接打印定义好的类Person，返回的值就是:Person = &lt;class &#x27;__main__.Person&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Person = <span class="subst">&#123;Person&#125;</span>&quot;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化一个a1对象，可以理解为是将a1的类型指定为类Person，并且传入两个预设字段name、age，完成类A的初始化</span></span><br><span class="line">a1 = Person(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印a1，可以看到a1的值就是通过类Person初始化的一个对象，并且a1这个变量有实际的内存地址</span></span><br><span class="line"><span class="comment"># a1 = &lt;__main__.Person object at 0x7fa09295a630&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a1 = <span class="subst">&#123;a1&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印a1类型，可以看到a1的类型就是类Person这个类</span></span><br><span class="line"> <span class="comment"># a1 = &lt;class &#x27;__main__.Person&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a1 = <span class="subst">&#123;<span class="built_in">type</span>(a1)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go语言定义结构体</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个person结构体，也就是定义一个名字叫person的类</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// 对变量p1的类型定为person，就表示是在对person类进行初始化，并且将初始化的值给p1</span></span><br><span class="line">  <span class="comment">// 类比到python就是 p1 = person(&quot;&quot;, 0)</span></span><br><span class="line">  <span class="comment">// 传入的是结构体字段类型的零值</span></span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 可以看到p1是person结构体实例对象，并且name是空，age是0</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%#v\n&quot;</span>, p1) <span class="comment">// p1=main.person&#123;name:&quot;&quot;, age:0&#125;</span></span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 可以看到p1的类型就是结构体类型</span></span><br><span class="line">  fmt.Printf(<span class="string">&quot;p1=%T\n&quot;</span>, p1) <span class="comment">// p1=main.person</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>综上：</p>
<ul>
<li>定义一个结构体就是声明了一个类</li>
<li>给一个变量声明了类型为定义的结构体，就是在实例化这个结构体，并且结构体的字段值都是对应类型的零值<ul>
<li><code>var p1 person</code>等价于python面向对象中的<code>a1 = A(&quot;sam&quot;, 19)</code>，表示在实例化对象p1</li>
</ul>
</li>
<li>这个变量的类型就是定义的结构体的类型</li>
</ul>
</blockquote>
<h4 id="3-2-结构体初始化"><a href="#3-2-结构体初始化" class="headerlink" title="3.2 结构体初始化"></a>3.2 结构体初始化</h4><blockquote>
<ol>
<li><code>type 结构体 struct&#123;&#125;</code><ol>
<li>定义结构体，表示声明了一个结构体</li>
</ol>
</li>
<li><code>var s 结构体</code><ol>
<li>表示在实例化这个结构体，并将实例化结果赋值给变量s</li>
<li>此时变量s就可以访问这个结构体的属性和方法了</li>
</ol>
</li>
<li>为什么要对结构体初始化?<ol>
<li>因为指定变量类型为结构体以后，这个变量就是结构体的实例对象，这个变量实例对象里的属性值都是初始零值，零值不是我们需要的</li>
<li>所以需要进行初始化，给实例对象里对应字段指定我们需要的值</li>
</ol>
</li>
</ol>
</blockquote>
<h5 id="3-2-1-key-value初始化-常用"><a href="#3-2-1-key-value初始化-常用" class="headerlink" title="3.2.1 key-value初始化(常用)"></a>3.2.1 key-value初始化(常用)</h5><blockquote>
<p>以key-value进行结构体初始化，类似于python字典的形式来指定结构体字段和值</p>
<ul>
<li>指定p1类型为person结构体，然后p1接收person结构体以key-value初始化，最终p1就是初始化好的结构体</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">  <span class="comment">// 以key-value进行结构体初始化</span></span><br><span class="line">	p1 = person&#123;</span><br><span class="line">		name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">		age: <span class="number">29</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%+#v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	执行结果:</span></span><br><span class="line"><span class="comment">	p1=main.person&#123;name:&quot;sam&quot;, age:29&#125;	</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-2-2-值列表形式初始化"><a href="#3-2-2-值列表形式初始化" class="headerlink" title="3.2.2 值列表形式初始化"></a>3.2.2 值列表形式初始化</h5><blockquote>
<p>值列表形式进行初始化，值的顺序必需要和结构体定义时字段的顺序一致</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">  <span class="comment">// 值列表形式进行初始化，值的顺序必需要和结构体定义时字段的顺序一致</span></span><br><span class="line">	p1 = person&#123;</span><br><span class="line">		<span class="string">&quot;sam&quot;</span>,</span><br><span class="line">		<span class="number">29</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%+#v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	执行结果:</span></span><br><span class="line"><span class="comment">	p1=main.person&#123;name:&quot;sam&quot;, age:29&#125;	</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>值列表初始化结构体的值顺序不能乱写，否则会报错，提示类型不匹配</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">	p1 = person&#123;</span><br><span class="line">		<span class="number">29</span>,</span><br><span class="line">		<span class="string">&quot;sam&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%+#v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220422133536902.png" class="" title="image-20220422133536902">

<h5 id="3-2-3-注意事项"><a href="#3-2-3-注意事项" class="headerlink" title="3.2.3 注意事项"></a>3.2.3 注意事项</h5><blockquote>
<p>key-value初始化和值列表初始化不能混合使用</p>
<p>报错提示：<code>mixture of field:value and value initializers（混合字段:值和值初始化式）</code></p>
<p>结构体初始化除了key-value初始化和值列表初始化，还由比较推荐使用的构造函数初始化，详见3.8</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">	p1 = person&#123;</span><br><span class="line">    <span class="comment">// name是key-value初始化</span></span><br><span class="line">		name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">    <span class="comment">// 单独19是值列表初始化</span></span><br><span class="line">		<span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%+#v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-3-访问结构体定义字段"><a href="#3-3-访问结构体定义字段" class="headerlink" title="3.3 访问结构体定义字段"></a>3.3 访问结构体定义字段</h4><blockquote>
<p>使用点(<code>.</code>)的方式来访问结构体定义的字段</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义结构体</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">	hobby []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p person</span><br><span class="line">	<span class="comment">// 通过字段去赋值</span></span><br><span class="line">	p.name = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	p.age = <span class="number">18</span></span><br><span class="line">	p.hobby = []<span class="type">string</span>&#123;<span class="string">&quot;ft&quot;</span>, <span class="string">&quot;bt&quot;</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, p) <span class="comment">// &#123;sam 18 [ft bt]&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, p) <span class="comment">// main.person</span></span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.age=%v\n&quot;</span>, p.age) <span class="comment">// 18</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.hobby=%v\n&quot;</span>, p.hobby) <span class="comment">// [ft bt]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-匿名结构体"><a href="#3-4-匿名结构体" class="headerlink" title="3.4 匿名结构体"></a>3.4 匿名结构体</h4><blockquote>
<p>没有名字的匿名结构体，需要先声明，再初始化，常用临时场景：</p>
<ul>
<li>只用一次就可以使用匿名结构体</li>
<li>匿名结构体的类型是:<code>struct &#123; name string; age int &#125;</code></li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="keyword">struct</span>&#123;</span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">		age <span class="type">int</span></span><br><span class="line">	&#125;</span><br><span class="line">	s.name = <span class="string">&quot;哈哈&quot;</span></span><br><span class="line">	s.age = <span class="number">1</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s=%v\n&quot;</span>,s) <span class="comment">// &#123;哈哈 1&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s=%T\n&quot;</span>,s) <span class="comment">// struct &#123; name string; age int &#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s.name=%v\n&quot;</span>, s.name) <span class="comment">// 哈哈</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-5-结构体是值类型"><a href="#3-5-结构体是值类型" class="headerlink" title="3.5 结构体是值类型"></a>3.5 结构体是值类型</h4><blockquote>
<p>值类型就是表示是<code>原有值的复制和拷贝</code></p>
<ul>
<li><code>go</code>语言中函数的形参传值都是值拷贝，就是通过形参传进来的值的一个副本，二者的内存地址是不一样的，修改了函数内的变量的值，函数外的值是不会变得</li>
<li>所以想要变化的话，需要传入内存地址，也就是指针，才可以进行修改</li>
</ul>
</blockquote>
<blockquote>
<p>下面代码就可以看到，<code>f1</code>函数里对<code>person</code>类型的结构体的<code>age</code>值重新赋值，但是<code>f1</code>函数外面的<code>p.age</code>和<code>f1</code>函数内的<code>x.age</code>内存地址是不一样的，所以无法进行修改</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(x person)</span></span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x.age=%p\n&quot;</span>, &amp;x.age) <span class="comment">// x.age=0xc00000c058</span></span><br><span class="line">	x.age = <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p person</span><br><span class="line">	p.name = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	p.age = <span class="number">10</span></span><br><span class="line">	f1(p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p=%v\n&quot;</span>, p) <span class="comment">// p=&#123;sam 10&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.age=%v\n&quot;</span>, p.age) <span class="comment">// p.age=10</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.age=%p\n&quot;</span>, &amp;p.age) <span class="comment">// p.age=0xc00000c040</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>所以一定要修改<code>age</code>的值，必须在<code>f1</code>函数x的类型必须是<code>person</code>的指针类型，因为<code>person</code>类型的结构体的内存地址的类型就是<code>*person</code></p>
<ul>
<li><code>f2</code>函数中<code>(*x).age=19</code>：表示根据内存地址找到原始变量，然后修改的就是原始的变量</li>
<li>并且<code>go</code>语言中，有语法糖，所以<code>(*x).age=19</code>也可以写成<code>x.age=19</code>，语法糖会自动根据指针找到对应的变量</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(x person)</span></span>&#123;</span><br><span class="line">	x.age = <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(x *person)</span></span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;x.age addr=%p\n&quot;</span>, &amp;(x.age))</span><br><span class="line">	(*x).age = <span class="number">19</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p person</span><br><span class="line">	p.name = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	p.age = <span class="number">10</span></span><br><span class="line">	f2(&amp;p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p=%v\n&quot;</span>, p) <span class="comment">// p=&#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.age addr=%p\n&quot;</span>, &amp;(p.age)) <span class="comment">// p.age=19</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p.age=%v\n&quot;</span>, p.age) <span class="comment">// p.age=19</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-6-结构体指针"><a href="#3-6-结构体指针" class="headerlink" title="3.6 结构体指针"></a>3.6 结构体指针</h4><h5 id="3-6-1-new关键字创建结构体指针"><a href="#3-6-1-new关键字创建结构体指针" class="headerlink" title="3.6.1 new关键字创建结构体指针"></a>3.6.1 new关键字创建结构体指针</h5><blockquote>
<p>可以通过<code>new</code>关键字对结构体进行实例化，得到的是结构体的地址</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// new返回的是对应类型的指针</span></span><br><span class="line">	<span class="keyword">var</span> p1 = <span class="built_in">new</span>(person)</span><br><span class="line">	p1.name = <span class="string">&quot;age&quot;</span>  <span class="comment">// 这里的p1本写全了应该是(*p1).name = &quot;age&quot;,但是go语言有语法糖，所以可以省略简写: p1.name = &quot;age&quot;</span></span><br><span class="line">	p1.age = <span class="number">12</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1:%#v\n&quot;</span>, p1) <span class="comment">// &amp;main.person&#123;name:&quot;age&quot;, age:12&#125;  这是打印p1变量的类型和他所表示值，但是要真正打印出内存地址，需要使用%p</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1 type:%T\n&quot;</span>, p1) <span class="comment">// *main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1:%p\n&quot;</span>, p1) <span class="comment">// 因为new返回的是对应类型的指针，所以这里p1保存的值就是一个内存地址:0xc000068420</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;p1) <span class="comment">// 这是求出p1变量的内存地址:0xc00009e018</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>指针的存储示意图</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">	a = <span class="number">100</span></span><br><span class="line">	b := &amp;a</span><br><span class="line">	<span class="comment">// a type: int, b type: *int，b的类型是 int类型的指针</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;type a:%T\t type b:%T\n&quot;</span>, a, b)</span><br><span class="line">	<span class="comment">// 将a的十六进制内存地址打印</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;a) <span class="comment">// 0xc000072080表示a的内存地址</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, b) <span class="comment">// b本身的值是0xc000072080，也是a的内存地址</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;b) <span class="comment">// 0xc00009e018表示b的值(0xc000072080)的内存地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220130225728855.png" class="" title="image-20220130225728855">

<h5 id="3-6-2-快速获取结构体指针-常用"><a href="#3-6-2-快速获取结构体指针-常用" class="headerlink" title="3.6.2 快速获取结构体指针(常用)"></a>3.6.2 快速获取结构体指针(常用)</h5><blockquote>
<p>一般在<code>go</code>中，快速获取结构体指针的方式就可以在<code>初始化结构体</code>的时候加一个<code>取址符号(&amp;)</code>,就可以快速获取到结构体的指针</p>
<p>可以看到下面代码就是在初始化定义结构体的时候加了一个取址符号：</p>
<ul>
<li>p1的值就是一个十六进制的内存地址</li>
<li>p1的类型就是对应person类型的指针类型</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// 获取结构体的指针</span></span><br><span class="line">	p1 := &amp;person&#123;</span><br><span class="line">		<span class="string">&quot;sam&quot;</span>,</span><br><span class="line">		<span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, p1) <span class="comment">// 0xc000004480</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, p1) <span class="comment">// *main.person</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-7-结构体在内存是连续的"><a href="#3-7-结构体在内存是连续的" class="headerlink" title="3.7 结构体在内存是连续的"></a>3.7 结构体在内存是连续的</h4><blockquote>
<p>结构体在内存中占用的内存空间是连续的</p>
<p>从下面代码可以看到<code>a、b、c</code>是连续的，<code>d</code>没有连续，这是因为<code>go</code>语言中有内存地址对齐的概念，后面再解释</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> number <span class="keyword">struct</span>&#123;</span><br><span class="line">	a <span class="type">int8</span></span><br><span class="line">	b <span class="type">int8</span></span><br><span class="line">	c <span class="type">int8</span></span><br><span class="line">	d <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := number &#123;</span><br><span class="line">		a: <span class="number">10</span>,</span><br><span class="line">		b: <span class="number">20</span>,</span><br><span class="line">		c: <span class="number">30</span>,</span><br><span class="line">		d: <span class="string">&quot;kim&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;(p1.a)) <span class="comment">// 0xc000068420</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;(p1.b)) <span class="comment">// 0xc000068421</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;(p1.c)) <span class="comment">// 0xc000068422</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%p\n&quot;</span>, &amp;(p1.d)) <span class="comment">// 0xc000068428</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	0xc000068420</span></span><br><span class="line"><span class="comment">    0xc000068421</span></span><br><span class="line"><span class="comment">    0xc000068422</span></span><br><span class="line"><span class="comment">    0xc000068428</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="3-8-结构体构造函数-推荐初始化方式"><a href="#3-8-结构体构造函数-推荐初始化方式" class="headerlink" title="3.8 结构体构造函数(推荐初始化方式)"></a>3.8 结构体构造函数(推荐初始化方式)</h4><blockquote>
<p>结构体初始化的时候，除了可以使用变量初始化，也可以使用函数初始化，这个函数就是构造函数，在其他语言里有这个内置的函数，比如python面向对象的<code>__init__</code>方法</p>
<ol>
<li>构造函数返回一个结构体变量的函数</li>
<li>构造函数的存在就是为了简化结构体初始化过程，将重复要写的一些代码简化，通过函数来实现结构体初始化</li>
<li>核心思想：调用构造函数时，可以立刻返回一个定义好的结构体类型的变量</li>
<li>构造函数一般是以<code>new和结构体变量首字母大写</code>的函数，返回的也是结构体变量</li>
</ol>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// person结构体构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> person&#123;</span><br><span class="line">	<span class="keyword">return</span> person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-8-1-构造函数返回结构体指针"><a href="#3-8-1-构造函数返回结构体指针" class="headerlink" title="3.8.1 构造函数返回结构体指针"></a>3.8.1 构造函数返回结构体指针</h5><blockquote>
<ol>
<li>构造函数什么时候返回结构体变量？<ul>
<li>当结构体定义的字段个数比较少的时候后，可以考虑在构造函数返回结构体变量</li>
</ul>
</li>
<li>构造函数为什么要返回结构体指针？<ul>
<li>因为结构体属于值类型，就是赋值和传参的时候都是值拷贝</li>
<li>当定义的结构体字段比较多的时候，结构体本身占用的内存资源就比较多，如果构造函数使用值拷贝的形式，在使用构造函数进行初始化结构体的时候，就会出现结构体会拷贝较多份，额外的占用内存资源</li>
<li>所以为了减少内存资源占用，推荐在构造函数返回结构体指针</li>
<li>因为返回结构体指针，其实就是是返回了一个十六进制的数，对一个十六进制的数来回使用，就不会有很大的内存占用</li>
</ul>
</li>
<li>构造函数什么时候要返回结构体指针？<ul>
<li>当结构体定义的字段数量比较多的时候，推荐使用构造函数返回结构体指</li>
</ul>
</li>
</ol>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> *person&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 直接打印p1：&amp;&#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;直接打印p1：%v\n&quot;</span>, p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1的类型：*main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1的类型：%T\n&quot;</span>, p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1的内存地址：0xc00000c030</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1的内存地址：%p\n&quot;</span>, p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1原本的值：&#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1原本的值：%v\n&quot;</span>, (*p1))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：</p>
<ol>
<li>构造函数返回类型为结构体指针时，初始化的实例变量<code>p1</code>的值就是<code>person</code>结构体的指针<ol>
<li>可以看到打印<code>p1</code>的类型就是<code>*main.person</code>类型的指针</li>
<li>既然p1是指针，那么就可以通过<code>%p</code>读取到p1的内存地址值</li>
<li>并且可以通过<code>*p1</code>拿到<code>p1</code>这个内存地址对应的原始值：{sam 19}</li>
</ol>
</li>
<li>从上面看出，当构造函数返回指针类型时，初始化的变量本身就是结构体的指针类型</li>
</ol>
</blockquote>
<h5 id="3-8-2-结构体指针访问成员变量"><a href="#3-8-2-结构体指针访问成员变量" class="headerlink" title="3.8.2 结构体指针访问成员变量"></a>3.8.2 结构体指针访问成员变量</h5><blockquote>
<p>从3.8.1可以看到构造函数返回指针类型时，初始化的变量本身就是结构体的指针类型，那么访问该结构体实例对象的成员变量时：</p>
<ul>
<li>需要带<code>(*p1).name</code>，表示通过p1先拿到p1这个内存地址对应的实际的结构体的值，再来访问<code>p1</code>结构体里的name字段</li>
<li>不过go语言中做了优化<ul>
<li>在Go语言中支持对结构体指针直接使用(<code>.</code>)来访问结构体的成员，而不需要显式的加<code>*</code>来获取到指针指向的原始值，再来调用成员变量</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> *person&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1原本的值：&#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1原本的值：%v\n&quot;</span>, (*p1))</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 原始值访问成员变量</span></span><br><span class="line">	<span class="comment">// p1.name原本的值：sam</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1.name原本的值：%v\n&quot;</span>, (*p1).name)</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 指针访问成员变量</span></span><br><span class="line">	<span class="comment">// p1.name的值：sam</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1.name的值：%v\n&quot;</span>, p1.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-9-方法和接收者"><a href="#3-9-方法和接收者" class="headerlink" title="3.9 方法和接收者"></a>3.9 方法和接收者</h4><blockquote>
<p>结构体里的方法对标的是其他语言中面向对象的方法，比如<code>python</code>面向对象里的方法</p>
<ul>
<li><p>方法是作用于特定类型的函数</p>
<ul>
<li>特定类型就是需要限定类型，限定的类型就是我们定义的结构体类型</li>
</ul>
</li>
<li><p>接收者是调用该方法的具体类型变量，多用类型名首字母小写</p>
</li>
</ul>
<p>下面代码里的<code>方法(p person)就是接收者</code>,<code>p</code>就是表示接收者，表示传入的是结构体对象，一般是用定义的结构体的首字母来作为形参</p>
</blockquote>
<blockquote>
<p>格式：</p>
<p>func (结构体首字母 结构体类型) 函数名(参1，参2){</p>
<p>}</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> person&#123;</span><br><span class="line">	<span class="keyword">return</span> person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法walk，(p person)就是接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span></span> walk() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s年龄是%d岁\n&quot;</span>, p.name, p.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%v\n&quot;</span>, p1)</span><br><span class="line">	p1.walk()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-9-1-值接收者"><a href="#3-9-1-值接收者" class="headerlink" title="3.9.1 值接收者"></a>3.9.1 值接收者</h5><blockquote>
<p>结构体方法里的接收者如果是值类型时</p>
<ul>
<li>表示接受者是以拷贝的形式传进到方法里，那么方法里的接受者(初始化时得到的结构体对象)是一个拷贝的对象<ul>
<li><code>拷贝的是实例化的结构体对象</code></li>
</ul>
</li>
<li>即使在方法里对结构体对象的某个属性进行了修改，但是这个结构体本身的这个属性是不会变化的，因为值接收者就是复制拷贝，值拷贝的内存地址是完全不一样</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> person &#123;</span><br><span class="line">	<span class="keyword">return</span> person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p person)</span></span> newYear() &#123;</span><br><span class="line">	<span class="comment">// p1在newYear方法的内存地址：0xc000118030</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1在newYear方法的内存地址：%p\n&quot;</span>, &amp;p)</span><br><span class="line">	p.age += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 初始化结构体得到p1对象</span></span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1的值: &#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1的值: %v\n&quot;</span>, p1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// p1在初始化后的内存地址: 0xc000118000</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1在初始化后的内存地址: %p\n&quot;</span>, &amp;p1)</span><br><span class="line"></span><br><span class="line">	p1.newYear()</span><br><span class="line">	<span class="comment">// 过了一年, p1.age:19</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;过了一年, p1.age: %v\n&quot;</span>, p1.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码可以看出：</p>
<ul>
<li>p1通过构造函数创建了<code>person</code>这个结构体的实例对象<ul>
<li>在初始化后的内存地址:<code>0xc000118000</code></li>
<li>在<code>person</code>结构体的<code>newYear</code>方法里，传进入<code>p</code>的内存地址是:<code>0xc000118030</code>，二者内存地址明显不一样</li>
<li>所以在<code>newYear</code>方法里对<code>age</code>字段修改，相当于是修改的<code>p1</code>的副本里的<code>age</code>字段，所以实际上并没有修改成功</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-9-2-指针接收者"><a href="#3-9-2-指针接收者" class="headerlink" title="3.9.2 指针接收者"></a>3.9.2 指针接收者</h5><blockquote>
<p>在值接收者里，对应方法修改了结构体对象的某个值，因为值拷贝的原因，还是不会进行变化，那么如果真要修改，就要用到了指针接收者</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> *person &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;person&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *person)</span></span> newYear() &#123;</span><br><span class="line">	<span class="comment">// p1在newYear方法的内存地址：0xc00000c030</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1在newYear方法的内存地址：%p\n&quot;</span>, p)</span><br><span class="line">	p.age += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 初始化结构体得到p1对象</span></span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// p1的值是person实例化后的指针</span></span><br><span class="line">	<span class="comment">// p1的值: &amp;&#123;sam 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1的值: %v\n&quot;</span>, p1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// p1的内存地址值: 0xc00000c030</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1的内存地址值: %p\n&quot;</span>, p1)</span><br><span class="line">	</span><br><span class="line">	p1.newYear()</span><br><span class="line">	<span class="comment">// 过了一年, p1.age: 20</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;过了一年, p1.age: %v\n&quot;</span>, p1.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码可以看出：</p>
<ul>
<li>person的构造函数返回是person的指针类型<ul>
<li>p1自身的值是<code>&amp;&#123;sam 19&#125;</code>,表示是结构体指针类型</li>
<li>那么<code>%p</code>就可以打印出<code>p1</code>的内存地址值</li>
</ul>
</li>
<li>在person结构体的<code>newYear</code>方法里<ul>
<li>拿到<code>p</code>的内存地址也是和<code>p1</code>一样，那就表示将<code>p1</code>传进到了<code>newYear</code>这个方法里</li>
<li>那么执行<code>p.age += 1</code>，就表示在修改<code>p1.age =+ 1</code>，那就实现了通过结构体方法修改成员变量值的效果</li>
</ul>
</li>
<li>从这里看出，使用指针结构体可以实现对成员变量的修改，后面使用的场景会很多，所以推荐使用指针结构体</li>
</ul>
</blockquote>
<h4 id="3-10-自定义类型加方法"><a href="#3-10-自定义类型加方法" class="headerlink" title="3.10 自定义类型加方法"></a>3.10 自定义类型加方法</h4><blockquote>
<p>方法只能给自定义的类型加方法，比如想给基础类型<code>int</code>加一个方法，就需要先创建一个属于自己的<code>myint</code>类型，然后对这个类型加方法</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> myInt <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m myInt)</span></span> hello() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;this is buildt int func&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    m := myInt(<span class="number">12</span>) <span class="comment">// 这里myInt(12)表示是强制类型转换</span></span><br><span class="line">	m.hello()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-11-结构体匿名字段"><a href="#3-11-结构体匿名字段" class="headerlink" title="3.11 结构体匿名字段"></a>3.11 结构体匿名字段</h4><blockquote>
<p>在定义结构体时只定义变量类型，不写变量名</p>
<p>使用值列表的形式初始化结构体</p>
<p>这种情况容易出现不知字段的用途，所以用的较少</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只声明字段类型，不声明字段名，表示匿名结构体</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="type">string</span></span><br><span class="line">	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用值列表的形式初始化结构体</span></span><br><span class="line">	p1 := person&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>,</span><br><span class="line">		<span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// &#123;name 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%v\n&quot;</span>, p1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3-12-结构体嵌套"><a href="#3-12-结构体嵌套" class="headerlink" title="3.12 结构体嵌套"></a>3.12 结构体嵌套</h4><h5 id="3-12-1-显式嵌套结构体"><a href="#3-12-1-显式嵌套结构体" class="headerlink" title="3.12.1 显式嵌套结构体"></a>3.12.1 显式嵌套结构体</h5><blockquote>
<p>结构体里可以再嵌套另一个结构体，这样的结构体称作结构体嵌套</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 结构体嵌套</span></span><br><span class="line"><span class="comment">// 被嵌套结构体</span></span><br><span class="line"><span class="keyword">type</span> 结构体<span class="number">1</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">  var1 <span class="type">string</span></span><br><span class="line">  var2 strint</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套结构体，将结构体1嵌套到结构体2中</span></span><br><span class="line"><span class="keyword">type</span> 结构体<span class="number">2</span> <span class="keyword">struct</span>&#123;</span><br><span class="line">  var3 <span class="type">string</span></span><br><span class="line">  var4 结构体<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例化结构体2，访问var1，下面是伪代码</span></span><br><span class="line"><span class="comment">// 通过结构体2找到结构体1，再访问结构体1里的var1字段</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;var1的值:%v\n&quot;</span>, 结构体<span class="number">2.</span>var4.var1)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要被嵌套的结构体</span></span><br><span class="line"><span class="keyword">type</span> specs <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 衣服结构体。里面嵌套了一个specs这个结构体</span></span><br><span class="line"><span class="keyword">type</span> clothes <span class="keyword">struct</span>&#123;</span><br><span class="line">	name	<span class="type">string</span></span><br><span class="line">	price	<span class="type">int</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 嵌套了specs结构体</span></span><br><span class="line">	specs	specs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 汽车结构体，里面嵌套了一个specs这个结构体</span></span><br><span class="line"><span class="keyword">type</span> car <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	price 	<span class="type">int</span></span><br><span class="line">	specs 	specs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newClothes</span><span class="params">(name, color, size <span class="type">string</span>, price <span class="type">int</span>)</span></span> clothes&#123;</span><br><span class="line">	<span class="keyword">return</span> clothes&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		price: price,</span><br><span class="line">		specs: specs&#123;</span><br><span class="line">			color: color,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newCar</span><span class="params">(name, color, size <span class="type">string</span>, price <span class="type">int</span>)</span></span> car &#123;</span><br><span class="line">	<span class="keyword">return</span> car&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		price: price,</span><br><span class="line">		specs: specs&#123;</span><br><span class="line">			color: color,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *clothes)</span></span> wear(userName <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s is wear %s\n&quot;</span>, userName, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *car)</span></span> drive(userName <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s drive a %s\n&quot;</span>, userName, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := newClothes(<span class="string">&quot;NaKe&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;XL&quot;</span>, <span class="number">33</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c1=&#123;NaKe 33 &#123;red XL&#125;&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1=%v\n&quot;</span>, c1)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c1.name=NaKe</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.name=%v\n&quot;</span>, c1.name)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c1.price=33</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.price=%v\n&quot;</span>, c1.price)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c1.specs.color=red</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.specs.color=%v\n&quot;</span>, c1.specs.color)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c1.specs.size=XL</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.specs.size=%v\n&quot;</span>, c1.specs.size)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// jason is wear NaKe</span></span><br><span class="line">	c1.wear(<span class="string">&quot;jason&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	fmt.Println()</span><br><span class="line">	</span><br><span class="line">	c2 := newCar(<span class="string">&quot;BMW&quot;</span>, <span class="string">&quot;pink&quot;</span>, <span class="string">&quot;2HX&quot;</span>, <span class="number">1999999</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c2=&#123;BMW 1999999 &#123;pink 2HX&#125;&#125; </span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2=%v\n&quot;</span>, c2)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//c2.name=BMW</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.name=%v\n&quot;</span>, c2.name)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c2.price=1999999</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.price=%v\n&quot;</span>, c2.price)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c2.specs.color=pink</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.specs.color=%v\n&quot;</span>, c2.specs.color)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// c2.specs.size=2HX</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.specs.size=%v\n&quot;</span>, c2.specs.size)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// sam drive a BMW</span></span><br><span class="line">	c2.drive(<span class="string">&quot;sam&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>代码分析</p>
<ul>
<li><code>specs</code>结构体是一个公共结构体，用来表示其他结构体都包含它的所有属性</li>
<li><code>clothes</code>结构体，里面嵌套了一个<code>specs</code>这个结构体，并且起了个变量名叫<code>specs</code></li>
<li><code>car</code>结构体，里面嵌套了一个<code>specs</code>这个结构体，并且起了个变量名叫<code>specs</code></li>
<li>对<code>clothes</code>结构体写构造函数，需要对<code>clothes</code>里的<code>specs</code>结构体进行初始化赋值，通过<code>newClothes</code>传入的形参值进行传入，最终将<code>clothes</code>结构体返回，同理<code>car</code>结构体也是一样的</li>
<li>通过<code>clothes</code>结构体的构造函数初始化了一个<code>c1</code>变量，传入了<code>name</code>、<code>price</code>、<code>color</code>、<code>size</code>变量以后，就可以对<code>c1</code>进行属性访问了<ul>
<li>需要访问<code>c1</code>的<code>color</code>属性，不能直接<code>c1.color</code>，这样是找不到的，会提示报错：<code> c1.color undefined (type clothes has no field or method color)</code><ul>
<li>因为<code>c1</code>本身是没有<code>color</code>属性的，<code>c1</code>的<code>color</code>属性在<code>specs</code>这个结构体里</li>
<li>所以需要<code>c1.specs.color</code>这样一级一级去找，<code>c1.specs.color</code>里的<code>specs</code>是<code>clothes</code>结构体里定义的<code>specs</code>这个变量名，不是<code>specs</code>这个结构体类型</li>
</ul>
</li>
<li>这样去访问嵌套结构体里的属性是比较清晰明了</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-12-2-匿名嵌套结构体"><a href="#3-12-2-匿名嵌套结构体" class="headerlink" title="3.12.2 匿名嵌套结构体"></a>3.12.2 匿名嵌套结构体</h5><blockquote>
<p>上面访问嵌套结构体时，不能直接通过<code>c1.color</code>进行访问<code>color</code>属性</p>
<p>如果直接通过c1.color进行访问color属性，需要对<code>clothes</code>里的嵌套结构体改造成<code>匿名嵌套结构体</code></p>
<p><code>匿名嵌套结构体</code>：</p>
<ul>
<li>嵌套结构体里对于被嵌套的结构体，不显式的写一个变量名，而是直接写该被嵌套的结构体</li>
<li>那么在构造函数时，类比到结构体匿名字段，那么这个被嵌套结构体的变量名就是它自己的名字，因为没有给名字，所以用的是自己的名字</li>
<li>那么这样定义的嵌套结构体的好处<ul>
<li>可以通过<code>c1.color</code>进行直接访问被嵌套的结构体的<code>color</code>属性，这样更加方便</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名嵌套结构体 </span></span><br><span class="line"><span class="keyword">type</span> specs <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> clothes <span class="keyword">struct</span>&#123;</span><br><span class="line">	name	<span class="type">string</span></span><br><span class="line">	price	<span class="type">int</span></span><br><span class="line">  <span class="comment">// 匿名嵌套结构体，不写嵌套体的变量名</span></span><br><span class="line">  <span class="comment">// 等价于： specs specs表示是简写</span></span><br><span class="line">	specs </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> specs <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> clothes <span class="keyword">struct</span>&#123;</span><br><span class="line">	name	<span class="type">string</span></span><br><span class="line">	price	<span class="type">int</span></span><br><span class="line">	specs <span class="comment">// 匿名嵌套结构体，不写嵌套体的变量名</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> car <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	price 	<span class="type">int</span></span><br><span class="line">	specs <span class="comment">// 嵌套结构体specs，不写嵌套体的变量名，表示匿名嵌套</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newClothes</span><span class="params">(name, color, size <span class="type">string</span>, price <span class="type">int</span>)</span></span> clothes&#123;</span><br><span class="line">	<span class="keyword">return</span> clothes&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		price: price,</span><br><span class="line">		<span class="comment">// 冒号前面的specs就是specs这个结构体的名字，因为是匿名嵌套结构体来的，使用了该结构体的名字作为变量名</span></span><br><span class="line">		specs: specs&#123;</span><br><span class="line">			color: color,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newCar</span><span class="params">(name, color, size <span class="type">string</span>, price <span class="type">int</span>)</span></span> car &#123;</span><br><span class="line">	<span class="keyword">return</span> car&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		price: price,</span><br><span class="line">		specs: specs&#123;</span><br><span class="line">			color: color,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *clothes)</span></span> wear(userName <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s is wear %s\n&quot;</span>, userName, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *car)</span></span> drive(userName <span class="type">string</span>) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s drive a %s\n&quot;</span>, userName, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := newClothes(<span class="string">&quot;NaKe&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;XL&quot;</span>, <span class="number">33</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1=&#123;NaKe 33 &#123;red XL&#125;&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1=%v\n&quot;</span>, c1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.name=NaKe</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.name=%v\n&quot;</span>, c1.name)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.price=33</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.price=%v\n&quot;</span>, c1.price)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 直接使用c1.color、c1.size进行访问嵌套结构体里的属性</span></span><br><span class="line">	<span class="comment">// c1.color=red</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.color=%v\n&quot;</span>, c1.color)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.size=XL</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.size=%v\n&quot;</span>, c1.size)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// jason is wear NaKe</span></span><br><span class="line">	c1.wear(<span class="string">&quot;jason&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 第二个例子</span></span><br><span class="line">	c2 := newCar(<span class="string">&quot;BMW&quot;</span>, <span class="string">&quot;pink&quot;</span>, <span class="string">&quot;2HX&quot;</span>, <span class="number">1999999</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c2=&#123;BMW 1999999 &#123;pink 2HX&#125;&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2=%v\n&quot;</span>, c2)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c2.name=BMW</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.name=%v\n&quot;</span>, c2.name)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c2.price=1999999</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.price=%v\n&quot;</span>, c2.price)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 直接使用c2.color、c2.size进行访问嵌套结构体里的属性</span></span><br><span class="line">	<span class="comment">// c2.color=pink</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.color=%v\n&quot;</span>, c2.color)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// c2.size=2HX</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c2.size=%v\n&quot;</span>, c2.size)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// sam drive a BMW</span></span><br><span class="line">	c2.drive(<span class="string">&quot;sam&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-12-3-匿名嵌套结构体字段冲突"><a href="#3-12-3-匿名嵌套结构体字段冲突" class="headerlink" title="3.12.3 匿名嵌套结构体字段冲突"></a>3.12.3 匿名嵌套结构体字段冲突</h5><blockquote>
<p>如果被嵌套的结构体里有多个相同的字段，那么访问就出现匿名嵌套结构体冲突</p>
<ul>
<li>那么就需要按嵌套的结构体一层一层去找</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> carBody <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> carInside <span class="keyword">struct</span>&#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">	siteNum <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> car <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	carBody</span><br><span class="line">	carInside</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// car的字段比较多，所以返回结构体指针</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newCar</span><span class="params">(name <span class="type">string</span>, bodyColor <span class="type">string</span>, size <span class="type">int</span>, insideColor <span class="type">string</span>, siteNum <span class="type">int</span>)</span></span> *car&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;car&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		carBody: carBody&#123;</span><br><span class="line">			color: bodyColor,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">		carInside: carInside&#123;</span><br><span class="line">			color: insideColor,</span><br><span class="line">			siteNum: siteNum,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := newCar(<span class="string">&quot;BMW&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="number">199</span>, <span class="string">&quot;black&quot;</span>, <span class="number">4</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1=%p\n&quot;</span>, c1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1=%v\n&quot;</span>, *c1)</span><br><span class="line">	</span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.color==&gt; %v\n&quot;</span>, c1.color)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面代码的car结构体匿名嵌套了结构体<code>carBody</code>和<code>carInside</code>，并且结构体<code>carBody</code>和<code>carInside</code>都有一个相同字段叫<code>color</code></p>
<p>那么实例化car结构体后赋值给c1，c1直接访问<code>color</code>字段就会报错: </p>
<ul>
<li>报错信息：<code>ambiguous selector c1.color</code>表示是模糊的选择器<code>c1.color</code></li>
<li>因为c1里有两个冲突的<code>color</code>字段，此时访问就不知道该访问哪个，就会报错</li>
</ul>
</blockquote>
<blockquote>
<p>如何解决呢？</p>
<ul>
<li>那就和显式嵌套结构体一样，一层一层的写结构体字段调用</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> carBody <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> carInside <span class="keyword">struct</span>&#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">	siteNum <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> car <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	carBody</span><br><span class="line">	carInside</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// car的字段比较多，所以返回结构体指针</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newCar</span><span class="params">(name <span class="type">string</span>, bodyColor <span class="type">string</span>, size <span class="type">int</span>, insideColor <span class="type">string</span>, siteNum <span class="type">int</span>)</span></span> *car&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;car&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		carBody: carBody&#123;</span><br><span class="line">			color: bodyColor,</span><br><span class="line">			size: size,</span><br><span class="line">		&#125;,</span><br><span class="line">		carInside: carInside&#123;</span><br><span class="line">			color: insideColor,</span><br><span class="line">			siteNum: siteNum,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := newCar(<span class="string">&quot;BMW&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="number">199</span>, <span class="string">&quot;black&quot;</span>, <span class="number">4</span>)</span><br><span class="line">	<span class="comment">// c1.carBody.color==&gt; red</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.carBody.color==&gt; %v\n&quot;</span>, c1.carBody.color)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.carInside.color==&gt; black</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.carInside.color==&gt; %v\n&quot;</span>, c1.carInside.color)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-12-4-嵌套结构体是指针类型"><a href="#3-12-4-嵌套结构体是指针类型" class="headerlink" title="3.12.4 嵌套结构体是指针类型"></a>3.12.4 嵌套结构体是指针类型</h5><blockquote>
<p>被嵌套的结构体指定为指针类型</p>
<ul>
<li>当被嵌套的结构体自身定义的字段比较多，还需要被嵌套，可以在嵌套的时候传入指针类型</li>
<li>访问嵌套的指针结构体，也可以直接去访问</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> carBody <span class="keyword">struct</span>&#123;</span><br><span class="line">	color	<span class="type">string</span></span><br><span class="line">	size	<span class="type">int</span></span><br><span class="line">	carType <span class="type">string</span></span><br><span class="line">	carAddr <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> car <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	*carBody</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// car的字段比较多，所以返回结构体指针</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newCar</span><span class="params">(name <span class="type">string</span>, color <span class="type">string</span>, size <span class="type">int</span>, carType, carAddr <span class="type">string</span>)</span></span> *car&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;car&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		carBody: &amp;carBody&#123;</span><br><span class="line">			color: color,</span><br><span class="line">			size: size,</span><br><span class="line">			carType: carType,</span><br><span class="line">			carAddr: carAddr,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c1 := newCar(<span class="string">&quot;BMW&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="number">199</span>, <span class="string">&quot;SUV_Car&quot;</span>, <span class="string">&quot;Germen&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1自身的值：&amp;&#123;BMW 0xc000024080&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1自身的值：%v\n&quot;</span>, c1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1内存地址指向的值：&amp;&#123;BMW 0xc000024080&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1内存地址指向的值：%v\n&quot;</span>, c1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1的类型：*main.car</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1的类型：%T\n&quot;</span>, c1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.color：red</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.color：%v\n&quot;</span>, c1.color)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// c1.carAddr：Germen</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;c1.carAddr：%v\n&quot;</span>, c1.carAddr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-12-5-嵌套结构体注意事项"><a href="#3-12-5-嵌套结构体注意事项" class="headerlink" title="3.12.5 嵌套结构体注意事项"></a>3.12.5 嵌套结构体注意事项</h5><blockquote>
<p>嵌套结构体写构造函数：</p>
<ul>
<li>需要将结构自身的字段和被嵌套的结构体的字段完全写全</li>
</ul>
<p>嵌套结构体查找属性：</p>
<ul>
<li>嵌套结构体查找属性时，先从自己内部的属性字典里去找，找不到再去嵌套结构体里找，这样一层一层去找元素</li>
</ul>
<p>匿名嵌套结构体使用场景：</p>
<ul>
<li>多适用于只有一个嵌套结构体</li>
</ul>
<p>显式嵌套结构体：</p>
<ul>
<li>当有多个嵌套结构体时，建议还是对嵌套的结构体写不同的变量名</li>
<li>并且在访问时一级一级的去写访问属性，如<code>c1.specs.color</code>，这样更清晰</li>
</ul>
<p>显式嵌套结构体和匿名嵌套结构体该用哪一种？</p>
<ul>
<li>这个看自身习惯，不过个人比较喜欢使用匿名嵌套结构体</li>
<li>这样在定义时不需要对嵌套结构体多写额外得字段名，直接用嵌套的结构体名字作为字段名即可</li>
<li>如果遇到结构体字段冲突，那就老老实实一级一级去写，这样不会出错，但是又和显示嵌套结构体访问字段方式一样了，</li>
<li>那用哪种嵌套结构体就仁者见仁智者见智了</li>
</ul>
</blockquote>
<h4 id="3-13-结构体模拟继承"><a href="#3-13-结构体模拟继承" class="headerlink" title="3.13 结构体模拟继承"></a>3.13 结构体模拟继承</h4><blockquote>
<p><code>go</code>本身是没有继承的，但是用结构体可以来模拟继承</p>
<p>继承：</p>
<ul>
<li>在其他语言中，有一个父类，然后有一个子类，子类可以继承父类的属性和方法</li>
<li>在<code>go</code>语言中可以使用结构体嵌套来模拟继承，当一个结构体A嵌套了结构体B，那么这个结构体A就拥有了结构体B的所有属性和方法，也就实现了模拟继承</li>
</ul>
<p>如下代码：</p>
<ul>
<li><code>father</code>结构体类比为一个父类，<code>son</code>结构体类比为一个子类，<code>father</code>结构体有个<code>house</code>方法</li>
<li><code>son</code>结构体中嵌套了<code>father</code>结构体，那么就拥有了<code>father</code>结构体的所有属性和方法，<code>son</code>结构体就可以进行访问<code>father</code>结构体的<code>house</code>方法和<code>name</code>属性</li>
<li>从执行结果里可以看到<code>s1=main.son&#123;age:19, father:main.father&#123;name:&quot;hupe&quot;&#125;&#125;</code>，就说明了<code>s1</code>结构体里嵌套的<code>father</code>结构体，那么就可以访问<code>father</code>结构体的所有的属性和方法</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// father结构体</span></span><br><span class="line"><span class="keyword">type</span> father <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// father的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newFather</span><span class="params">(name <span class="type">string</span>)</span></span> father&#123;</span><br><span class="line">	<span class="keyword">return</span> father&#123;</span><br><span class="line">		name: name,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// father结构体的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *father)</span></span> house() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;father init func, name [%v] have a house\n&quot;</span>, f.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// son结构体</span></span><br><span class="line"><span class="keyword">type</span> son <span class="keyword">struct</span>&#123;</span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">	father</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// son结构体的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newSon</span><span class="params">(age <span class="type">int</span>, name <span class="type">string</span>)</span></span> son &#123;</span><br><span class="line">	<span class="keyword">return</span> son&#123;</span><br><span class="line">		age: age,</span><br><span class="line">		father: father&#123;</span><br><span class="line">			name: name,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// son结构体的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *son)</span></span> goWalk() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;father is %v\n&quot;</span>, s.name)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;son age is %v\n&quot;</span>, s.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f1 := newFather(<span class="string">&quot;opim&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f1=%#v\n&quot;</span>, f1)</span><br><span class="line">	</span><br><span class="line">	s1 := newSon(<span class="number">19</span>, <span class="string">&quot;hupe&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%#v\n&quot;</span>, s1)</span><br><span class="line">	</span><br><span class="line">	s1.goWalk()</span><br><span class="line">	s1.house()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*	</span></span><br><span class="line"><span class="comment">	执行结果：</span></span><br><span class="line"><span class="comment">	f1=main.father&#123;name:&quot;opim&quot;&#125;</span></span><br><span class="line"><span class="comment">	s1=main.son&#123;age:19, father:main.father&#123;name:&quot;hupe&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment">	father is hupe</span></span><br><span class="line"><span class="comment">	son age is 19</span></span><br><span class="line"><span class="comment">	father init func, name [hupe] have a house</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="3-14-结构体和json"><a href="#3-14-结构体和json" class="headerlink" title="3.14 结构体和json"></a>3.14 结构体和json</h4><h5 id="3-14-1-json解释"><a href="#3-14-1-json解释" class="headerlink" title="3.14.1 json解释"></a>3.14.1 json解释</h5><blockquote>
<p>结构体中支持json格式输出</p>
<p><code>JSON</code>简介</p>
<ul>
<li><p>JSON的全称是”JavaScript Object Notation”，意思是JavaScript对象表示法，它是一种基于文本，独立于语言的轻量级数据交换格式。</p>
</li>
<li><p>JSON语法</p>
<ul>
<li>数据在名称&#x2F;值对中</li>
<li>数据由逗号分隔</li>
<li>大括号保存对象</li>
<li>中括号保存数组</li>
</ul>
</li>
<li><p>JSON值</p>
<ul>
<li><p>数字(整数&#x2F;浮点数)</p>
</li>
<li><p>字符串(双引号)</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E5%B8%83%E5%B0%94%E5%80%BC&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:627916260%7D">布尔值</a>(true&#x2F;false)</p>
</li>
<li><p>数组(中括号中)</p>
</li>
<li><p>对象(大括号中)</p>
</li>
<li><p>null</p>
</li>
<li><p>实例</p>
</li>
</ul>
</li>
<li><p>JSON 数据的书写格式</p>
<ul>
<li>名称&#x2F;值对组合中的名称写在前面（在双引号中），值对写在后面，中间用冒号隔开</li>
<li>其中<code>值</code>可以是：数字（整数或浮点数）、字符串（在双引号中）、布尔值（true或false）、数组（在方括号中）、对象（在花括号中）、null</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-14-2-序列化和反序列化"><a href="#3-14-2-序列化和反序列化" class="headerlink" title="3.14.2 序列化和反序列化"></a>3.14.2 序列化和反序列化</h5><blockquote>
<p>知乎解释：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/40462507">序列化和反序列化</a></p>
<p>百度百科解释：</p>
<ul>
<li>序列化 (Serialization)是将对象的状态信息转换为可以存储或传输的形式的过程<ul>
<li>把对象转化为可传输的字节序列过程称为序列化，比如<code>json</code>、<code>bytes</code>等形式</li>
<li>在序列化期间，对象将其当前状态写入到临时或持久性存储区</li>
</ul>
</li>
<li>反序列化<ul>
<li>可以通过从存储区中读取或反序列化对象的状态，重新创建该对象</li>
<li>把字节序列还原为对象的过程称为反序列化</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="3-14-3-go序列化"><a href="#3-14-3-go序列化" class="headerlink" title="3.14.3 go序列化"></a>3.14.3 go序列化</h5><blockquote>
<p>序列化：</p>
<ul>
<li>将go语言中的结构体变量 –&gt; json格式的字符串</li>
</ul>
<p><code>go</code>序列化:</p>
<ul>
<li><p>使用到了内置包<code>encoding/json</code>，需要先引入</p>
</li>
<li><p>输出序列化的值：</p>
<ul>
<li>需要使用内置函数<code>string</code></li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line">ret, err := json.Marshal(d1)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	json.Marshal(需要序列化的对象)</span></span><br><span class="line"><span class="comment">	输出时使用string对ret进行转化成字符串，否则会直接输出会显示为空</span></span><br><span class="line"><span class="comment">	返回两个值，ret是序列化的结果，err是错误信息，没有错误的话都是nil，表示空值，可以用来进行判断序列化是否转化成功</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>直接输出序列化的变量，是一个字节类型的</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := newDog(<span class="string">&quot;bom&quot;</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%v\n&quot;</span>, d1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 序列化：将go语言中的结构体变量 --&gt; json格式的字符串</span></span><br><span class="line">	ret, err := json.Marshal(d1)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;json转化失败&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret=%#v\n&quot;</span>, ret)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220208180705196.png" class="" title="image-20220208180705196">

<blockquote>
<p>使用string转化输出,但是输出是空的json</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := newDog(<span class="string">&quot;bom&quot;</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%v\n&quot;</span>, d1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 序列化：将go语言中的结构体变量 --&gt; json格式的字符串</span></span><br><span class="line">	ret, err := json.Marshal(d1)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;json转化失败&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret=%#v\n&quot;</span>, <span class="type">string</span>(ret))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220208180821232.png" class="" title="image-20220208180821232">

<blockquote>
<p>上面可以看到使用<code>string</code>转化序列化的变量以后，输出的空字符串，没有d1里的name和age属性</p>
<p>这里就是字段的可见性的原因：</p>
<ul>
<li>因为在<code>go</code>字段名是小写的，那么其他包导入的时候，是访问不到的，属于隐藏变量</li>
<li>在上面的代码中，定义的<code>d1</code>的结构体的<code>name</code>和<code>age</code>属性都是小写，那么在<code>json</code>这个包序列化<code>d1</code>的时候，由于<code>d1</code>属性名都是小写，所以<code>json</code>包访问不到，所以出现了空字符串</li>
<li>所以修改<code>dog</code>结构体的<code>name</code>和<code>age</code>字段名首字母大写，构造函数中也进行对应的字段名首字母大写就可以正确输出<code>json</code>字符串了</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		Name: name,</span><br><span class="line">		Age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := newDog(<span class="string">&quot;bom&quot;</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%v\n&quot;</span>, d1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 序列化：将go语言中的结构体变量 --&gt; json格式的字符串</span></span><br><span class="line">	<span class="comment">// 需要注意的是结构体的字段名首字母必须大写，因为这是需要json包需要访问d1的name和age属性，小写的字段在其他包都是没法访问到的</span></span><br><span class="line">	ret, err := json.Marshal(d1)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;json转化失败&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret=%#v\n&quot;</span>, <span class="type">string</span>(ret))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220208181655186.png" class="" title="image-20220208181655186">



<blockquote>
<p>下图是将上面的结果<code>&quot;&#123;\&quot;Name\&quot;:\&quot;bom\&quot;,\&quot;Age\&quot;:3&#125;&quot;</code>放到<code>json</code>格式转化的网站进行了转化，可以看到是一个正确的<code>json</code>字符串，反斜杠是表示转义符号</p>
</blockquote>


<blockquote>
<p>但是有个问题，序列化出来的<code>json</code>字段名首字母都是大写，但是传给前端的时候需要都是小写的，就需要使用<code>tag</code>，<code>tag</code>是在定义结构体的位置添加，tag表示给字段名起了一个别名</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加tag</span></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">    <span class="comment">// 反斜杠，json表示使用的包，用冒号隔开，后面要写的字段用小写，有多个用空格隔开</span></span><br><span class="line">    <span class="comment">// 可以理解为是给首字母大写的字段名通过tag起了一个别名</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">注意tag和后面的变量名不能有空格</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		Name: name,</span><br><span class="line">		Age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := newDog(<span class="string">&quot;bom&quot;</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%v\n&quot;</span>, d1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 序列化：将go语言中的结构体变量 --&gt; json格式的字符串</span></span><br><span class="line">	<span class="comment">// 需要注意的是结构体的字段名首字母必须大写，因为这是需要json包需要访问d1的name和age属性，小写的字段在其他包都是没法访问到的</span></span><br><span class="line">	ret, err := json.Marshal(d1)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;json转化失败&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret=%#v\n&quot;</span>, <span class="type">string</span>(ret))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220208184714283.png" class="" title="image-20220208184714283">

<h5 id="3-14-4-go反序列化"><a href="#3-14-4-go反序列化" class="headerlink" title="3.14.4 go反序列化"></a>3.14.4 go反序列化</h5><blockquote>
<p>反序列化：</p>
<ul>
<li>将json格式的字符串 –&gt; go语言中的结构体变量</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> 变量 对应结构体类型</span><br><span class="line">err := json.Unmarshal([]<span class="type">byte</span>(反序列化字符串)， 变量指针)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	接收的第一个参数是字节类型的切换，那么可以值接使用[]byte(反序列化字符串)进行强制转化</span></span><br><span class="line"><span class="comment">	第二个参数是定义一个变量用来存储反序列化的值，一般都是需要传入指针，因为go语言的函数传值都是拷贝，如果不传指针，定义的变量传给Unmarshal函数一直都是副本，所以需要传递指针，变量在反序列化以后，值才会接收为反序列化的值</span></span><br><span class="line"><span class="comment">	返回1个值，err是错误信息，没有错误的话都是nil，表示空值，可以用来进行判断反序列化是否成功</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		Name: name,</span><br><span class="line">		Age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 反序列化</span></span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	<span class="comment">// 反引号表示将字符串的内容会原样输出</span></span><br><span class="line">	jsonStrData := <span class="string">`&#123;&quot;name&quot;:&quot;lpm&quot;,&quot;age&quot;:13&#125;`</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, jsonStrData)</span><br><span class="line">	</span><br><span class="line">	err := json.Unmarshal([]<span class="type">byte</span>(jsonStrData), &amp;d1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err=%v\n&quot;</span>, err)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;反序列化失败！！！&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;&#123;\&quot;name\&quot;:\&quot;lpm\&quot;,\&quot;age\&quot;:13&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-14-5-go反序列化空值问题"><a href="#3-14-5-go反序列化空值问题" class="headerlink" title="3.14.5 go反序列化空值问题"></a>3.14.5 go反序列化空值问题</h5><blockquote>
<p>反序列化时，传递的<code>json</code>字段定义的名字值一定要和结构体里定义的一致，否则会出现空值的情况</p>
<p>比如将下方的<code>jsonStrData</code>里的”name”字段写成<code>uname</code>,那么反序列化出来d1的<code>Name</code>字段值就是空值</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	<span class="comment">// 首字母不大写，没法进行序列化</span></span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog&#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		Name: name,</span><br><span class="line">		Age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 反序列化</span></span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	<span class="comment">// 反引号表示将字符串的内容会原样输出</span></span><br><span class="line">	jsonStrData := <span class="string">`&#123;&quot;uname&quot;:&quot;lpm&quot;,&quot;age&quot;:13&#125;`</span></span><br><span class="line">	</span><br><span class="line">	err := json.Unmarshal([]<span class="type">byte</span>(jsonStrData), &amp;d1)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;反序列化失败！！！&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%#v\n&quot;</span>, d1) <span class="comment">// d1=main.dog&#123;Name:&quot;&quot;, Age:13&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-15-结构体向外暴露"><a href="#3-15-结构体向外暴露" class="headerlink" title="3.15 结构体向外暴露"></a>3.15 结构体向外暴露</h4><blockquote>
<ol>
<li>如果定义的结构体首字母大写，那么这个结构体对外部暴露可见，公有的变量，其他模块的<code>go</code>文件可以用来导入这个结构体</li>
<li>如果一个包里定义的结构体首字母是小写的，那么其他<code>go</code>文件是访问不到小写开头的结构体的</li>
<li>需要注意的点：</li>
</ol>
<ul>
<li>并且对首字母大写的结构体有格式要求，就是需要对首字母大写的结构体、方法写注释</li>
<li>注释的规则是 结构体名+空格+注释内容</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面的格式必须是需要空格隔开</span></span><br><span class="line"><span class="comment">// Person 这是一个人的结构体</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := newPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%v\n&quot;</span>, p1)</span><br><span class="line">	p1.walk()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220424150850248.png" class="" title="image-20220424150850248">

<blockquote>
<p>上图中的Person结构体是首字母大写的，表示外部可访问到</p>
<p>那么写的注释：</p>
<p><code>// Person 这是一个人的结构体</code>就需要符合<code>//+空格+结构体名+空格+注释</code>的规则来添加注释</p>
</blockquote>
<h4 id="3-16-空结构体"><a href="#3-16-空结构体" class="headerlink" title="3.16 空结构体"></a>3.16 空结构体</h4><h5 id="3-16-1-内存空间零占用"><a href="#3-16-1-内存空间零占用" class="headerlink" title="3.16.1 内存空间零占用"></a>3.16.1 内存空间零占用</h5><blockquote>
<p>在Go语言中，空结构体（表示为<code>struct&#123;&#125;</code>）是一个特殊的类型</p>
<ul>
<li>它没有任何字段，因此不占用内存空间。</li>
<li>空结构体主要用于信号传递或表示一个类型不包含任何数据。</li>
<li>它可以作为在不同goroutine之间传递信号的轻量级选项。</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> empty <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Sizeof empty struct: %d\n&quot;</span>, unsafe.Sizeof(empty))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230825130758534.png" class="" title="image-20230825130758534">

<h5 id="3-16-2-内存地址永不变"><a href="#3-16-2-内存地址永不变" class="headerlink" title="3.16.2 内存地址永不变"></a>3.16.2 内存地址永不变</h5><blockquote>
<p>空结构体的内存地址永远不变</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> empty1 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> empty2 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> empty3 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> empty4 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> empty5 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> empty6 <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty1:%p\n&quot;</span>, &amp;empty1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty2:%p\n&quot;</span>, &amp;empty2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty3:%p\n&quot;</span>, &amp;empty3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty4:%p\n&quot;</span>, &amp;empty4)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty5:%p\n&quot;</span>, &amp;empty5)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;empty6:%p\n&quot;</span>, &amp;empty6)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20230825131117711.png" class="" title="image-20230825131117711">

<blockquote>
<p>可以看到empty1到empty6的内存地址都是同一个，因为他们不占内存空间，所以分配的内存地址都是同一个，可以用来节省内存</p>
<p>使用场景：</p>
<ul>
<li>可作为占位符，尤其是在通道同步中。</li>
<li>空结构体与通道结合的使用场景主要涉及事件通知和协调多个 goroutine</li>
</ul>
</blockquote>
<h4 id="3-17-结构体练习示例"><a href="#3-17-结构体练习示例" class="headerlink" title="3.17 结构体练习示例"></a>3.17 结构体练习示例</h4><blockquote>
<p>下面是结构体练习的例子</p>
<p>需要注意的是在编辑学生时，当修改完学生姓名&#x2F;年龄，一定要重新赋值给学生管理系统的map，否则修改会不生效</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// excute select func</span></span><br><span class="line">	selectEvent()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showMenu</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Print(<span class="string">&quot;wellcome to student  manager system:&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">`</span></span><br><span class="line"><span class="string">		1. showStu</span></span><br><span class="line"><span class="string">		2. addStu</span></span><br><span class="line"><span class="string">		3. delStu</span></span><br><span class="line"><span class="string">		4. editStu</span></span><br><span class="line"><span class="string">		5. quit</span></span><br><span class="line"><span class="string">	`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">selectEvent</span><span class="params">()</span></span>&#123;</span><br><span class="line">	smr := newStuMr(<span class="number">100</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">// lopp show menu</span></span><br><span class="line">		showMenu()</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// input user choice</span></span><br><span class="line">		<span class="keyword">var</span> choice <span class="type">int</span></span><br><span class="line">		fmt.Print(<span class="string">&quot;input your choice:&quot;</span>)</span><br><span class="line">		fmt.Scan(&amp;choice)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;your choice is:%v\n&quot;</span>, choice)</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">switch</span> choice&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			smr.showStu()</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			smr.addStu()</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			smr.delStu()</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			smr.editStu()</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;bye~&quot;</span>)</span><br><span class="line">			os.Exit(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;your choice is wrong, pls input age...&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stuMgr.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// student struct</span></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	age 	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStudent</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> student&#123;</span><br><span class="line">	<span class="keyword">return</span> student&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		 age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *student)</span></span> alterStu(newName <span class="type">string</span>, newAge <span class="type">int</span>) &#123;</span><br><span class="line">	s.name = newName</span><br><span class="line">	s.age  = newAge</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// studentManager struct</span></span><br><span class="line"><span class="keyword">type</span> stuMr <span class="keyword">struct</span>&#123;</span><br><span class="line">	studentData <span class="keyword">map</span>[<span class="type">int</span>]student</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStuMr</span><span class="params">(stuSize <span class="type">int</span>)</span></span> stuMr&#123;</span><br><span class="line">	<span class="keyword">return</span> stuMr&#123;</span><br><span class="line">		studentData: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]student, stuSize),</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stuMr)</span></span> showStu() &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s.studentData) == <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;student data is empty, pls add first!!!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Id\tname\tage&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> k,v := <span class="keyword">range</span> s.studentData&#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v\t%v\t%v\n&quot;</span>,k, v.name, v.age)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define globle virable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	id, age		<span class="type">int</span></span><br><span class="line">	name		<span class="type">string</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stuMr)</span></span> addStu() &#123;</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input name:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;name)</span><br><span class="line">	</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input age:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;age)</span><br><span class="line">	</span><br><span class="line">	id++</span><br><span class="line">	s.studentData[id] = newStudent(name, age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stuMr)</span></span> delStu() &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s.studentData) == <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;student data is empty, pls add first!!!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input Id:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;id)</span><br><span class="line">	_, ok := s.studentData[id]</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;id[%v] don&#x27;t exists!!!&quot;</span>, id)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">delete</span>(s.studentData, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stuMr)</span></span> editStu() &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s.studentData) == <span class="number">0</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;student data is empty, pls add first!!!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input Id:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;id)</span><br><span class="line">	qStuData, ok := s.studentData[id]</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;id[%v] don&#x27;t exists!!!\n&quot;</span>, id)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;query stu data:%+v\n&quot;</span>, qStuData)</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input new name:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;name)</span><br><span class="line">	fmt.Print(<span class="string">&quot;pls input new age:&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;age)</span><br><span class="line">	qStuData.alterStu(name, age)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// give new qStuData to student map, ottherwise new data can&#x27;t be effctive</span></span><br><span class="line">	s.studentData[id] = qStuData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十、接口与反射"><a href="#十、接口与反射" class="headerlink" title="十、接口与反射"></a>十、接口与反射</h2><h3 id="1、接口"><a href="#1、接口" class="headerlink" title="1、接口"></a>1、接口</h3><h4 id="1-1-接口定义"><a href="#1-1-接口定义" class="headerlink" title="1.1 接口定义"></a>1.1 接口定义</h4><blockquote>
<ul>
<li>接口定义：<ul>
<li>接口是一种抽象的类型，一种特殊的类型</li>
<li>接口是一组<code>method</code>的集合，不关心属性，只关心方法</li>
<li>接口用于<code>不关心变量类型，只关心调用它的什么方法</code></li>
<li>可以联想到手机、相机、U盘都可以以与电脑的usb接口建立连接，那么手机、相机、U盘的usb卡槽大小一不一样不重要，只要实现了usb接口就可以读取数据</li>
</ul>
</li>
<li>接口注意：<ul>
<li>只有当两个或两个意义上的具体类型必须以相同的方式进行处理时，才需要定义接口</li>
<li>不要为了接口而写接口，会增加不必要的运行损耗</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口定义</span></span><br><span class="line"><span class="keyword">type</span> 接口名 <span class="keyword">interface</span> &#123;</span><br><span class="line">    接口方法<span class="number">1</span>(参数<span class="number">1</span>， 参数<span class="number">2.</span>..)(返回值<span class="number">1</span>，返回值<span class="number">2.</span>..)</span><br><span class="line">    接口方法<span class="number">2</span>(参数<span class="number">1</span>， 参数<span class="number">2.</span>..)(返回值<span class="number">1</span>，返回值<span class="number">2.</span>..)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有定义了接口方法的类型，都必须实现接口方法</span></span><br><span class="line"><span class="comment">// 只要实现了接口方法的变量都是speaker类型</span></span><br><span class="line"><span class="comment">// 接口方法也叫方法签名</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">@File   : main</span></span><br><span class="line"><span class="comment">@Date   : 2022/8/7 11:02 下午</span></span><br><span class="line"><span class="comment">@Author : lyzin</span></span><br><span class="line"><span class="comment">@Desc   :</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span> &#123;</span><br><span class="line">	start()</span><br><span class="line">	stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机实例</span></span><br><span class="line"><span class="keyword">type</span> phone <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p phone)</span></span> start() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v开机了\n&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p phone)</span></span> stop() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v关机了\n&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相机实例</span></span><br><span class="line"><span class="keyword">type</span> camera <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c camera)</span></span> start() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v开机了\n&quot;</span>, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c camera)</span></span> stop() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v关机了\n&quot;</span>, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 电脑实例</span></span><br><span class="line"><span class="keyword">type</span> computer <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// startWork 电脑启动工作，里面的形参是u，类型是Usb接口类型，只有实现Usb接口类型里面的方法的对象才可以被传入</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c computer)</span></span> startWork(u Usb) &#123;</span><br><span class="line">	u.start()</span><br><span class="line">	time.Sleep(time.Second * <span class="number">3</span>)</span><br><span class="line">	u.stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//	实例化手机</span></span><br><span class="line">	p1 := phone&#123;name: <span class="string">&quot;华为手机&quot;</span>&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实例化相机</span></span><br><span class="line">	c1 := camera&#123;name: <span class="string">&quot;佳能相机&quot;</span>&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实例化电脑</span></span><br><span class="line">	cp := computer&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 电脑使用手机</span></span><br><span class="line">	cp.startWork(p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 电脑使用相机</span></span><br><span class="line">	cp.startWork(c1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-接口实现"><a href="#1-2-接口实现" class="headerlink" title="1.2 接口实现"></a>1.2 接口实现</h4><blockquote>
<p>一个变量如果实现了接口类型中规定的所有方法，那么这个变量就实现了这个接口，所以可以称为这个接口类型的变量</p>
<p>接口类型的变量的值是<code>nil</code>，类型也是<code>nil</code>，这表示空接口</p>
<p>接口保存的是值的动态类型和动态值本身</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/13 20:19</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此处表示dog结构体的方法没有实现接口里的speak方法，就会报错</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d dog)</span></span> speak() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;狗在叫\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span> &#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sp</span><span class="params">(s speaker)</span></span> &#123;</span><br><span class="line">	s.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// d1里面有speak方法，那么d1这个变量变量就实现 specker这个接口类型，d1就是speaker这个接口类型的变量</span></span><br><span class="line">	sp(d1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s1 speaker</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// nil</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-接口定义方法未实现"><a href="#1-3-接口定义方法未实现" class="headerlink" title="1.3 接口定义方法未实现"></a>1.3 接口定义方法未实现</h4><blockquote>
<p>如果变量的接口方法未实现，就会报错</p>
<p><code>implement</code>: 执行，实施，生效</p>
<p>会提示dog类型缺少speak方法</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/13 20:19</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此处表示dog结构体的方法没有实现接口里的speak方法，就会报错</span></span><br><span class="line"><span class="comment">//func (d dog) speak() &#123;</span></span><br><span class="line"><span class="comment">//	fmt.Printf(&quot;狗在叫\n&quot;)</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span> &#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sp</span><span class="params">(s speaker)</span></span> &#123;</span><br><span class="line">	s.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	sp(d1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-4-值接收者实现接口"><a href="#1-4-值接收者实现接口" class="headerlink" title="1.4 值接收者实现接口"></a>1.4 值接收者实现接口</h4><blockquote>
<p>值接收者实现接口，结构体类型和结构体指针类型的变量都可以存储</p>
<p>从下面代码可以看出，<code>s1</code>是<code>speaker</code>类型的变量，但是<code>s1</code>既可以接收值类型结构体，也可以接收指针类型结构体</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/13 20:19</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	age 	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此处表示dog结构体的方法实现的是值类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d dog)</span></span> speak() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;狗在叫\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span> &#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sp</span><span class="params">(s speaker)</span></span> &#123;</span><br><span class="line">	s.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	<span class="keyword">var</span> d2 dog</span><br><span class="line">	d1 = dog&#123;name:<span class="string">&quot;tom&quot;</span>, age: <span class="number">19</span>&#125;</span><br><span class="line">	d2 = dog&#123;name:<span class="string">&quot;yom&quot;</span>, age: <span class="number">29</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> s1 speaker</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d2的值，接口可以接收到</span></span><br><span class="line">	s1 = d1</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// s1=&#123;tom 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// s1=main.dog</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d2的指针，接口可以接收到</span></span><br><span class="line">	s1 = &amp;d2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// s1=&amp;&#123;yom 29&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// s1=*main.dog</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-5-指针接收者实现接口"><a href="#1-5-指针接收者实现接口" class="headerlink" title="1.5 指针接收者实现接口"></a>1.5 指针接收者实现接口</h4><blockquote>
<p>指针接收者实现接口只能存结构体指针</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/13 20:19</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	age 	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此处表示dog结构体的方法实现的是指针类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span></span> speak() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;狗在叫\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span> &#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sp</span><span class="params">(s speaker)</span></span> &#123;</span><br><span class="line">	s.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	<span class="keyword">var</span> d2 dog</span><br><span class="line">	d1 = dog&#123;name:<span class="string">&quot;tom&quot;</span>, age: <span class="number">19</span>&#125;</span><br><span class="line">	d2 = dog&#123;name:<span class="string">&quot;yom&quot;</span>, age: <span class="number">29</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> s1 speaker</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d1的值，但是结构体方法的接收者是指针类型，所以不可以接收到</span></span><br><span class="line">	<span class="comment">// 报错提示speak方法有指针接收者</span></span><br><span class="line">	s1 = d1 <span class="comment">// 这样会报错，必须给s1赋值指针类型的结构体对象</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) </span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) </span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d2的指针，接口可以接收到</span></span><br><span class="line">	s1 = &amp;d2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// s1=&amp;&#123;yom 29&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// s1=*main.dog</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果结构体实现接口的方法的接收者是指针类型时，那么传给接口类型的方法的变量也必须是指针类型，否则就会报错</p>
</blockquote>


<h4 id="1-6-多个接口和接口嵌套"><a href="#1-6-多个接口和接口嵌套" class="headerlink" title="1.6 多个接口和接口嵌套"></a>1.6 多个接口和接口嵌套</h4><blockquote>
<p>同一个结构体可以实现多个接口</p>
<p>接口还可以进行嵌套</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/13 20:19</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// animal 接口嵌套了dog结构体的speaker、eater接口</span></span><br><span class="line"><span class="keyword">type</span> animal <span class="keyword">interface</span> &#123;</span><br><span class="line">	speaker</span><br><span class="line">	eater</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现dog的speaker接口</span></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span> &#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现dog的eater接口</span></span><br><span class="line"><span class="keyword">type</span> eater <span class="keyword">interface</span> &#123;</span><br><span class="line">	eat()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// dog结构体</span></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	age 	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span></span> speak() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;狗在叫\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span></span> eat() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;狗在吃\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义接口调用的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sp</span><span class="params">(s speaker)</span></span> &#123;</span><br><span class="line">	s.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> d1 dog</span><br><span class="line">	<span class="keyword">var</span> d2 dog</span><br><span class="line">	d1 = dog&#123;name:<span class="string">&quot;tom&quot;</span>, age: <span class="number">19</span>&#125;</span><br><span class="line">	d2 = dog&#123;name:<span class="string">&quot;yom&quot;</span>, age: <span class="number">29</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> s1 speaker</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d2的值，但是结构体方法的接收者是指针类型，所以不可以接收到</span></span><br><span class="line">	<span class="comment">// 报错提示speak方法有指针接收者</span></span><br><span class="line">	<span class="comment">// s1 = d1 // 这样会报错，必须给s1赋值指针类型的结构体对象</span></span><br><span class="line">	s1 = &amp;d1 <span class="comment">// 必须给接口传递结构体的指针</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// s1=&#123;tom 19&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// s1=main.dog</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 传给s1的是d2的指针，接口可以接收到</span></span><br><span class="line">	s1 = &amp;d2</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\n&quot;</span>, s1) <span class="comment">// s1=&amp;&#123;yom 29&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%T\n&quot;</span>, s1) <span class="comment">// s1=*main.dog</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义接口嵌套</span></span><br><span class="line"><span class="keyword">type</span> animal <span class="keyword">interface</span>&#123;</span><br><span class="line">	speaker</span><br><span class="line">	eater</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义第二层接口实现dog的speak接口</span></span><br><span class="line"><span class="keyword">type</span> speaker <span class="keyword">interface</span>&#123;</span><br><span class="line">	speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义第二层接口实现dog的eater接口</span></span><br><span class="line"><span class="keyword">type</span> eater <span class="keyword">interface</span>&#123;</span><br><span class="line">	eat()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span>&#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	age <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newDog</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> dog &#123;</span><br><span class="line">	<span class="keyword">return</span> dog&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		 age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span></span> speak() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s is speak...\n&quot;</span>, d.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span></span> eat() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%s is eating...\n&quot;</span>, d.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口方法调用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfSpeak</span><span class="params">(x animal)</span></span> &#123;</span><br><span class="line">	x.speak()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfEat</span><span class="params">(x animal)</span></span> &#123;</span><br><span class="line">	x.eat()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := newDog(<span class="string">&quot;sam&quot;</span>, <span class="number">19</span>)</span><br><span class="line">	d2 := newDog(<span class="string">&quot;jam&quot;</span>, <span class="number">29</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d1=%v\n&quot;</span>, d1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;d2=%v\n&quot;</span>, d2)</span><br><span class="line">	</span><br><span class="line">	dfSpeak(&amp;d1)</span><br><span class="line">	dfEat(&amp;d2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-7-空接口"><a href="#1-7-空接口" class="headerlink" title="1.7  空接口"></a>1.7  空接口</h4><blockquote>
<p>空接口是指没有定义任何方法的接口</p>
<p>所以任何类型都实现了空接口</p>
<p>那么空接口的变量可以存任何类型的变量，也就是说，只要变量的类型是空接口，那么就可以接收任意类型的变量</p>
<p>空接口没有任何约束</p>
</blockquote>
<h5 id="1-7-1-空接口变量"><a href="#1-7-1-空接口变量" class="headerlink" title="1.7.1 空接口变量"></a>1.7.1 空接口变量</h5><blockquote>
<p>空接口变量本身的值和类型都是<code>nil</code>，所以可以是任意类型</p>
<p>从下面代码可以以看出，当s1是空接口类型时，可以接收整型、字符串、布尔值等等类型，没有类型限制，所有说空接口可以是任意类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1 <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\t s1 type=%T\n&quot;</span>, s1, s1)</span><br><span class="line">	</span><br><span class="line">	s1 = <span class="number">19</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\t s1 type=%T\n&quot;</span>, s1, s1)</span><br><span class="line">	</span><br><span class="line">	s1 = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\t s1 type=%T\n&quot;</span>, s1, s1)</span><br><span class="line">	</span><br><span class="line">	s1 = <span class="literal">true</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;s1=%v\t s1 type=%T\n&quot;</span>, s1, s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214143852695.png" class="" title="image-20220214143852695">

<h5 id="1-7-2-函数形参-x2F-返回值为空接口"><a href="#1-7-2-函数形参-x2F-返回值为空接口" class="headerlink" title="1.7.2 函数形参&#x2F;返回值为空接口"></a>1.7.2 函数形参&#x2F;返回值为空接口</h5><blockquote>
<p>鉴于空接口变量可以接收任意数据类型的值，那么就可以用来给函数传参</p>
<ul>
<li>因为之前函数的形参变量类型都是固定，只允许传入固定类型的形参，有了空接口，就可以接收任意类型的形参</li>
<li>返回值也是同理，返回值可以返回任意类型的值，当然返回值有空接口的不多<ul>
<li>从下面代码可以看出，返回值是<code>interface&#123;&#125;</code>类型，表示可以返回任意类型的返回值</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 形参为空接口类型，表示可以接口任意类型的变量</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showVal</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="keyword">interface</span>&#123;&#125; &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;showVal函数内：x:%v\t | x type:%T\n&quot;</span>, x, x)</span><br><span class="line">	<span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := showVal(<span class="number">19</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法：%v\t %T\n&quot;</span>, s1, s1)</span><br><span class="line">	</span><br><span class="line">	s2 := showVal(<span class="string">&quot;sam&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法：%v\t %T\n&quot;</span>, s2, s2)</span><br><span class="line">	</span><br><span class="line">	s3 := showVal(<span class="literal">true</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;main方法：%v\t %T\n&quot;</span>, s3, s3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214145120632.png" class="" title="image-20220214145120632">

<h5 id="1-7-3-函数空接口接收可变长参数"><a href="#1-7-3-函数空接口接收可变长参数" class="headerlink" title="1.7.3 函数空接口接收可变长参数"></a>1.7.3 函数空接口接收可变长参数</h5><blockquote>
<p>函数可以接收可变长参数，那么可变长参数既可以是<code>int</code>&#x2F;<code>string</code>&#x2F;<code>slice</code>&#x2F;<code>map</code>等类型，那么也可以接收空接口类型</p>
<p>传进来多个值，都可以被空接口形参接收，并且是<code>空接口类型的切片</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复习下可变长参数函数的格式</span></span><br><span class="line"><span class="comment">// 格式</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> 函数名<span class="params">(形参 ...T)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 形参: 形参名</span></span><br><span class="line"><span class="comment">// ...T: 可变长参数的类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 形参为空接口类型，表示可以接口任意类型的变量</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showVal</span><span class="params">(x ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;showVal函数内x的值:%v\n&quot;</span>, x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;showVal函数内x的type:%T\n&quot;</span>, x)</span><br><span class="line">	<span class="comment">// 遍历可以空接口类型的可变长参数</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> x &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;v=%v\n&quot;</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sf := []<span class="type">string</span>&#123;<span class="string">&quot;huge&quot;</span>, <span class="string">&quot;bob&quot;</span>&#125;</span><br><span class="line">	mf := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	mf[<span class="string">&quot;age1&quot;</span>] = <span class="number">19</span></span><br><span class="line">	mf[<span class="string">&quot;age2&quot;</span>] = <span class="number">29</span></span><br><span class="line">	mf[<span class="string">&quot;age3&quot;</span>] = <span class="number">39</span></span><br><span class="line">	<span class="comment">// 可以看到showVal函数可以接收任意类型的形参</span></span><br><span class="line">	showVal(<span class="number">19</span>, <span class="string">&quot;sam&quot;</span>, <span class="literal">true</span>, sf, mf)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-8-类型断言"><a href="#1-8-类型断言" class="headerlink" title="1.8 类型断言"></a>1.8 类型断言</h4><blockquote>
<p>空接口可以接收任意类型的变量，那么可以对传进来的变量类型进行判断，叫做<code>类型断言</code></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口类型判断，也叫类型断言</span></span><br><span class="line">x.(T)</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>x表示空接口变量，T表示需要判断的数据类型</li>
<li>类型断言会返回两个值<ul>
<li>一个是传进来的值本身</li>
<li>一个是错误码(布尔类型)<ul>
<li>当传入的值的类型是判断里指定的类型，则返回true，否则返回false</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 形参为空接口类型，表示可以接口任意类型的变量</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showVal</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	v, ok := x.(<span class="type">string</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;v=%v\tv type=%T\n&quot;</span>, v, v) <span class="comment">// v=sam   v type=string</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;ok=%v\tok type=%T\n&quot;</span>, ok, ok) <span class="comment">// ok=true ok type=bool</span></span><br><span class="line">	<span class="keyword">if</span> ok&#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v\t%T\n&quot;</span>, v, v)</span><br><span class="line">	&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;x[%v] type[%T] is not a string type\n&quot;</span>, ok, ok)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 可以看到showVal函数可以接收任意类型的形参</span></span><br><span class="line">	showVal(<span class="string">&quot;sam&quot;</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 传入一个不是string类型的变量</span></span><br><span class="line">	showVal(<span class="number">19</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214151505455.png" class="" title="image-20220214151505455">

<h5 id="1-8-1-空接口类型断言"><a href="#1-8-1-空接口类型断言" class="headerlink" title="1.8.1 空接口类型断言"></a>1.8.1 空接口类型断言</h5><blockquote>
<p>类型断言和switch语句配合使用，用来判断空接口变量是什么类型，</p>
<p>在<code>switch t.(type)</code> 这种语法结构中，<code>type</code>并不是声明新的类型，而是用于获取接口 t 的动态类型（具体类型）。</p>
<p><code>type</code>是Go的关键字，但仅在Go的switch语句的类型断言场景下被使用，即仅在 <code>switch</code> 语句的这种类型断言（type switch）中起作用。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// checkType 检查变量的类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkType</span><span class="params">(x <span class="keyword">interface</span> &#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="keyword">switch</span> val := x.(<span class="keyword">type</span>) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="type">string</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v is a string\n&quot;</span>, val)</span><br><span class="line">	<span class="keyword">case</span> <span class="type">int</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v is a int\n&quot;</span>, val)</span><br><span class="line">	<span class="keyword">case</span> <span class="type">bool</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%v is a bool\n&quot;</span>, val)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Printf(<span class="string">&quot;unknow Type: %v\n&quot;</span>, val)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	checkType(<span class="string">&quot;sam&quot;</span>)</span><br><span class="line">	checkType(<span class="number">90</span>)</span><br><span class="line">	checkType(<span class="literal">true</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// user 结构体</span></span><br><span class="line">	u1 := user&#123;name: <span class="string">&quot;jhon&quot;</span>&#125;</span><br><span class="line">	checkType(u1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220808083735071.png" class="" title="image-20220808083735071">

<h5 id="1-8-2-非空接口类型断言"><a href="#1-8-2-非空接口类型断言" class="headerlink" title="1.8.2 非空接口类型断言"></a>1.8.2 非空接口类型断言</h5><blockquote>
<p>类型断言不止可以应用<code>空接口</code>类型断言，也可以应用到<code>非空接口</code>类型断言</p>
<p>以手机、相机使用usb在电脑上查看资料为例</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span> &#123;</span><br><span class="line">	start()</span><br><span class="line">	stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机实例</span></span><br><span class="line"><span class="keyword">type</span> phone <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p phone)</span></span> start() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v开机了\n&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p phone)</span></span> stop() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v关机了\n&quot;</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相机实例</span></span><br><span class="line"><span class="keyword">type</span> camera <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c camera)</span></span> start() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v开机了\n&quot;</span>, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c camera)</span></span> stop() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v关机了\n&quot;</span>, c.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 电脑实例</span></span><br><span class="line"><span class="keyword">type</span> computer <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// startWork 电脑启动工作，里面的形参是u，类型是Usb接口类型，只有实现Usb接口类型里面的方法的对象才可以被传入</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c computer)</span></span> startWork(u Usb) &#123;</span><br><span class="line">	uobj, ok := u.(phone);</span><br><span class="line">	fmt.Printf(<span class="string">&quot;变量%v type:%T\n&quot;</span>, uobj, uobj)</span><br><span class="line">	<span class="keyword">if</span>  ok &#123;</span><br><span class="line">		u.start()</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		u.stop()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//	实例化手机</span></span><br><span class="line">	p1 := phone&#123;name: <span class="string">&quot;华为手机&quot;</span>&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实例化相机</span></span><br><span class="line">	c1 := camera&#123;name: <span class="string">&quot;佳能相机&quot;</span>&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实例化电脑</span></span><br><span class="line">	cp := computer&#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 电脑使用手机</span></span><br><span class="line">	cp.startWork(p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 电脑使用相机</span></span><br><span class="line">	cp.startWork(c1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面代码中对于computer的startWork方法进行了修改，里面使用了类型断言，判断传进来的<code>u</code>类型是否为phone，如果是phone，执行start方法，不是则执行stop方法</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220808091430004.png" class="" title="image-20220808091430004">

<h3 id="2、反射"><a href="#2、反射" class="headerlink" title="2、反射"></a>2、反射</h3><blockquote>
<p><strong>程序编译</strong>：</p>
<ul>
<li>程序在编译时，变量的值会被转换为内存地址，变量名不会被编译器写入到可执行部分。</li>
</ul>
<p><strong>反射</strong>：</p>
<ul>
<li>是指在程序运行期对程序本身进行访问和修改的能力。</li>
</ul>
<p><strong>反射的作用</strong>：</p>
<ul>
<li>在运行程序时，程序无法获取自身的信息。</li>
<li>支持反射的语言可以在程序编译期将变量的反射信息，如字段名称、类型信息、结构体信息等整合到可执行文件中，并给程序提供接口访问反射信息，这样就可以在程序运行期获取类型的反射信息，并且有能力修改它们</li>
</ul>
<p><code>GO</code>语言中使用<code>reflect</code>包来进行访问反射信息</p>
<ul>
<li>reflect包使用<code>reflect.TypeOf</code>获取对象的类型</li>
<li>reflect包使用<code>reflect.ValueOf</code>获取对象的值</li>
</ul>
</blockquote>
<h4 id="2-1-反射获取类型"><a href="#2-1-反射获取类型" class="headerlink" title="2.1 反射获取类型"></a>2.1 反射获取类型</h4><blockquote>
<p>Go语言中，使用<code>reflect.TypeOf()</code>函数可以获得任意值的<code>类型对象</code></p>
<ul>
<li>从而通过<code>类型对象</code>可以访问该值的<code>类型信息</code></li>
<li>TypeOf返回任意值的反射类型。</li>
<li>如果任意值的类型对象是一个nil，TypeOf返回nil。</li>
</ul>
<p>下面代码分析</p>
<ul>
<li>定义了一个reflectType方法，接收一个空接口类型的x，表示接收任意类型的变量<ul>
<li>方法里面调用了<code>reflect</code>反射包的<code>TypeOf(x)</code>方法，表示用来获取传入的x的类型</li>
</ul>
</li>
<li>main函数中定义了三个变量，类型分别是int&#x2F;string&#x2F;boolean<ul>
<li>执行结果的截图来看，正确的打印出来了变量的对应类型</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeOf方法源码：Typeof可以动态的返回任意值的类型</span></span><br><span class="line"><span class="comment">// TypeOf returns the reflection Type that represents the dynamic type of i.</span></span><br><span class="line"><span class="comment">// If i is a nil interface value, TypeOf returns nil.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TypeOf</span><span class="params">(i <span class="keyword">interface</span>&#123;&#125;)</span></span> Type &#123;</span><br><span class="line">	eface := *(*emptyInterface)(unsafe.Pointer(&amp;i))</span><br><span class="line">	<span class="keyword">return</span> toType(eface.typ)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectType</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	v := reflect.TypeOf(x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v type:%v\n&quot;</span>,x, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">34</span></span><br><span class="line">	reflectType(a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	reflectType(b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> c = <span class="literal">true</span></span><br><span class="line">	reflectType(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220328223413135.png" class="" title="image-20220328223413135">

<h4 id="2-2-反射中的类型和种类"><a href="#2-2-反射中的类型和种类" class="headerlink" title="2.2 反射中的类型和种类"></a>2.2 反射中的类型和种类</h4><blockquote>
<p>反射类型其实把类型划细分为两种，从<code>TypeOf</code>方法的返回值是<code>Type</code>可以看到，<code>Type</code>自身是一个接口类型</p>
<ul>
<li>一种是类型Type<ul>
<li>是指用<code>type</code>关键字创建的<code>自定义类型</code></li>
</ul>
</li>
<li>一种是种类Kind<ul>
<li>是指<code>底层类型</code>，比如指针，结构体等，表示一大类的类型</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="2-2-1-TypeOf返回的Type是接口类型"><a href="#2-2-1-TypeOf返回的Type是接口类型" class="headerlink" title="2.2.1 TypeOf返回的Type是接口类型"></a>2.2.1 TypeOf返回的Type是接口类型</h5><blockquote>
<p>Type接口与是TypeOf方法返回值的类型，里面有很多方法</p>
<p>Type接口的注释的中文翻译：</p>
<ul>
<li><code>Type</code>是<code>go type</code>的代表</li>
<li>不是所有的方法都适用于所有kinds的types。如果有限制条件的的话，会在每个方法的文档中注明。</li>
<li>在调用特定类型的方法之前，请使用Kind方法来找出类型的种类。</li>
<li>调用一个不适合该类型的方法会导致运行时的panic</li>
<li>类型值是可以比较的，比如用&#x3D;&#x3D;运算符，所以它们可以作为map类型的键使用，如果两个类型值代表相同的类型，它们就是相等的。</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Type is the representation of a Go type.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Not all methods apply to all kinds of types. Restrictions,</span></span><br><span class="line"><span class="comment">// if any, are noted in the documentation for each method.</span></span><br><span class="line"><span class="comment">// Use the Kind method to find out the kind of type before</span></span><br><span class="line"><span class="comment">// calling kind-specific methods. Calling a method</span></span><br><span class="line"><span class="comment">// inappropriate to the kind of type causes a run-time panic.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Type values are comparable, such as with the == operator,</span></span><br><span class="line"><span class="comment">// so they can be used as map keys.</span></span><br><span class="line"><span class="comment">// Two Type values are equal if they represent identical types.</span></span><br><span class="line"><span class="keyword">type</span> Type <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="comment">// Methods applicable to all types.</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Align returns the alignment in bytes of a value of</span></span><br><span class="line">	<span class="comment">// this type when allocated in memory.</span></span><br><span class="line">	Align() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// FieldAlign returns the alignment in bytes of a value of</span></span><br><span class="line">	<span class="comment">// this type when used as a field in a struct.</span></span><br><span class="line">	FieldAlign() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Method returns the i&#x27;th method in the type&#x27;s method set.</span></span><br><span class="line">	<span class="comment">// It panics if i is not in the range [0, NumMethod()).</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For a non-interface type T or *T, the returned Method&#x27;s Type and Func</span></span><br><span class="line">	<span class="comment">// fields describe a function whose first argument is the receiver,</span></span><br><span class="line">	<span class="comment">// and only exported methods are accessible.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For an interface type, the returned Method&#x27;s Type field gives the</span></span><br><span class="line">	<span class="comment">// method signature, without a receiver, and the Func field is nil.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Methods are sorted in lexicographic order.</span></span><br><span class="line">	Method(<span class="type">int</span>) Method</span><br><span class="line"></span><br><span class="line">	<span class="comment">// MethodByName returns the method with that name in the type&#x27;s</span></span><br><span class="line">	<span class="comment">// method set and a boolean indicating if the method was found.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For a non-interface type T or *T, the returned Method&#x27;s Type and Func</span></span><br><span class="line">	<span class="comment">// fields describe a function whose first argument is the receiver.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For an interface type, the returned Method&#x27;s Type field gives the</span></span><br><span class="line">	<span class="comment">// method signature, without a receiver, and the Func field is nil.</span></span><br><span class="line">	MethodByName(<span class="type">string</span>) (Method, <span class="type">bool</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// NumMethod returns the number of methods accessible using Method.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Note that NumMethod counts unexported methods only for interface types.</span></span><br><span class="line">	NumMethod() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Name returns the type&#x27;s name within its package for a defined type.</span></span><br><span class="line">	<span class="comment">// For other (non-defined) types it returns the empty string.</span></span><br><span class="line">	Name() <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// PkgPath returns a defined type&#x27;s package path, that is, the import path</span></span><br><span class="line">	<span class="comment">// that uniquely identifies the package, such as &quot;encoding/base64&quot;.</span></span><br><span class="line">	<span class="comment">// If the type was predeclared (string, error) or not defined (*T, struct&#123;&#125;,</span></span><br><span class="line">	<span class="comment">// []int, or A where A is an alias for a non-defined type), the package path</span></span><br><span class="line">	<span class="comment">// will be the empty string.</span></span><br><span class="line">	PkgPath() <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Size returns the number of bytes needed to store</span></span><br><span class="line">	<span class="comment">// a value of the given type; it is analogous to unsafe.Sizeof.</span></span><br><span class="line">	Size() <span class="type">uintptr</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// String returns a string representation of the type.</span></span><br><span class="line">	<span class="comment">// The string representation may use shortened package names</span></span><br><span class="line">	<span class="comment">// (e.g., base64 instead of &quot;encoding/base64&quot;) and is not</span></span><br><span class="line">	<span class="comment">// guaranteed to be unique among types. To test for type identity,</span></span><br><span class="line">	<span class="comment">// compare the Types directly.</span></span><br><span class="line">	String() <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Kind returns the specific kind of this type.</span></span><br><span class="line">	Kind() Kind</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Implements reports whether the type implements the interface type u.</span></span><br><span class="line">	Implements(u Type) <span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// AssignableTo reports whether a value of the type is assignable to type u.</span></span><br><span class="line">	AssignableTo(u Type) <span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// ConvertibleTo reports whether a value of the type is convertible to type u.</span></span><br><span class="line">	<span class="comment">// Even if ConvertibleTo returns true, the conversion may still panic.</span></span><br><span class="line">	<span class="comment">// For example, a slice of type []T is convertible to *[N]T,</span></span><br><span class="line">	<span class="comment">// but the conversion will panic if its length is less than N.</span></span><br><span class="line">	ConvertibleTo(u Type) <span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Comparable reports whether values of this type are comparable.</span></span><br><span class="line">	<span class="comment">// Even if Comparable returns true, the comparison may still panic.</span></span><br><span class="line">	<span class="comment">// For example, values of interface type are comparable,</span></span><br><span class="line">	<span class="comment">// but the comparison will panic if their dynamic type is not comparable.</span></span><br><span class="line">	Comparable() <span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Methods applicable only to some types, depending on Kind.</span></span><br><span class="line">	<span class="comment">// The methods allowed for each kind are:</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//	Int*, Uint*, Float*, Complex*: Bits</span></span><br><span class="line">	<span class="comment">//	Array: Elem, Len</span></span><br><span class="line">	<span class="comment">//	Chan: ChanDir, Elem</span></span><br><span class="line">	<span class="comment">//	Func: In, NumIn, Out, NumOut, IsVariadic.</span></span><br><span class="line">	<span class="comment">//	Map: Key, Elem</span></span><br><span class="line">	<span class="comment">//	Ptr: Elem</span></span><br><span class="line">	<span class="comment">//	Slice: Elem</span></span><br><span class="line">	<span class="comment">//	Struct: Field, FieldByIndex, FieldByName, FieldByNameFunc, NumField</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Bits returns the size of the type in bits.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not one of the</span></span><br><span class="line">	<span class="comment">// sized or unsized Int, Uint, Float, or Complex kinds.</span></span><br><span class="line">	Bits() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// ChanDir returns a channel type&#x27;s direction.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Chan.</span></span><br><span class="line">	ChanDir() ChanDir</span><br><span class="line"></span><br><span class="line">	<span class="comment">// IsVariadic reports whether a function type&#x27;s final input parameter</span></span><br><span class="line">	<span class="comment">// is a &quot;...&quot; parameter. If so, t.In(t.NumIn() - 1) returns the parameter&#x27;s</span></span><br><span class="line">	<span class="comment">// implicit actual type []T.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// For concreteness, if t represents func(x int, y ... float64), then</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//	t.NumIn() == 2</span></span><br><span class="line">	<span class="comment">//	t.In(0) is the reflect.Type for &quot;int&quot;</span></span><br><span class="line">	<span class="comment">//	t.In(1) is the reflect.Type for &quot;[]float64&quot;</span></span><br><span class="line">	<span class="comment">//	t.IsVariadic() == true</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// IsVariadic panics if the type&#x27;s Kind is not Func.</span></span><br><span class="line">	IsVariadic() <span class="type">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Elem returns a type&#x27;s element type.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Array, Chan, Map, Ptr, or Slice.</span></span><br><span class="line">	Elem() Type</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Field returns a struct type&#x27;s i&#x27;th field.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Struct.</span></span><br><span class="line">	<span class="comment">// It panics if i is not in the range [0, NumField()).</span></span><br><span class="line">	Field(i <span class="type">int</span>) StructField</span><br><span class="line"></span><br><span class="line">	<span class="comment">// FieldByIndex returns the nested field corresponding</span></span><br><span class="line">	<span class="comment">// to the index sequence. It is equivalent to calling Field</span></span><br><span class="line">	<span class="comment">// successively for each index i.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Struct.</span></span><br><span class="line">	FieldByIndex(index []<span class="type">int</span>) StructField</span><br><span class="line"></span><br><span class="line">	<span class="comment">// FieldByName returns the struct field with the given name</span></span><br><span class="line">	<span class="comment">// and a boolean indicating if the field was found.</span></span><br><span class="line">	FieldByName(name <span class="type">string</span>) (StructField, <span class="type">bool</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// FieldByNameFunc returns the struct field with a name</span></span><br><span class="line">	<span class="comment">// that satisfies the match function and a boolean indicating if</span></span><br><span class="line">	<span class="comment">// the field was found.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// FieldByNameFunc considers the fields in the struct itself</span></span><br><span class="line">	<span class="comment">// and then the fields in any embedded structs, in breadth first order,</span></span><br><span class="line">	<span class="comment">// stopping at the shallowest nesting depth containing one or more</span></span><br><span class="line">	<span class="comment">// fields satisfying the match function. If multiple fields at that depth</span></span><br><span class="line">	<span class="comment">// satisfy the match function, they cancel each other</span></span><br><span class="line">	<span class="comment">// and FieldByNameFunc returns no match.</span></span><br><span class="line">	<span class="comment">// This behavior mirrors Go&#x27;s handling of name lookup in</span></span><br><span class="line">	<span class="comment">// structs containing embedded fields.</span></span><br><span class="line">	FieldByNameFunc(match <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">string</span>)</span></span> <span class="type">bool</span>) (StructField, <span class="type">bool</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// In returns the type of a function type&#x27;s i&#x27;th input parameter.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Func.</span></span><br><span class="line">	<span class="comment">// It panics if i is not in the range [0, NumIn()).</span></span><br><span class="line">	In(i <span class="type">int</span>) Type</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Key returns a map type&#x27;s key type.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Map.</span></span><br><span class="line">	Key() Type</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Len returns an array type&#x27;s length.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Array.</span></span><br><span class="line">	Len() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// NumField returns a struct type&#x27;s field count.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Struct.</span></span><br><span class="line">	NumField() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// NumIn returns a function type&#x27;s input parameter count.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Func.</span></span><br><span class="line">	NumIn() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// NumOut returns a function type&#x27;s output parameter count.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Func.</span></span><br><span class="line">	NumOut() <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Out returns the type of a function type&#x27;s i&#x27;th output parameter.</span></span><br><span class="line">	<span class="comment">// It panics if the type&#x27;s Kind is not Func.</span></span><br><span class="line">	<span class="comment">// It panics if i is not in the range [0, NumOut()).</span></span><br><span class="line">	Out(i <span class="type">int</span>) Type</span><br><span class="line"></span><br><span class="line">	common() *rtype</span><br><span class="line">	uncommon() *uncommonType</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-2-2-Type接口的Name和Kind方法"><a href="#2-2-2-Type接口的Name和Kind方法" class="headerlink" title="2.2.2 Type接口的Name和Kind方法"></a>2.2.2 Type接口的Name和Kind方法</h5><blockquote>
<ul>
<li>Name方法<ul>
<li>对于已定义的类型，Name返回该类型在其包中的名称</li>
<li>对于其他（未定义的）类型，它返回空字符串</li>
<li>Name方法自身返回值是<code>string</code>类型</li>
</ul>
</li>
<li>Kind方法<ul>
<li>Kind返回该类型的具体种类</li>
<li>Kind方法自身返回值<code>Kind</code>类型，</li>
<li><code>Kind</code>类型的注释解释：<ul>
<li>Kind代表一个类型所代表的特定种类。</li>
<li>零的Kind不是一个有效的类型。</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Name方法源码</span></span><br><span class="line"><span class="comment">// Name returns the type&#x27;s name within its package for a defined type.</span></span><br><span class="line"><span class="comment">// For other (non-defined) types it returns the empty string.</span></span><br><span class="line">Name() <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Kind方法源码</span></span><br><span class="line"><span class="comment">// Kind returns the specific kind of this type.</span></span><br><span class="line">Kind() Kind</span><br><span class="line"></span><br><span class="line"><span class="comment">// Kind类型源码</span></span><br><span class="line"><span class="comment">// A Kind represents the specific kind of type that a Type represents.</span></span><br><span class="line"><span class="comment">// The zero Kind is not a valid kind.</span></span><br><span class="line"><span class="keyword">type</span> Kind <span class="type">uint</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>下面是示例代码</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectType</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	v := reflect.TypeOf(x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;type:%v &lt;==&gt; kind:%v\n&quot;</span>, v.Name(), v.Kind())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">34</span></span><br><span class="line">	reflectType(a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	reflectType(b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> c = <span class="literal">true</span></span><br><span class="line">	reflectType(c)</span><br><span class="line"></span><br><span class="line">	d1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	d1 = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">	reflectType(d1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">type</span> e <span class="keyword">struct</span>&#123;</span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">	&#125;</span><br><span class="line">	e1 := e&#123;</span><br><span class="line">		name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	reflectType(e1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从下面的运行结果看出， 结构体的类型是e类型，种类是struct结构体</p>
<p>Go语言的反射中像数组、切片、Map、指针等类型的变量，它们的<code>.Name()</code>都是返回<code>空</code>。</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220328224924305.png" class="" title="image-20220328224924305">

<h4 id="2-3-reflect-ValueOf"><a href="#2-3-reflect-ValueOf" class="headerlink" title="2.3 reflect.ValueOf()"></a>2.3 reflect.ValueOf()</h4><blockquote>
<p><code>reflect.ValueOf()</code>返回的是<code>reflect.Value</code>类型，其中包含了原始值的值信息</p>
<p><code>reflect.Value</code>与原始值之间可以互相转换。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reflectType</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">	v := reflect.ValueOf(x)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;value:%+v &lt;==&gt; kind:%v\n&quot;</span>, v, v.Kind())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">34</span></span><br><span class="line">	reflectType(a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b = <span class="string">&quot;sam&quot;</span></span><br><span class="line">	reflectType(b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> c = <span class="literal">true</span></span><br><span class="line">	reflectType(c)</span><br><span class="line"></span><br><span class="line">	d1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">	d1 = []<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">	reflectType(d1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">type</span> e <span class="keyword">struct</span>&#123;</span><br><span class="line">		name <span class="type">string</span></span><br><span class="line">	&#125;</span><br><span class="line">	e1 := e&#123;</span><br><span class="line">		name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	reflectType(e1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220328225337645.png" class="" title="image-20220328225337645">

<h4 id="2-4-reflect-TypeOf"><a href="#2-4-reflect-TypeOf" class="headerlink" title="2.4 reflect.TypeOf()"></a>2.4 reflect.TypeOf()</h4><blockquote>
<p>任意对象可以通过<code>reflect.TypeOf()</code>获得反射对象信息</p>
<p>如果传入的的类型是结构体，可以通过反射值对象<code>reflect.TypeOf</code>的两个方法来获取结构体信息</p>
<ul>
<li><code>NumField()</code>方法：返回结构体成员字段数量<ul>
<li>所以可以用来统计一个结构体里有多少个字段</li>
</ul>
</li>
<li><code>Field()</code>方法：根据索引，返回索引对应的结构体字段的信息<ul>
<li>可以获取一个结构体的一个字段的具体详细信息，比如Name，tag， index等</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># Field() 方法源代码，根据索引，返回索引对应的结构体字段的信息，返回值是StructField类型</span><br><span class="line"><span class="comment">// Field returns the i&#x27;th struct field.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *structType)</span></span> Field(i <span class="type">int</span>) (f StructField) &#123;</span><br><span class="line">	<span class="keyword">if</span> i &lt; <span class="number">0</span> || i &gt;= <span class="built_in">len</span>(t.fields) &#123;</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;reflect: Field index out of bounds&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	p := &amp;t.fields[i]</span><br><span class="line">	f.Type = toType(p.typ)</span><br><span class="line">	f.Name = p.name.name()</span><br><span class="line">	f.Anonymous = p.embedded()</span><br><span class="line">	<span class="keyword">if</span> !p.name.isExported() &#123;</span><br><span class="line">		f.PkgPath = t.pkgPath.name()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> tag := p.name.tag(); tag != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		f.Tag = StructTag(tag)</span><br><span class="line">	&#125;</span><br><span class="line">	f.Offset = p.offset()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// NOTE(rsc): This is the only allocation in the interface</span></span><br><span class="line">	<span class="comment">// presented by a reflect.Type. It would be nice to avoid,</span></span><br><span class="line">	<span class="comment">// at least in the common cases, but we need to make sure</span></span><br><span class="line">	<span class="comment">// that misbehaving clients of reflect cannot affect other</span></span><br><span class="line">	<span class="comment">// uses of reflect. One possibility is CL 5371098, but we</span></span><br><span class="line">	<span class="comment">// postponed that ugliness until there is a demonstrated</span></span><br><span class="line">	<span class="comment">// need for the performance. This is issue 2320.</span></span><br><span class="line">	f.Index = []<span class="type">int</span>&#123;i&#125;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// StructField是一个结构体，可以看到这个结构体里的源代码的字段</span></span><br><span class="line"><span class="comment">// A StructField describes a single field in a struct.</span></span><br><span class="line"><span class="keyword">type</span> StructField <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// Name is the field name.</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// PkgPath is the package path that qualifies a lower case (unexported)</span></span><br><span class="line">	<span class="comment">// field name. It is empty for upper case (exported) field names.</span></span><br><span class="line">	<span class="comment">// See https://golang.org/ref/spec#Uniqueness_of_identifiers</span></span><br><span class="line">	PkgPath <span class="type">string</span></span><br><span class="line"></span><br><span class="line">	Type      Type      <span class="comment">// field type 字段类型</span></span><br><span class="line">	Tag       StructTag <span class="comment">// field tag string 字段标签</span></span><br><span class="line">	Offset    <span class="type">uintptr</span>   <span class="comment">// offset within struct, in bytes 字段在结构体中的字节偏移量</span></span><br><span class="line">	Index     []<span class="type">int</span>     <span class="comment">// index sequence for Type.FieldByIndex 用于Type.FieldByIndex时的索引切片</span></span><br><span class="line">	Anonymous <span class="type">bool</span>      <span class="comment">// is an embedded field 是否匿名字段</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NumField() 是接口方法</span></span><br><span class="line"><span class="comment">// NumField returns a struct type&#x27;s field count.</span></span><br><span class="line"><span class="comment">// It panics if the type&#x27;s Kind is not Struct.</span></span><br><span class="line">NumField() <span class="type">int</span></span><br></pre></td></tr></table></figure>

<h4 id="2-5-结构体反射示例"><a href="#2-5-结构体反射示例" class="headerlink" title="2.5 结构体反射示例"></a>2.5 结构体反射示例</h4><blockquote>
<p>for循环遍历结构体所有字段信息，返回结构体成员字段数量</p>
<ul>
<li><p>for循环会获取结构体所有字段的信息</p>
</li>
<li><p>当然也可以根据字段名获取指定字段信息</p>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`liu:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`liu:&quot;name&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := person&#123;</span><br><span class="line">		Name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">		Age: <span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 先生成一个reflect的Type类型，才可以调用Field和NumField方法</span></span><br><span class="line">	t := reflect.TypeOf(p1)</span><br><span class="line">	<span class="comment">// t type:person 	 t.kind:struct</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;t type:%v \t t.kind:%v\n\n&quot;</span>, t.Name(), t.Kind())</span><br><span class="line"></span><br><span class="line">	<span class="comment">// for循环遍历结构体所有字段信息，返回结构体成员字段数量</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t.NumField(); i++&#123;</span><br><span class="line">		<span class="comment">// Field方法传入索引，返回索引对应的结构体字段的信息，比如Name， Type， Tag等</span></span><br><span class="line">		field := t.Field(i)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;field:%v\n&quot;</span>, field)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 字段的name就是结构体定义的首字母字段名</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;name:%v\n&quot;</span>, field.Name)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 字段的Type就是结构体定义的字段的类型</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;type:%v\n&quot;</span>, field.Type)</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 这里的Tag是我们自己在结构体里定义的liu，使用Get通过tag名获取tag指向的值</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;tag:%v\n\n&quot;</span>, field.Tag.Get(<span class="string">&quot;liu&quot;</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220328232318252.png" class="" title="image-20220328232318252">

<h4 id="2-6-结构体反射tag"><a href="#2-6-结构体反射tag" class="headerlink" title="2.6 结构体反射tag"></a>2.6 结构体反射<code>tag</code></h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/golang/go/wiki/Well-known-struct-tags">https://github.com/golang/go/wiki/Well-known-struct-tags</a></p>
<p>通过字段名获取指定结构体字段信息，可以根据字段名，单独获取字段信息，更灵活一些</p>
<p>使用到了反射值对象（<code>reflect.Type</code>）的<code>FieldByName</code>方法</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FieldByName源码也是接口方法，需要统一实现，传入了字段名，然后返回了结构体字段类型和布尔类型，结构体字段类型就和上面的for循环一样，可以获取结构字段的详细信息了，比如name，type，tag等</span></span><br><span class="line"><span class="comment">// FieldByName returns the struct field with the given name</span></span><br><span class="line"><span class="comment">// and a boolean indicating if the field was found.</span></span><br><span class="line">FieldByName(name <span class="type">string</span>) (StructField, <span class="type">bool</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span>&#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`liu:&quot;name&quot;`</span></span><br><span class="line">	Age <span class="type">int</span> <span class="string">`liu:&quot;name&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := person&#123;</span><br><span class="line">		Name: <span class="string">&quot;sam&quot;</span>,</span><br><span class="line">		Age: <span class="number">19</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 先生成一个reflect的Type类型，才可以调用Field和NumField方法</span></span><br><span class="line">	t := reflect.TypeOf(p1)</span><br><span class="line">	<span class="comment">// t type:person 	 t.kind:struct</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;t type:%v \t t.kind:%v\n\n&quot;</span>, t.Name(), t.Kind())</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 根据字段名，单独获取字段信息, 更灵活</span></span><br><span class="line">	field, ok := t.FieldByName(<span class="string">&quot;Name&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fieldObj:%v  ok:%v\n&quot;</span>, field, ok)</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		<span class="comment">// 字段的name就是结构体定义的首字母字段名</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;name:%v\n&quot;</span>, field.Name)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 字段的Type就是结构体定义的字段的类型</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;type:%v\n&quot;</span>, field.Type)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 这里的Tag是我们自己在结构体里定义的liu，使用Get通过tag名获取真正的tag的值</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;tag:%v\n\n&quot;</span>, field.Tag.Get(<span class="string">&quot;liu&quot;</span>))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十一、包"><a href="#十一、包" class="headerlink" title="十一、包"></a>十一、包</h2><blockquote>
<p>Go语言中支持模块化的开发理念，在Go语言中使用<code>包（package）</code>来支持代码模块化和代码复用。</p>
<ul>
<li><p>一个包是由一个或多个Go源码文件（.go结尾的文件）组成，是一种高级的代码复用方案</p>
</li>
<li><p>Go语言为我们提供了很多内置包，如<code>fmt</code>、<code>os</code>、<code>io</code>等。</p>
</li>
</ul>
</blockquote>
<h3 id="1、包的组成"><a href="#1、包的组成" class="headerlink" title="1、包的组成"></a>1、包的组成</h3><blockquote>
<p>包类型大致可以分为<code>自定义包</code>和<code>main</code>两类</p>
<ul>
<li><code>自定义包</code>：表示这个包是自定义的包，包含一单独的功能，比如注册，登录等</li>
<li><code>main</code>：表示是一个可以执行，可以编译成<code>可执行文件</code>的包</li>
</ul>
</blockquote>
<h4 id="1-2-自定义包"><a href="#1-2-自定义包" class="headerlink" title="1.2 自定义包"></a>1.2 自定义包</h4><blockquote>
<p>可以根据自己的需要创建自定义包</p>
<ul>
<li>一个包可以简单理解为一个存放<code>*.go</code>文件的文件夹<ul>
<li>该文件夹下面的所有<code>.go</code>文件都要在非注释的第一行添加如下声明，声明该文件归属的包</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> packagename</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">其中：</span></span><br><span class="line"><span class="comment">	- package：声明包的关键字</span></span><br><span class="line"><span class="comment">	- packagename：包名，可以不与文件夹的名称一致，不能包含 `-` 符号，最好与其实现的功能相对应</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-包可见性"><a href="#1-2-包可见性" class="headerlink" title="1.2 包可见性"></a>1.2 包可见性</h4><blockquote>
<p>在同一个包内部声明的标识符都位于同一个命名空间下</p>
<ul>
<li>所以当有大于1个<code>*.go</code>文件同属于一个包时，这个包里的<code>*.go</code>文件可以互相访问里面的函数、变量、方法等，就相当于是在同一个内存地址里面一样，直接引用就可以</li>
</ul>
</blockquote>
<blockquote>
<p>在<code>不同的包</code>内部声明的标识符就属于<code>不同的命名空间</code></p>
<ul>
<li><p>如果想让一个包中的标识符（如变量、常量、类型、函数等）能被<code>外部的包</code>使用，那么标识符必须是对外可见的（public）</p>
</li>
<li><p>在Go语言中是通过<code>标识符的首字母大/小写来控制标识符</code>的<code>对外可见（public）/不可见（private）</code>的</p>
<ul>
<li>在一个包内部只有<code>首字母大写的标识符</code>才是<code>对外可见</code>的。</li>
</ul>
</li>
<li><p>想要在包的外部使用包内部的标识符就需要添加包名前缀</p>
<ul>
<li>例如<code>fmt.Println(&quot;Hi go~&quot;)</code>，就是指调用<code>fmt</code>包中的<code>Println</code>函数</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	定义一个名为demo_test的包，在其中定义了若干标识符。在另外一个包中并不是所有的标识符都能通过demo_test.前缀访问到，因为只有那些首字母是大写的标识符才是对外可见的</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> demo_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 包级别标识符的可见性</span></span><br><span class="line"><span class="comment">// num 定义一个全局整型变量</span></span><br><span class="line"><span class="comment">// 首字母小写，对外不可见(只能在当前包内使用)</span></span><br><span class="line"><span class="keyword">var</span> il = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Mode 定义一个常量</span></span><br><span class="line"><span class="comment">// 首字母大写，对外可见(可在其它包中使用)</span></span><br><span class="line"><span class="keyword">const</span> Mode = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// person 定义一个代表人的结构体</span></span><br><span class="line"><span class="comment">// 首字母小写，对外不可见(只能在当前包内使用)</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首字母大写，对外可见(可在其它包中使用)</span></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="type">string</span> <span class="comment">// 可在包外访问的方法</span></span><br><span class="line">	class <span class="type">string</span> <span class="comment">// 仅限包内访问的字段</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add 返回两个整数和的函数</span></span><br><span class="line"><span class="comment">// 首字母大写，对外可见(可在其它包中使用)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sayHi 打招呼的函数</span></span><br><span class="line"><span class="comment">// 首字母小写，对外不可见(只能在当前包内使用)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> myName = <span class="string">&quot;七米&quot;</span> <span class="comment">// 函数局部变量，只能在当前函数内使用</span></span><br><span class="line">	fmt.Println(myName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-自定义包注意事项"><a href="#1-3-自定义包注意事项" class="headerlink" title="1.3 自定义包注意事项"></a>1.3 自定义包注意事项</h4><blockquote>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://studygolang.com/articles/7165">https://studygolang.com/articles/7165</a></p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/5394.html">http://c.biancheng.net/view/5394.html</a></p>
</blockquote>
<blockquote>
<p>注意:</p>
<ul>
<li>一个文件夹下面直接包含的文件只能归属一个包，同一个包的文件不能存在于多个文件夹下<ul>
<li>也就是说一个文件夹只能有一个包，同一个包的文件不能分散与多个文件夹中</li>
</ul>
</li>
<li>包名一般是小写的，使用一个简短且有意义的名称</li>
<li>自定义包名常规都和包含<code>*.go</code>文件的文件夹名字一致<ul>
<li>也可以不和文件夹的名字一样，可以自己起一个包名字，然后所有<code>*.go</code>文件都声明为该包名<ul>
<li>文件夹名可以和该包名不一致，但<code>*.go</code>文件中使用的包名必须要和自定义包名一致</li>
</ul>
</li>
<li>包名不能包含<code>-</code>符号，需要符合标识符定义规则</li>
</ul>
</li>
<li>包一般使用域名作为目录名称，这样能保证包名的唯一性<ul>
<li>比如 GitHub 项目的包一般会放到<code>GOPATH/src/github.com/userName/projectName </code>目录下</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-4-包禁止循环引用"><a href="#1-4-包禁止循环引用" class="headerlink" title="1.4 包禁止循环引用"></a>1.4 包禁止循环引用</h4><blockquote>
<p><code>go</code>语言中禁止包的循环导入</p>
<p><code>jim</code>包和<code>kop</code>包互相引用，最后<code>main</code>包导入<code>jim</code>包、<code>kop</code>包后运行提示<code>import cycle not allowed</code></p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220215132419145.png" class="" title="image-20220215132419145">

<h4 id="1-5-main包"><a href="#1-5-main包" class="headerlink" title="1.5 main包"></a>1.5 main包</h4><blockquote>
<p>包名为<code>main</code>的包是应用程序的入口包，这种包编译后会得到一个可执行文件</p>
<p>而编译不包含<code>main</code>包的源代码则不会得到可执行文件</p>
</blockquote>
<h4 id="1-6-包的导入"><a href="#1-6-包的导入" class="headerlink" title="1.6 包的导入"></a>1.6 包的导入</h4><blockquote>
<p>要在代码中引用其他包的内容，需要使用<code>import</code>关键字导入使用的包</p>
<p>注意事项：</p>
<ul>
<li><code>import</code>导入语句通常放在源码文件开头包声明语句的下面</li>
<li>导入的包名需要使用双引号包裹起来</li>
<li>导入的包名是从<code>GOPATH/src/ </code>后开始计算的，使用<code>/ </code>进行路径分隔</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 具体语法如下：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;包的路径&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="1-6-1-包导入案例讲解"><a href="#1-6-1-包导入案例讲解" class="headerlink" title="1.6.1 包导入案例讲解"></a>1.6.1 包导入案例讲解</h5><blockquote>
<p>导入的包名是从<code>GOPATH/src/ </code>后开始计算的</p>
<p>那么当<code>day09</code>里的<code>import_demo.go</code>需要导入下图中的<code>day08</code>包里有两个<code>*.go</code>文件时，在<code>import_demo.go</code>中写的导入路径就需要从<code>src</code>下的<code>code.zinly.com</code>开始</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214174513405.png" class="" title="image-20220214174513405">

<blockquote>
<p>day08文件夹中的<code>cal_data.go</code>代码</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// day08里的cal_data.go文件</span></span><br><span class="line"><span class="keyword">package</span> jim</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddVal</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 首字母小写，表示别的包不可以导入使用</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name 	<span class="type">string</span></span><br><span class="line">	age 	<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首字母大写，表示别的包可以导入使用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewPerson</span><span class="params">(name <span class="type">string</span>, age <span class="type">int</span>)</span></span> person &#123;</span><br><span class="line">	<span class="keyword">return</span> person &#123;</span><br><span class="line">		name: name,</span><br><span class="line">		 age: age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首字母大写，表示别的包可以导入使用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *person)</span></span> ShowInfo() &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;name：%v\t age:%v\n&quot;</span>, p.name, p.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>day08文件夹中的<code>hibi.go</code>代码</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// day08里的hibi.go</span></span><br><span class="line"><span class="keyword">package</span> jim</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name <span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 首字母大写，表示别的包可以导入使用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ShowAge</span><span class="params">()</span></span> &#123;</span><br><span class="line">	name := <span class="string">&quot;hibi&quot;</span></span><br><span class="line">	f.Printf(<span class="string">&quot;name=%v\n&quot;</span>, name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>day09文件夹中的<code>import_demo.go</code>代码</p>
<p>这个导入代码里导入day08里的所有go文件，导入路径需要从src下的目录开始写，jimx是导入路径的别名，建议与导入的包名一致，这样也方便查找</p>
<ul>
<li>导入路径没有别名，那么在下面代码引用时，用已导入的包的包名来引用，也就是导入的代码里的包名来引用所有的方法、函数、变量等</li>
<li>导入路径有别名，那么在下面代码引用时，用声明的包别名来引用所有的方法、函数、变量等</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// day09文件夹中的`import_demo.go`文件</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="comment">// 导入day08里的所有go文件，需要从src下的目录开始写，jimx是导入的别名，建议与导入的包名一致，这样也方便查找</span></span><br><span class="line">	 jimx <span class="string">&quot;code.zinly.com/goLearning/day08&quot;</span>  </span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ret := jimx.AddVal(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ret=%v\n&quot;</span>, ret)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实例化结构体</span></span><br><span class="line">	p1 := jimx.NewPerson(<span class="string">&quot;sam&quot;</span>, <span class="number">12</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p1=%v\n&quot;</span>, p1)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 调用实例化的方法，首字母也必须大写</span></span><br><span class="line">	p1.ShowInfo()</span><br><span class="line">	</span><br><span class="line">	jimx.ShowAge()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面代码可以看出，</p>
<ul>
<li><p><code>day09</code>文件夹导入了<code>day08</code>这个包，并且<code>day08</code>这个文件夹里所有<code>*.go</code>文件声明的包名没有和<code>day08</code>这个文件名字<code>day08</code>一样，而是叫<code>jim</code>，这里也就可以看出<code>包名</code>可以自定义</p>
</li>
<li><p><code>day08</code>里的所有<code>*.go</code>文件只有首字母大写的方法、变量等标识符才可以被<code>day09</code>里引用</p>
</li>
<li><p><code>day08</code>里的所有<code>*.go</code>文件的包名都必须一致，否则就会报错，从下图可以看出：</p>
<ul>
<li>day08文件中当<code>cal_data.go</code>和<code>bal_data_bak.go</code>声明为<code>jims</code>包</li>
<li>day08文件中当<code>hibi.go</code>声明为<code>jim</code>包</li>
<li>在<code>day09</code>的<code>import_demo.go</code>导入后执行，报错提示了在<code>day08</code>文件中<ul>
<li><code>found packages jims (bal_data_bak.go) and jim (hibi.go)</code>表示发现了2个包在<code>bal_data_bak.go</code>和<code>hibi.go</code>文件中</li>
<li>而且在<code>import_demo.go</code>即使将调用<code>Him()</code>写到很下面，仍然会优先检测<code>bal_data_bak.go</code>文件，而不是<code>cal_data.go</code>文件，说明导入时，是按目标包的文件名字母的顺序进行导入的</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214182104927.png" class="" title="image-20220214182104927">

<h4 id="1-7-匿名导包"><a href="#1-7-匿名导包" class="headerlink" title="1.7 匿名导包"></a>1.7 匿名导包</h4><blockquote>
<p>如果只希望导入包，而不使用包内部的数据，可以使用匿名导入包</p>
<p>后面学习数据库时才会用到，表示只会执行包的<code>init</code>函数</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名导包，在导入包的路径前面加一个下划线即可</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_  <span class="string">&quot;包的路径&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="1-8-init函数"><a href="#1-8-init函数" class="headerlink" title="1.8 init函数"></a>1.8 init函数</h4><blockquote>
<p><code>init函数</code>是包的初始化函数</p>
<p>init函数的特点：</p>
<ul>
<li>init函数的定义没有入参也没有出参</li>
<li>一个源文件可以有<code>任意个</code>init函数</li>
<li>是在程序运行时自动被调用执行，不能在代码中主动调用它</li>
<li>当程序启动的时候，init函数会按照它们<code>声明的顺序自动执行</code></li>
<li>一个包的初始化过程是按照代码中引入的顺序来进行的，所有在该包中声明的<code>init</code>函数都将被串行调用并且仅调用执行一次<ul>
<li>例子：在gin项目中，我们通常使用一个main.go启动我们的服务，但往往我们不止一个main.go文件，还会有其他包、其它*.go文件，最终都会通过导入或封装到main.go中来统一启动，如果其他*.go文件中有init函数，那init函数一定会在main.go启动时被执行，如果其它文件的init函数中有结构体的初始化、读取配置文件，那就会出无法读取的情况，因为init函数执行肯定是在优先于读取配置文件的函数的，这一点就特别注意</li>
</ul>
</li>
<li>每一个包初始化的时候都是先执行依赖的包中声明的<code>init</code>函数再执行当前包中声明的<code>init</code>函数，确保在程序的<code>main</code>函数开始执行时所有的依赖包都已初始化完成</li>
</ul>
</blockquote>
<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv12167787/">https://www.bilibili.com/read/cv12167787/</a></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// init函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214224358662.png" class="" title="image-20220214224358662">

<h5 id="1-8-1-导包时init函数执行顺序"><a href="#1-8-1-导包时init函数执行顺序" class="headerlink" title="1.8.1 导包时init函数执行顺序"></a>1.8.1 导包时init函数执行顺序</h5><blockquote>
<p>从下图可以看出init函数导入包时的顺序</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214231144093.png" class="" title="image-20220214231144093">

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220214232204476.png" class="" title="image-20220214232204476">

<h4 id="1-9-包的运行注意事项"><a href="#1-9-包的运行注意事项" class="headerlink" title="1.9 包的运行注意事项"></a>1.9 包的运行注意事项</h4><blockquote>
<p>当一个main包里有多个<code>*.go</code>文件时，而且文件之间有互相的依赖引用，当运行时，不能运行单独的文件</p>
<ul>
<li>单独运行一个<code>*.go</code>文件，因为引用的函数、变量在内存中并没有，所以会提示<code>undefined</code>的错误</li>
<li>所以需要以包的形式运行，也就是引导了哪些文件，<code>go run </code>时就跟上所有的<code>*.go</code>文件，这样才可以找到对应引用的函数、变量</li>
</ul>
</blockquote>
<h3 id="2、go包管理"><a href="#2、go包管理" class="headerlink" title="2、go包管理"></a>2、go包管理</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/330962571">https://zhuanlan.zhihu.com/p/330962571</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wongbingming/p/12941021.html">https://www.cnblogs.com/wongbingming/p/12941021.html</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.google.cn/doc/tutorial/create-module">https://golang.google.cn/doc/tutorial/create-module</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.google.cn/doc/modules/managing-dependencies#naming_module">https://golang.google.cn/doc/modules/managing-dependencies#naming_module</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.google.cn/doc/tutorial/getting-started">https://golang.google.cn/doc/tutorial/getting-started</a></p>
<p><a target="_blank" rel="noopener" href="https://golang.google.cn/doc/modules/gomod-ref">https://golang.google.cn/doc/modules/gomod-ref</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/04dd0d386df2">https://www.jianshu.com/p/04dd0d386df2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wongbingming/p/12941021.html">https://www.cnblogs.com/wongbingming/p/12941021.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011069013/article/details/110114319">https://blog.csdn.net/u011069013/article/details/110114319</a></p>
</blockquote>
<h4 id="2-1-go-module历史"><a href="#2-1-go-module历史" class="headerlink" title="2.1 go module历史"></a>2.1 go module历史</h4><blockquote>
<ul>
<li>在go1.11版本之前，使用自定义的包，需要将项目放到gopath目录下</li>
<li>go1.1之后的版本则不用手动配置<ul>
<li>使用<code>go mod</code>管理项目依赖</li>
<li>也不需要将项目放到gopath目录下</li>
<li>go1.13+以后可以彻底不需要gopath</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="2-2-go-module使用"><a href="#2-2-go-module使用" class="headerlink" title="2.2 go module使用"></a>2.2 go module使用</h4><h5 id="2-2-1-go-mod初始化项目"><a href="#2-2-1-go-mod初始化项目" class="headerlink" title="2.2.1 go mod初始化项目"></a>2.2.1 go mod初始化项目</h5><blockquote>
<p>在开发项目时，可以使用<code>go mod</code>命令生成一个<code>go.mod</code>文件管理项目的依赖</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在项目目录下执行下面命令</span></span><br><span class="line">go mod init example.com/studygo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上述命令会在项目目录下生成一个go.mod文件来管理项目依赖</span></span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220807230007597.png" class="" title="image-20220807230007597">

<h5 id="2-2-2-调用本地包"><a href="#2-2-2-调用本地包" class="headerlink" title="2.2.2 调用本地包"></a>2.2.2 调用本地包</h5><blockquote>
<p>在studygo项目中新建目录calc包，calc里面放了两个公共函数，<code>Add</code>和<code>Sub</code></p>
<p>在studygo中新建main.go文件，调用calc中的Add和Sub函数，导入时需要从<code>go.mod</code>中定义的<code>module</code>名开始写，导入以后，就可以本地包的文件夹名点的方式来调用本地包里的方法、结构体、常量等</p>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220807230934626.png" class="" title="image-20220807230934626">

<h5 id="2-2-3-go-mod常用命令"><a href="#2-2-3-go-mod常用命令" class="headerlink" title="2.2.3 go mod常用命令"></a>2.2.3 go mod常用命令</h5><blockquote>
<p>下面是go mod的命令</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">download    download modules to local cache -- 下载依赖的module到本地的gopath的pkg对应包里面</span><br><span class="line">edit        edit go.mod from tools or scripts -- 编辑go.mod文件</span><br><span class="line">graph       print module requirement graph -- 打印模块依赖图，前提是调用了第三方包</span><br><span class="line">init        initialize new module in current directory -- 创建一个新的module，创建go.mod文件</span><br><span class="line">tidy        add missing and remove unused modules -- 增加丢失的module，去掉未使用的module</span><br><span class="line">vendor      make vendored copy of dependencies -- 将依赖复制到vendor下</span><br><span class="line">verify      verify dependencies have expected content -- 检查依赖，检查下载的第三方库有无本地修改，有修改返回非0，否则会验证成功</span><br><span class="line">why         explain why packages or modules are needed -- 解释为什么需要依赖</span><br></pre></td></tr></table></figure>

<h5 id="2-2-4-调用第三方包"><a href="#2-2-4-调用第三方包" class="headerlink" title="2.2.4 调用第三方包"></a>2.2.4 调用第三方包</h5><blockquote>
<p>调用第三方包需要两步</p>
<ul>
<li>第一步：先写调用的代码</li>
<li>第二步：go mod tidy增加第三方包</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220807233216662.png" class="" title="image-20220807233216662">

<h4 id="2-3-go-mod文件"><a href="#2-3-go-mod文件" class="headerlink" title="2.3 go.mod文件"></a>2.3 go.mod文件</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903954879348750">https://juejin.cn/post/6844903954879348750</a></p>
</blockquote>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module example.com/foobar</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.13</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    example.com/apple v0<span class="number">.1</span><span class="number">.2</span></span><br><span class="line">    example.com/banana v1<span class="number">.2</span><span class="number">.3</span></span><br><span class="line">    example.com/banana/v2 v2<span class="number">.3</span><span class="number">.4</span></span><br><span class="line">    example.com/pineapple v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20190924185754</span><span class="number">-1</span>b0db40df49a</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">exclude example.com/banana v1<span class="number">.2</span><span class="number">.4</span></span><br><span class="line">replace example.com/apple v0<span class="number">.1</span><span class="number">.2</span> =&gt; example.com/rda v0<span class="number">.1</span><span class="number">.0</span> </span><br><span class="line">replace example.com/banana =&gt; example.com/hugebanana</span><br></pre></td></tr></table></figure>

<blockquote>
<p>go.mod 是启用了 Go moduels 的项目所必须的最重要的文件，它描述了当前项目（也就是当前模块）的元信息，每一行都以一个动词开头，目前有以下 5 个动词:</p>
<ul>
<li>module：用于定义当前项目的模块路径。</li>
<li>go：用于设置预期的 Go 版本。</li>
<li>require：用于设置一个特定的模块版本。</li>
<li>exclude：用于从使用中排除一个特定的模块版本。</li>
<li>replace：用于将一个模块版本替换为另外一个模块版本。</li>
</ul>
</blockquote>
<h4 id="2-4-go-sum文件"><a href="#2-4-go-sum文件" class="headerlink" title="2.4 go.sum文件"></a>2.4 go.sum文件</h4><blockquote>
<p>go.sum 是类似于比如 dep 的 Gopkg.lock 的一类文件，它详细罗列了当前项目直接或间接依赖的所有模块版本，并写明了哪些模块版本的 SHA-256 哈希值以备 Go 在今后的操作中保证项目所依赖的那些模块版本不会被篡改。</p>
</blockquote>
<h4 id="2-5-GO111MODULE"><a href="#2-5-GO111MODULE" class="headerlink" title="2.5 GO111MODULE"></a>2.5 GO111MODULE</h4><blockquote>
<p><code>GO111MODULE</code>环境变量主要是 Go modules 的开关，主要有以下参数：</p>
<ul>
<li>auto：只在项目包含了 go.mod 文件时启用 Go modules，在 Go 1.13 中仍然是默认值，详见 ：golang.org&#x2F;issue&#x2F;31857。</li>
<li>on：无脑启用 Go modules，推荐设置，未来版本中的默认值，让 GOPATH 从此成为历史。</li>
<li>off：禁用 Go modules。</li>
</ul>
</blockquote>
<h4 id="2-6-go-get和go-install命令"><a href="#2-6-go-get和go-install命令" class="headerlink" title="2.6 go get和go install命令"></a>2.6 go get和go install命令</h4><blockquote>
<ul>
<li>go get命令<ul>
<li>Get将其命令行参数解析为特定模块版本的软件包。</li>
<li>更新 go.mod 以要求这些版本，下载源代码到模块缓存，然后构建并安装指定的软件包。</li>
</ul>
</li>
<li>go install命令<ul>
<li>go install命令可以用来构建和安装软件包。当指定一个版本时，’go install’在模块感知模式下运行，忽略当前目录下的go.mod文件</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>get和install命令选择<ul>
<li>用get构建和安装软件包的做法已经过时了。</li>
<li>在未来的版本中，-d标志将被默认启用，’go get’将只被用于调整当前模块的依赖关系。</li>
<li>要使用当前模块的依赖关系安装软件包，请使用’go install’。</li>
<li>要安装一个无视当前模块的软件包，使用’go install’，在每个参数后面加上@version后缀，如”@latest”。</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="十二、文件操作"><a href="#十二、文件操作" class="headerlink" title="十二、文件操作"></a>十二、文件操作</h2><blockquote>
<p>在<code>go</code>语言中，可以对文件进行读写操作</p>
</blockquote>
<h3 id="1、读取文件"><a href="#1、读取文件" class="headerlink" title="1、读取文件"></a>1、读取文件</h3><h4 id="1-1-打开关闭文件"><a href="#1-1-打开关闭文件" class="headerlink" title="1.1 打开关闭文件"></a>1.1 打开关闭文件</h4><blockquote>
<p><code>go</code>语言中使用<code>os</code>模块进行打开文件，获得文件句柄，也叫文件指针</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.Open()</span><br><span class="line"><span class="comment">// 用来打开文件，返回两个值，一个是os.File指针，另一个是错误码err</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fileHandler, err := os.Open(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;打开文件错误:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;fileHandler=%#v\n&quot;</span>, fileHandler)</span><br><span class="line">fmt.Printf(<span class="string">&quot;fileHandler=%p\n&quot;</span>, fileHandler)</span><br><span class="line">fmt.Printf(<span class="string">&quot;fileHandler type=%T\n&quot;</span>, fileHandler)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    fileHandler=&amp;&#123;0xc0000a4780&#125;</span></span><br><span class="line"><span class="comment">    fileHandler=0xc0000a2018</span></span><br><span class="line"><span class="comment">    fileHandler type=*os.File</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上面获取到的文件的指针，那么就可以对该指针进行操作了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">fileHandler.Close()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关闭文件一般是在<code>defer</code>语句来定义</p>
</blockquote>
<h4 id="1-2-读取文件内容"><a href="#1-2-读取文件内容" class="headerlink" title="1.2 读取文件内容"></a>1.2 读取文件内容</h4><h5 id="1-2-1-较为底层方法"><a href="#1-2-1-较为底层方法" class="headerlink" title="1.2.1 较为底层方法"></a>1.2.1 较为底层方法</h5><blockquote>
<p>较为底层的方法就是使用上面打开文件获取到的文件指针，调用<code>Read()</code>方法，<code>Read()</code>传入一个可以一个字节类型的切片，并且指定字节切片长度，就可以来读取文件内容</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取文件内容</span></span><br><span class="line">fileHandler.Read([]<span class="type">byte</span>, 字节长度)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的方法是返回两个值</p>
<ul>
<li>第一个值n是按照Read()函数传入的字节切片长度，开始读取文件，然后返回读取到文件内容的字节数<ul>
<li>如果返回的n小于定义的切片长度，那么表示文件内容全部被读出来</li>
<li>如果返回的n大于定义的切片长度，那么表示文件内容只被读出来字节长度的文件内容，剩余的没有被读出来，那就需要使用<code>for</code>循环不断读取文件内容<ul>
<li>每次循环读取的都是从上一次读取的结尾作为开始进行读取</li>
</ul>
</li>
</ul>
</li>
<li>第二个值就是err<ul>
<li>err会有两种情况：<ul>
<li>读取内容错误，结果不等nil</li>
<li>文件内容都读取完成后，err会有一个<code>EOF(end of file)</code>的结束标识符，所以需要进行判断接收，如果是EOF，那就表示文件读取结束</li>
<li><code>EOF</code>需要使用<code>io</code>的<code>io.EOF</code>来接收</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// readFile.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span> <span class="comment">// 读取文件的包</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span> <span class="comment">// 接收EOF结束符</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileContent</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 打开文件</span></span><br><span class="line">	fileHandler, err := os.Open(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;打开文件错误:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler=%#v\n&quot;</span>, fileHandler)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler=%p\n&quot;</span>, fileHandler)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler type=%T\n&quot;</span>, fileHandler)</span><br><span class="line">	<span class="comment">// 等待函数执行结束前，再执行文件关闭操作</span></span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line"></span><br><span class="line">	readTimes := <span class="number">1</span></span><br><span class="line">	AllTimes := <span class="number">3</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;\n第%v次读取文件内容\n&quot;</span>, readTimes)</span><br><span class="line">		<span class="comment">// 开始读取文件内容</span></span><br><span class="line">		<span class="keyword">var</span> tmp = <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">128</span>)</span><br><span class="line">		byteNums, err := fileHandler.Read(tmp)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 判断文件读取结束</span></span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;读取文件结束~&quot;</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 判断错误是不是nil</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取文件内容失败:%v\n&quot;</span>, err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> readTimes &gt; AllTimes &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取超过%v次，再见~\n&quot;</span>, AllTimes)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		readTimes++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取到的文件内容字节个数:%v\n&quot;</span>, byteNums)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取到的文件内容:%v\n&quot;</span>, <span class="type">string</span>(tmp[:byteNums]))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	readFileContent(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ul>
<li>如果文件在<code>Open</code>函数中写的是绝对路径，最好不要在<code>goland</code>中直接右键执行该读取文件内容的<code>go</code>文件，因为会提示找不到需要读取文件路径<ul>
<li>代码里如果写的是相对路径，那么就可以在终端里是使用<code>go run</code>&#x2F;<code>go build</code>运行就可以</li>
</ul>
</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220215234301296.png" class="" title="image-20220215234301296">

<h5 id="1-2-2-稍显优雅的方法"><a href="#1-2-2-稍显优雅的方法" class="headerlink" title="1.2.2 稍显优雅的方法"></a>1.2.2 稍显优雅的方法</h5><blockquote>
<p>使用<code>bufio</code>读取，<code>bufio</code>是在<code>file</code>的基础上封装了一层API，支持更多的功能</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入bufio</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;bufio&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一步</span></span><br><span class="line"><span class="comment">// 使用bufio.NewReader传入打开文件获得的文件指针</span></span><br><span class="line">readObj := bufio.NewReader(fileHandler)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面的readObj调用ReadString方法，需要传入字符格式的分隔符，比如：`\n`，&#x27; &#x27;等</span></span><br><span class="line">line, err := readObj.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="comment">// line的值是根据分隔符获得到的每一行</span></span><br><span class="line"><span class="comment">// err是读取的错误码</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileContent</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 打开文件</span></span><br><span class="line">	fileHandler, err := os.Open(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;打开文件错误:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler=%#v\n&quot;</span>, fileHandler)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler=%p\n&quot;</span>, fileHandler)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler type=%T\n&quot;</span>, fileHandler)</span><br><span class="line">	<span class="comment">// 等待函数执行结束前，再执行文件关闭操作</span></span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 实例化bufio对象，并将打开的文件指针传入</span></span><br><span class="line">	readObj := bufio.NewReader(fileHandler)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">// ReadSting里传入的是字符，表示以什么分隔开</span></span><br><span class="line">		readLine, err := readObj.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		</span><br><span class="line">    <span class="comment">// 将每一行读出来</span></span><br><span class="line">		fmt.Printf(<span class="string">&quot;readline:%v\n&quot;</span>, readLine)</span><br><span class="line">		</span><br><span class="line">    <span class="comment">// 判断文件读取结束</span></span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;读取文件结束~&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 判断错误是不是nil</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取文件内容失败:%v\n&quot;</span>, err)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	readFileContent(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220215235504007.png" class="" title="image-20220215235504007">

<h5 id="1-2-3-更简洁的方法"><a href="#1-2-3-更简洁的方法" class="headerlink" title="1.2.3 更简洁的方法"></a>1.2.3 更简洁的方法</h5><blockquote>
<p>使用<code>io/ioutil</code>的<code>ReadFile</code>方法读取完整文件内容，只需要传入文件名既可</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入io/ioutil</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"></span><br><span class="line">ioutil.ReadFile(fileName <span class="type">string</span>)</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	返回两个值:</span></span><br><span class="line"><span class="comment">		第一个值的类型：[]uint8，可以用string强制转换成`string`</span></span><br><span class="line"><span class="comment">		第二个值是返回错误码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileContent</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 打开读取文件</span></span><br><span class="line">	fileData, err := ioutil.ReadFile(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取文件错误:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileData:%v\n&quot;</span>, <span class="type">string</span>(fileData))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	readFileContent(<span class="string">&quot;./name.txt&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-4-练习读取文件"><a href="#1-2-4-练习读取文件" class="headerlink" title="1.2.4 练习读取文件"></a>1.2.4 练习读取文件</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileByLowType</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 底层方式</span></span><br><span class="line">	fileHandler, err := os.Open(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;打开文件失败:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line">	</span><br><span class="line">	times := <span class="number">1</span></span><br><span class="line">	allTimes := <span class="number">5</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;\n第%v次读取文件内容\n&quot;</span>, times)</span><br><span class="line">		<span class="keyword">var</span> tmp = <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">128</span>)</span><br><span class="line">		readNums, err := fileHandler.Read(tmp)</span><br><span class="line">		</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取到的文件内容:\n%v\n&quot;</span>, <span class="type">string</span>(tmp[:readNums]))</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 判断读到结尾，需要优先进行判断，否则会报错读取文件内容失败</span></span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;文件读完了\n&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 判断读取文件内容错误码</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取文件内容失败:%v\n&quot;</span>, err)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> times &gt; allTimes &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取文件超过最大%v次数\n&quot;</span>, allTimes)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		times++</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileByBufio</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用bufio读取，不需要控制读取的切片长度</span></span><br><span class="line">	fileHandler, err := os.Open(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;打开文件失败:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line">	</span><br><span class="line">	reader := bufio.NewReader(fileHandler)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		line, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取到的文件内容:%v\n&quot;</span>, line)</span><br><span class="line">		<span class="comment">// 判断读到结尾，需要优先进行判断，否则会报错读取文件内容失败</span></span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;文件读完了\n&quot;</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 判断读取文件内容错误码</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;读取文件内容失败:%v\n&quot;</span>, err)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFileByIOUtil</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用ioutil读取，直接读取全部内容</span></span><br><span class="line">	<span class="comment">// readData类型：[]uint8</span></span><br><span class="line">	readData, err := ioutil.ReadFile(fileName)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;读取文件内容错误:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;读取到的内容:%v\n&quot;</span>, <span class="type">string</span>(readData))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fileName := <span class="string">&quot;./userinfo.txt&quot;</span></span><br><span class="line">	<span class="comment">// 底层方式读取文件内容</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n&gt;&gt;&gt;&gt;&gt;&gt;底层方式读取文件内容&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>)</span><br><span class="line">	readFileByLowType(fileName)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 以bufio读取</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n&gt;&gt;&gt;&gt;&gt;&gt;以bufio读取文件内容&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>)</span><br><span class="line">	readFileByBufio(fileName)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 以io/ioutil读取</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;\n&gt;&gt;&gt;&gt;&gt;&gt;以io/ioutil读取文件内容&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>)</span><br><span class="line">	readFileByIOUtil(fileName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、写入文件"><a href="#2、写入文件" class="headerlink" title="2、写入文件"></a>2、写入文件</h3><h4 id="2-1-写入文件模式"><a href="#2-1-写入文件模式" class="headerlink" title="2.1 写入文件模式"></a>2.1 写入文件模式</h4><blockquote>
<p><code>go</code>可以使用指定模式打开写入内容到文件中</p>
<p>需要注意的是flag是可以用位运算的<code>或(|)</code>来表示文件没有的话就可以先创建</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">OpenFile</span><span class="params">(name <span class="type">string</span>, flag <span class="type">int</span>, perm FileMode)</span></span> (*File, err) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	name: 要打开的文件名</span></span><br><span class="line"><span class="comment">	flag: 打开文件的模式</span></span><br><span class="line"><span class="comment">	perm: 文件权限，是一个八进制数</span></span><br><span class="line"><span class="comment">		  r(读) ： 04</span></span><br><span class="line"><span class="comment">		  w(写) ： 02</span></span><br><span class="line"><span class="comment">		x(执行) ： 01</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>flag支持的模式：</p>
<ul>
<li>os.O_WRONLY	只写</li>
<li>os.O_CREATE    创建文件</li>
<li>os.O_RDONLY    只读</li>
<li>os.O_RDWR      读写</li>
<li>os.O_TRUNC     清空</li>
<li>os.O_APPEND    追加内容到文件</li>
</ul>
</blockquote>
<blockquote>
<p>关于文件权限的解释</p>
<p>在终端输入:<br><code>ls -l xxx.xxx （xxx.xxx是文件名）</code>查看的是<code>xxx文件</code>之中的文件权限</p>
<p>那么就会出现相类似的信息，主要都是这些<code>-rw-rw-r--</code></p>
<ul>
<li>一共有十位数，其中：最前面那个 - 代表的是类型</li>
<li>中间那三个 rw- 代表的是所有者（user）拥有的权限</li>
<li>然后那三个 r– 代表的是组群（group）拥有的权限</li>
<li>最后那三个 r– 代表的是其他人（other）拥有的权限</li>
</ul>
<p>那么CNAME文件的操作权限就是-rw-r-r– &#x3D; 644</p>
<ul>
<li>rw为什么是6，因为是连在一起，所以是r&#x3D;4加上w&#x3D;2所以是6</li>
</ul>
</blockquote>
<img src="/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/image-20220220210813699.png" class="" title="image-20220220210813699">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeFile</span><span class="params">(fileName <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fileHandler, err := os.OpenFile(fileName, os.O_APPEND|os.O_CREATE, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;openFile failed: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;fileHandler:%v\n&quot;</span>, fileHandler)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  os.O_APPEND|os.O_CREATE这是位运算，表示添加文件时，文件不存在，需要现金向创建，后面的0644是文件操作权限，表示文件时可读可写</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-write写入内容到文件"><a href="#2-2-write写入内容到文件" class="headerlink" title="2.2 write写入内容到文件"></a>2.2 write写入内容到文件</h4><blockquote>
<p>可以将字节或字符串写入到文件中</p>
<p>可以写入字节和字符串</p>
<ul>
<li><code>write</code>可以写入字节</li>
<li><code>writestring</code>可以写入字符串</li>
</ul>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写入文件实例代码</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/17 22:51</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeFile</span><span class="params">(fileName <span class="type">string</span>, fileContent <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fileHandler, err := os.OpenFile(fileName, os.O_WRONLY|os.O_CREATE|os.O_APPEND, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;openFile failed: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// write写入字节</span></span><br><span class="line">	fileHandler.Write([]<span class="type">byte</span>(fileContent))</span><br><span class="line">	<span class="comment">// writeString写入字符串</span></span><br><span class="line">	fileHandler.WriteString(fileContent)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 写入内容到文件</span></span><br><span class="line">	fileName := <span class="string">&quot;./xx.txt&quot;</span></span><br><span class="line">	writeFile(fileName, <span class="string">&quot;我是学习go语言&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-bufio写入内容到文件"><a href="#2-3-bufio写入内容到文件" class="headerlink" title="2.3 bufio写入内容到文件"></a>2.3 bufio写入内容到文件</h4><blockquote>
<p>需要注意的是，写完一定要使用<code>Flush函数</code>将写入缓存的内容保存到文件里</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/17 22:51</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeFile</span><span class="params">(fileName <span class="type">string</span>, fileContent <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	fileHandler, err := os.OpenFile(fileName, os.O_WRONLY|os.O_CREATE|os.O_APPEND, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;openFile failed: %v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> fileHandler.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bufio写入文件</span></span><br><span class="line">	wr := bufio.NewWriter(fileHandler)</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 写入字节，将文件内容写到缓存里</span></span><br><span class="line">	writer.Write([]<span class="type">byte</span>(fileContent))</span><br><span class="line">  </span><br><span class="line">	<span class="comment">// 这里是将文件内容写到缓存里</span></span><br><span class="line">	wr.WriteString(fileContent)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 写完需要将写入到缓存里的东西存到文件中</span></span><br><span class="line">	wr.Flush()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 写入内容到文件</span></span><br><span class="line">	fileName := <span class="string">&quot;./xx.txt&quot;</span></span><br><span class="line">	writeFile(fileName, <span class="string">&quot;我是学习go语言222&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-ioutil写入内容到文件"><a href="#2-4-ioutil写入内容到文件" class="headerlink" title="2.4 ioutil写入内容到文件"></a>2.4 ioutil写入内容到文件</h4><blockquote>
<p>需要注意<code>WriteFile</code>里写入文件时字节切片类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  @Author: lyzin</span></span><br><span class="line"><span class="comment">    @Date: 2022/02/17 22:51</span></span><br><span class="line"><span class="comment">    @File: basic_study</span></span><br><span class="line"><span class="comment">    @Desc: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeFile</span><span class="params">(fileName <span class="type">string</span>, fileContent <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	err := ioutil.WriteFile(fileName, []<span class="type">byte</span>(fileContent), <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;write file err:%v\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 写入内容到文件</span></span><br><span class="line">	fileName := <span class="string">&quot;./xx.txt&quot;</span></span><br><span class="line">	writeFile(fileName, <span class="string">&quot;我是学习go语言ioutil&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://www.lynote.top">刘阳</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.lynote.top/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/">https://www.lynote.top/2021/05/16/golang/go%E7%AC%94%E8%AE%B0/go%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.lynote.top" target="_blank">笔记小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Go/">Go</a></div><div class="post_share"><div class="social-share" data-image="/posts_cover_img/golang/go_code.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2021/05/16/golang/go_mysql%E4%BD%BF%E7%94%A8/go_mysql%E4%BD%BF%E7%94%A8/"><img class="prev-cover" src="/posts_cover_img/golang/go_mysql.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Go Mysql笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/03/18/golang/go_gorm%E4%BD%BF%E7%94%A8/go_gorm%E4%BD%BF%E7%94%A8/" title="Go Gorm使用"><img class="cover" src="/posts_cover_img/golang/go_gorm.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-18</div><div class="title">Go Gorm使用</div></div></a></div><div><a href="/2021/05/16/golang/go_gin%E5%AD%A6%E4%B9%A0/go_gin%E5%AD%A6%E4%B9%A0/" title="Go Gin笔记"><img class="cover" src="/posts_cover_img/golang/gin.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-16</div><div class="title">Go Gin笔记</div></div></a></div><div><a href="/2022/08/01/golang/go_grpc/go_grpc%E4%BD%BF%E7%94%A8/" title="Go与gRPC"><img class="cover" src="/posts_cover_img/golang/go_gRPC.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-01</div><div class="title">Go与gRPC</div></div></a></div><div><a href="/2021/05/16/golang/go_mysql%E4%BD%BF%E7%94%A8/go_mysql%E4%BD%BF%E7%94%A8/" title="Go Mysql笔记"><img class="cover" src="/posts_cover_img/golang/go_mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-16</div><div class="title">Go Mysql笔记</div></div></a></div><div><a href="/2022/05/25/golang/go_zap%E6%97%A5%E5%BF%97%E4%BD%BF%E7%94%A8/go_zap%E6%97%A5%E5%BF%97%E4%BD%BF%E7%94%A8/" title="Go Zap日志库"><img class="cover" src="/posts_cover_img/golang/go_zap.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-25</div><div class="title">Go Zap日志库</div></div></a></div><div><a href="/2022/05/24/golang/go_viper%E4%BD%BF%E7%94%A8/go_viper%E4%BD%BF%E7%94%A8/" title="Go Viper使用"><img class="cover" src="/posts_cover_img/golang/go_viper.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-24</div><div class="title">Go Viper使用</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">刘阳</div><div class="author-info__description">学习与记录</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lyzin"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81GO%E8%AF%AD%E8%A8%80%E7%AE%80%E4%BB%8B%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-text">一、GO语言简介与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E8%B5%84%E6%96%99%EF%BC%9A"><span class="toc-text">推荐资料：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Go%E5%8C%85%E7%9A%84%E5%AE%98%E6%96%B9%E5%9C%B0%E5%9D%80"><span class="toc-text">1、Go包的官方地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Go%E4%BC%98%E5%8A%BF"><span class="toc-text">2、Go优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97"><span class="toc-text">3、学习心得</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81GO%E7%89%88%E6%9C%AC"><span class="toc-text">4、GO版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81GOPATH"><span class="toc-text">5、GOPATH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81MAC%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89GOPATH"><span class="toc-text">6、MAC配置自定义GOPATH</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">6.1 创建目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">6.2 添加环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E6%9F%A5%E7%9C%8BGOPATH"><span class="toc-text">6.3 查看GOPATH</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81Windows%E9%85%8D%E7%BD%AEGOPATH"><span class="toc-text">7、Windows配置GOPATH</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E4%BF%AE%E6%94%B9%E8%87%AA%E5%B7%B1%E7%9A%84GOPATH%E5%80%BC"><span class="toc-text">7.1 修改自己的GOPATH值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E4%BF%AE%E6%94%B9GOPATH-bin"><span class="toc-text">7.2 修改GOPATH\bin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E6%A3%80%E6%9F%A5GOPATH"><span class="toc-text">7.3 检查GOPATH</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95"><span class="toc-text">8、创建代码目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E6%9C%80%E6%96%B0%E9%85%8D%E7%BD%AEGo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-text">9、最新配置Go开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81Goland%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-text">10、Goland相关配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-%E9%85%8D%E7%BD%AEgo-root"><span class="toc-text">10.1 配置go root</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-%E5%8F%96%E6%B6%88%E4%BB%A3%E7%A0%81%E6%8A%98%E5%8F%A0"><span class="toc-text">10.2 取消代码折叠</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-%E8%AE%BE%E7%BD%AE%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E6%8F%90%E7%A4%BA"><span class="toc-text">10.3 设置函数参数提示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81goproxy%E8%AE%BE%E7%BD%AE"><span class="toc-text">11、goproxy设置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-windows%E8%AE%BE%E7%BD%AE"><span class="toc-text">11.1 windows设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-macos-x2F-linux%E8%AE%BE%E7%BD%AE"><span class="toc-text">11.2 macos&#x2F;linux设置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-text">二、运行代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81HelloWorld"><span class="toc-text">1、第一行代码HelloWorld</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E8%AF%91build"><span class="toc-text">2、编译build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%BF%90%E8%A1%8Crun"><span class="toc-text">3、运行run</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%AE%89%E8%A3%85install"><span class="toc-text">4、安装install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%8D%95%E5%BC%95%E5%8F%B7%E4%B8%8E%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="toc-text">5、单引号与双引号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91%E4%BB%A3%E7%A0%81"><span class="toc-text">6、跨平台编译代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-mac%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91linux-windows%E7%A8%8B%E5%BA%8F"><span class="toc-text">6.1 mac平台编译linux&#x2F;windows程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-linux%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91mac-windows%E7%A8%8B%E5%BA%8F"><span class="toc-text">6.2 linux平台编译mac&#x2F;windows程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-windows%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91mac-windows%E7%A8%8B%E5%BA%8F"><span class="toc-text">6.3 windows平台编译mac&#x2F;windows程序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="toc-text">7、代码注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F"><span class="toc-text">三、变量与常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A"><span class="toc-text">1、第一行代码解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%A0%87%E8%AF%86%E7%AC%A6-x2F-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2、标识符&#x2F;关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-text">2.1 标识符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2.2 关键字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">3、变量声明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">3.1 变量声明的几种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-var%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">3.1.1  var关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F%E4%B8%8D%E8%B5%8B%E5%80%BC"><span class="toc-text">1、声明变量不赋值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F%E7%9A%84%E5%90%8C%E6%97%B6%E8%B5%8B%E5%80%BC"><span class="toc-text">2、声明变量的同时赋值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E8%87%AA%E5%8A%A8%E6%8E%A8%E5%AF%BC%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-text">3、自动推导变量类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E6%89%B9%E9%87%8F%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="toc-text">4、批量声明变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E4%B8%80%E8%A1%8C%E5%A3%B0%E6%98%8E%E5%A4%9A%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="toc-text">5、一行声明多个变量</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E7%9F%AD%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">3.1.2 短变量声明</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">3.2 注意点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8C%BF%E5%90%8D%E5%8F%98%E9%87%8F"><span class="toc-text">4、匿名变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%B8%B8%E9%87%8F"><span class="toc-text">5、常量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%B8%B8%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">5.1 常量声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%89%B9%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">5.2 批量声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-iota"><span class="toc-text">5.3 iota</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-iota%E7%9A%84%E5%87%A0%E7%A7%8D%E5%9C%BA%E6%99%AF"><span class="toc-text">5.4 iota的几种场景</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-4-1-iota%E8%A2%AB%E6%8F%92%E9%98%9F"><span class="toc-text">5.4.1 iota被插队</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-4-3-iota%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-text">5.4.3 iota位运算</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">四、数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%95%B4%E5%9E%8B"><span class="toc-text">1、整型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="toc-text">2、浮点数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%B8%83%E5%B0%94%E5%80%BC"><span class="toc-text">3、布尔值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">4、字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">4.1 字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E8%BD%AC%E4%B9%89%E7%AC%A6%E5%8F%B7"><span class="toc-text">4.2 转义符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">4.3 多行字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6"><span class="toc-text">4.4 字符串长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-text">4.5 字符串拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E5%88%86%E5%89%B2"><span class="toc-text">4.6 分割</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-%E5%8C%85%E5%90%AB"><span class="toc-text">4.7 包含</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-%E5%89%8D%E7%BC%80-x2F-%E5%90%8E%E7%BC%80"><span class="toc-text">4.8 前缀&#x2F;后缀</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-%E5%AD%90%E4%B8%B2%E4%BD%8D%E7%BD%AE"><span class="toc-text">4.9 子串位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-10-join"><span class="toc-text">4.10 join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-11-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BF%AE%E6%94%B9"><span class="toc-text">4.11 字符串修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-12-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">4.12 强制类型转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="toc-text">5、字符类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B%E4%B8%80%EF%BC%9Abyte%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.1 字符类型一：byte类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B%E4%BA%8C%EF%BC%9Arune%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.2 字符类型二：rune类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">五、流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81if%E8%AF%AD%E5%8F%A5"><span class="toc-text">1、if语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%8D%95%E4%B8%AAif%E8%AF%AD%E5%8F%A5"><span class="toc-text">1.1 单个if语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%B5%8C%E5%A5%97if%E8%AF%AD%E5%8F%A5"><span class="toc-text">1.2 嵌套if语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E7%89%B9%E6%AE%8A%E5%86%99%E6%B3%95"><span class="toc-text">1.3 特殊写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81for%E8%AF%AD%E5%8F%A5"><span class="toc-text">2、for语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%9F%BA%E7%A1%80%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.1 基础格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-for%E5%8F%98%E7%A7%8D1"><span class="toc-text">2.2 for变种1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-for%E5%8F%98%E7%A7%8D2"><span class="toc-text">2.3 for变种2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF"><span class="toc-text">2.4 无限循环</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81for-range%E5%BE%AA%E7%8E%AF"><span class="toc-text">3、for range循环</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%9F%BA%E7%A1%80%E6%A0%BC%E5%BC%8F"><span class="toc-text">3.1 基础格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F"><span class="toc-text">3.1 只有一个变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%8C%BF%E5%90%8D%E5%8F%98%E9%87%8F%E6%8E%A5%E6%94%B6%E7%B4%A2%E5%BC%95%E5%80%BC"><span class="toc-text">3.3 匿名变量接收索引值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81for%E5%BE%AA%E7%8E%AF%E4%BE%8B%E5%AD%90"><span class="toc-text">4、for循环例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81break"><span class="toc-text">5、break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81continue"><span class="toc-text">6、continue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81switch"><span class="toc-text">7、switch</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-switch%E5%8F%98%E7%A7%8D"><span class="toc-text">7.1 switch变种</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81goto-%E4%BA%86%E8%A7%A3"><span class="toc-text">8、goto(了解)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">六、运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">1、算数运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%80%92%E5%87%8F%E4%B8%8E%E9%80%92%E5%A2%9E"><span class="toc-text">2、递减与递增</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">3、关系运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4、逻辑运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E4%B8%8E%E8%BF%90%E7%AE%97"><span class="toc-text">4.1 与运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E6%88%96%E8%BF%90%E7%AE%97"><span class="toc-text">4.2 或运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E9%9D%9E%E8%BF%90%E7%AE%97"><span class="toc-text">4.3 非运算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-text">5、位运算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E6%8C%89%E4%BD%8D%E4%B8%8E"><span class="toc-text">5.1 按位与</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%8C%89%E4%BD%8D%E6%88%96"><span class="toc-text">5.2 按位或</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E6%8C%89%E4%BD%8D%E5%BC%82%E6%88%96"><span class="toc-text">5.3 按位异或</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E5%B7%A6%E7%A7%BB"><span class="toc-text">5.4 左移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E5%8F%B3%E7%A7%BB"><span class="toc-text">5.5 右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E5%B7%A6%E7%A7%BB%E4%B8%8E%E5%8F%B3%E7%A7%BB%E7%90%86%E8%A7%A3"><span class="toc-text">5.5 左移与右移理解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-%E5%B7%A6%E7%A7%BB%E4%B8%8E%E5%8F%B3%E7%A7%BB%E4%BE%8B%E5%AD%90"><span class="toc-text">5.6 左移与右移例子</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">6、赋值运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%A4%8D%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">七、复合数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%95%B0%E7%BB%84"><span class="toc-text">1、数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%95%B0%E7%BB%84%E5%A3%B0%E6%98%8E"><span class="toc-text">1.1 数组声明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-1-var%E5%85%B3%E9%94%AE%E5%AD%97%E5%A3%B0%E6%98%8E%E6%95%B0%E7%BB%84"><span class="toc-text">1.1.1 var关键字声明数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-%E7%9F%AD%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E6%95%B0%E7%BB%84"><span class="toc-text">1.2.1 短变量声明数组</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B5%8B%E5%80%BC"><span class="toc-text">1.2 数组初始化赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-var%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B5%8B%E5%80%BC"><span class="toc-text">1.2.1 var初始化赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-%E7%9F%AD%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B5%8B%E5%80%BC"><span class="toc-text">1.2.2 短变量初始化赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-3-%E5%9B%BA%E5%AE%9A%E7%B4%A2%E5%BC%95%E5%80%BC%E5%88%9D%E5%A7%8B%E5%8C%96%E8%B5%8B%E5%80%BC"><span class="toc-text">1.2.3 固定索引值初始化赋值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83"><span class="toc-text">1.3 数组比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E6%95%B0%E7%BB%84%E7%9A%84%E9%81%8D%E5%8E%86"><span class="toc-text">1.4 数组的遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">1.5 多维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-1-%E5%AE%9A%E4%B9%89%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">1.5.1 定义多维数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-2-%E9%81%8D%E5%8E%86%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">1.5.2 遍历多维数组</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E6%95%B0%E7%BB%84%E6%98%AF%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.6 数组是值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-%E6%95%B0%E7%BB%84%E4%BE%8B%E9%A2%98"><span class="toc-text">1.7 数组例题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%87%E7%89%87"><span class="toc-text">2、切片</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%A3%B0%E6%98%8E%E5%88%87%E7%89%87"><span class="toc-text">2.1 声明切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%88%87%E7%89%87%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">2.2 切片初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E7%94%B1%E6%95%B0%E7%BB%84%E5%BE%97%E5%88%B0%E5%88%87%E7%89%87"><span class="toc-text">2.3 由数组得到切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E5%88%87%E7%89%87%E9%95%BF%E5%BA%A6%E5%92%8C%E5%AE%B9%E9%87%8F"><span class="toc-text">2.4 切片长度和容量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E5%88%87%E7%89%87%E5%86%8D%E5%88%87%E7%89%87"><span class="toc-text">2.5 切片再切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-make%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E5%88%87%E7%89%87"><span class="toc-text">2.6 make函数定义切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-%E5%88%87%E7%89%87%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="toc-text">2.7 切片比较运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-%E5%88%87%E7%89%87nil%E5%80%BC"><span class="toc-text">2.8 切片nil值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-%E5%88%A4%E6%96%AD%E5%88%87%E7%89%87%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA"><span class="toc-text">2.9 判断切片是否为空</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-%E5%88%87%E7%89%87%E8%B5%8B%E5%80%BC"><span class="toc-text">2.10 切片赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-%E5%88%87%E7%89%87%E9%81%8D%E5%8E%86"><span class="toc-text">2.11 切片遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-%E5%88%87%E7%89%87append%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-text">2.12 切片append添加元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-13-%E5%88%87%E7%89%87copy"><span class="toc-text">2.13 切片copy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-14-%E5%88%87%E7%89%87append%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text">2.14 切片append删除元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-15-%E5%88%87%E7%89%87%E6%98%AF%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E9%AA%8C%E8%AF%81"><span class="toc-text">2.15 切片是引用类型验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-16-%E5%88%87%E7%89%87%E6%9C%AC%E8%B4%A8"><span class="toc-text">2.16 切片本质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-17-%E5%88%87%E7%89%87%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">2.17 切片练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-17-1-for%E5%BE%AA%E7%8E%AF%E7%94%9F%E6%88%90%E5%88%87%E7%89%87"><span class="toc-text">2.17.1 for循环生成切片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-17-2-%E5%AE%9E%E7%8E%B0lstrip-%E5%87%BD%E6%95%B0"><span class="toc-text">2.17.2 实现lstrip()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-17-3-%E5%AE%9E%E7%8E%B0rstrip-%E5%87%BD%E6%95%B0"><span class="toc-text">2.17.3 实现rstrip()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-17-4-%E5%AE%9E%E7%8E%B0strip-%E5%87%BD%E6%95%B0"><span class="toc-text">2.17.4 实现strip()函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%8C%87%E9%92%88"><span class="toc-text">3、指针</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%8C%87%E9%92%88%E6%93%8D%E4%BD%9C"><span class="toc-text">3.1 指针操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E8%8E%B7%E5%8F%96%E6%8C%87%E9%92%88"><span class="toc-text">3.1.1 获取指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E6%A0%B9%E6%8D%AE%E6%8C%87%E9%92%88%E8%8E%B7%E5%8F%96%E5%80%BC"><span class="toc-text">3.1.2 根据指针获取值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-3-%E5%8F%98%E9%87%8F%E9%87%8D%E6%96%B0%E8%B5%8B%E5%80%BC%E6%8C%87%E9%92%88%E4%B8%8D%E5%8F%98"><span class="toc-text">3.1.3 变量重新赋值指针不变</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-4-%E6%8C%87%E9%92%88%E6%89%93%E5%8D%B0%E7%90%86%E8%A7%A3"><span class="toc-text">3.1.4 指针打印理解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.2 指针类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%8F%98%E9%87%8F%E6%8E%A5%E6%94%B6%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E5%80%BC"><span class="toc-text">3.3 变量接收内存地址值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81new"><span class="toc-text">4、new</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81make%E5%92%8Cnew%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">5、make和new的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81map"><span class="toc-text">6、map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-var%E5%85%B3%E9%94%AE%E5%AD%97%E5%A3%B0%E6%98%8Emap"><span class="toc-text">6.1 var关键字声明map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-map%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.2 map初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-var%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.2.1 var关键字初始化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-%E7%9F%AD%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.2.2 短变量初始化</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-map%E8%8E%B7%E5%8F%96key-value"><span class="toc-text">6.3 map获取key-value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-map%E9%81%8D%E5%8E%86"><span class="toc-text">6.3 map遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-%E5%88%A0%E9%99%A4%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-text">6.5 删除键值对</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-map%E5%92%8C%E5%88%87%E7%89%87%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-text">6.6 map和切片互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-6-1-%E5%88%87%E7%89%87%E7%9A%84%E5%85%83%E7%B4%A0%E5%80%BC%E6%98%AFmap"><span class="toc-text">6.6.1 切片的元素值是map</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-6-2-map%E7%9A%84%E5%85%83%E7%B4%A0%E5%80%BC%E6%98%AF%E5%88%87%E7%89%87"><span class="toc-text">6.6.2 map的元素值是切片</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-map%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">6.7 map练习题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%8C%BA%E5%88%AB"><span class="toc-text">7、值类型和引用类型区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.1 值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.2 引用类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-var%E3%80%81make%E3%80%81new%E5%8C%BA%E5%88%AB"><span class="toc-text">1.3 var、make、new区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#var%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-text">var声明方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#make%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F"><span class="toc-text">make声明方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#new%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F"><span class="toc-text">new声明方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">八、函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-text">1、函数定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%9C%89%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8F%98%E9%87%8F"><span class="toc-text">1.1 有参数和返回值变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E5%8F%98%E7%A7%8D"><span class="toc-text">1.2 函数定义变种</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-%E6%9C%89%E5%BD%A2%E5%8F%82%E4%BD%86%E6%B2%A1%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">1.2.1 有形参但没有返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-%E6%B2%A1%E6%9C%89%E5%BD%A2%E5%8F%82%E4%BD%86%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">1.2.2 没有形参但有返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-3-%E6%B2%A1%E6%9C%89%E5%BD%A2%E5%8F%82%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">1.2.3 没有形参和返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-4-%E8%BF%94%E5%9B%9E%E5%80%BC%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9A%E5%8F%98%E9%87%8F%E5%90%8D"><span class="toc-text">1.2.4 返回值没有指定变量名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-5-%E8%BF%94%E5%9B%9E%E5%80%BC%E6%9C%89%E5%A4%9A%E4%B8%AA"><span class="toc-text">1.2.5 返回值有多个</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-6-%E5%BD%A2%E5%8F%82%E7%B1%BB%E5%9E%8B%E7%9C%81%E7%95%A5"><span class="toc-text">1.2.6 形参类型省略</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-7-%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D"><span class="toc-text">1.2.7 函数签名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0"><span class="toc-text">1.3 可变长参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E5%BD%A2%E5%8F%82%E6%B2%A1%E6%9C%89%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">1.4 形参没有默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1.5 变量作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-1-%E5%85%A8%E5%B1%80%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1.5.1 全局作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-2-%E5%B1%80%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1.5.2 局部作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-3-%E8%AF%AD%E6%B3%95%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1.5.3 语法块作用域</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E5%BD%A2%E5%8F%82%E6%98%AF%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.6 形参是函数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AF%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.7 函数返回值是函数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-8-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-text">1.8 匿名函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-%E5%87%BD%E6%95%B0%E9%97%AD%E5%8C%85"><span class="toc-text">1.9 函数闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-9-1-%E7%B1%BB%E6%AF%94%E6%9B%BF%E6%8D%A2%E5%BD%A2%E5%8F%82%E4%B8%BA%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.9.1 类比替换形参为函数类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-9-2-%E9%97%AD%E5%8C%85%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90"><span class="toc-text">1.9.2 闭包函数分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-9-3-%E9%97%AD%E5%8C%85%E4%BE%8B%E5%AD%90"><span class="toc-text">1.9.3 闭包例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-10-%E5%87%BD%E6%95%B0%E4%BC%A0%E5%8F%82%E9%83%BD%E6%98%AF%E5%80%BC%E6%8B%B7%E8%B4%9D"><span class="toc-text">1.10 函数传参都是值拷贝</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-defer%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">1.11 defer关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-1-defer%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA"><span class="toc-text">1.11.1 defer执行时机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-2-defer%E4%BE%8B%E5%AD%90%E5%88%86%E6%9E%90%E4%B8%80"><span class="toc-text">1.11.2 defer例子分析一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-3-defer%E4%BE%8B%E5%AD%90%E5%88%86%E6%9E%90%E4%BA%8C"><span class="toc-text">1.11.3 defer例子分析二</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-4-defer%E4%BE%8B%E5%AD%90%E5%88%86%E6%9E%90%E4%B8%89"><span class="toc-text">1.11.4 defer例子分析三</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-5-defer%E4%BE%8B%E5%AD%90%E5%88%86%E6%9E%90%E5%9B%9B"><span class="toc-text">1.11.5 defer例子分析四</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-11-6-defer%E4%BE%8B%E5%AD%90%E5%88%86%E6%9E%90%E4%BA%94"><span class="toc-text">1.11.6 defer例子分析五</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-12-%E5%B8%B8%E8%A7%81%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-text">1.12 常见内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-12-1-panic"><span class="toc-text">1.12.1 panic</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-12-2-recover"><span class="toc-text">1.12.2 recover</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-13-fmt-%E5%8C%85%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-text">1.13 fmt 包使用总结</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-13-1-%E6%89%93%E5%8D%B0%E6%96%B9%E6%B3%95"><span class="toc-text">1.13.1 打印方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-13-2-%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5"><span class="toc-text">1.13.2 获取输入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-13-3-%E8%BE%93%E5%85%A5%E6%9C%89%E7%A9%BA%E6%A0%BC%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-text">1.13.3 输入有空格问题解决</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-14-%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-text">1.14 递归函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-14-1-%E9%80%92%E5%BD%92%E4%BE%8B%E5%AD%90"><span class="toc-text">1.14.1 递归例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-15-%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">1.15 练习题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">九、结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B"><span class="toc-text">1、自定义类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="toc-text">2、类型别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">3、结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9A%E4%B9%89"><span class="toc-text">3.1 结构体定义</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E5%90%8C%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E4%B8%80%E8%A1%8C%E5%AE%9A%E4%B9%89"><span class="toc-text">3.1.1 同类型字段一行定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AD%97%E6%AE%B5%E9%BB%98%E8%AE%A4%E4%B8%BA%E9%9B%B6%E5%80%BC"><span class="toc-text">3.1.2 结构体字段默认为零值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-3-%E6%9F%90%E4%B8%AA%E5%8F%98%E9%87%8F%E4%B8%BA%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E7%90%86%E8%A7%A3"><span class="toc-text">3.1.3 某个变量为结构体类型理解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E7%BB%93%E6%9E%84%E4%BD%93%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">3.2 结构体初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-key-value%E5%88%9D%E5%A7%8B%E5%8C%96-%E5%B8%B8%E7%94%A8"><span class="toc-text">3.2.1 key-value初始化(常用)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E5%80%BC%E5%88%97%E8%A1%A8%E5%BD%A2%E5%BC%8F%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">3.2.2 值列表形式初始化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">3.2.3 注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E8%AE%BF%E9%97%AE%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9A%E4%B9%89%E5%AD%97%E6%AE%B5"><span class="toc-text">3.3 访问结构体定义字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E5%8C%BF%E5%90%8D%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">3.4 匿名结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E7%BB%93%E6%9E%84%E4%BD%93%E6%98%AF%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.5 结构体是值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88"><span class="toc-text">3.6 结构体指针</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-1-new%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%9B%E5%BB%BA%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88"><span class="toc-text">3.6.1 new关键字创建结构体指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-2-%E5%BF%AB%E9%80%9F%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88-%E5%B8%B8%E7%94%A8"><span class="toc-text">3.6.2 快速获取结构体指针(常用)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-%E7%BB%93%E6%9E%84%E4%BD%93%E5%9C%A8%E5%86%85%E5%AD%98%E6%98%AF%E8%BF%9E%E7%BB%AD%E7%9A%84"><span class="toc-text">3.7 结构体在内存是连续的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-%E7%BB%93%E6%9E%84%E4%BD%93%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E6%8E%A8%E8%8D%90%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E5%BC%8F"><span class="toc-text">3.8 结构体构造函数(推荐初始化方式)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-8-1-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88"><span class="toc-text">3.8.1 构造函数返回结构体指针</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-8-2-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88%E8%AE%BF%E9%97%AE%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="toc-text">3.8.2 结构体指针访问成员变量</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-%E6%96%B9%E6%B3%95%E5%92%8C%E6%8E%A5%E6%94%B6%E8%80%85"><span class="toc-text">3.9 方法和接收者</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-9-1-%E5%80%BC%E6%8E%A5%E6%94%B6%E8%80%85"><span class="toc-text">3.9.1 值接收者</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-9-2-%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85"><span class="toc-text">3.9.2 指针接收者</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-10-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="toc-text">3.10 自定义类型加方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-%E7%BB%93%E6%9E%84%E4%BD%93%E5%8C%BF%E5%90%8D%E5%AD%97%E6%AE%B5"><span class="toc-text">3.11 结构体匿名字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-12-%E7%BB%93%E6%9E%84%E4%BD%93%E5%B5%8C%E5%A5%97"><span class="toc-text">3.12 结构体嵌套</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-12-1-%E6%98%BE%E5%BC%8F%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">3.12.1 显式嵌套结构体</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-12-2-%E5%8C%BF%E5%90%8D%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">3.12.2 匿名嵌套结构体</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-12-3-%E5%8C%BF%E5%90%8D%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93%E5%AD%97%E6%AE%B5%E5%86%B2%E7%AA%81"><span class="toc-text">3.12.3 匿名嵌套结构体字段冲突</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-12-4-%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93%E6%98%AF%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.12.4 嵌套结构体是指针类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-12-5-%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">3.12.5 嵌套结构体注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-13-%E7%BB%93%E6%9E%84%E4%BD%93%E6%A8%A1%E6%8B%9F%E7%BB%A7%E6%89%BF"><span class="toc-text">3.13 结构体模拟继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-14-%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8Cjson"><span class="toc-text">3.14 结构体和json</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-14-1-json%E8%A7%A3%E9%87%8A"><span class="toc-text">3.14.1 json解释</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-14-2-%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">3.14.2 序列化和反序列化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-14-3-go%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">3.14.3 go序列化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-14-4-go%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">3.14.4 go反序列化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-14-5-go%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%A9%BA%E5%80%BC%E9%97%AE%E9%A2%98"><span class="toc-text">3.14.5 go反序列化空值问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-15-%E7%BB%93%E6%9E%84%E4%BD%93%E5%90%91%E5%A4%96%E6%9A%B4%E9%9C%B2"><span class="toc-text">3.15 结构体向外暴露</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-16-%E7%A9%BA%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-text">3.16 空结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-16-1-%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E9%9B%B6%E5%8D%A0%E7%94%A8"><span class="toc-text">3.16.1 内存空间零占用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-16-2-%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E6%B0%B8%E4%B8%8D%E5%8F%98"><span class="toc-text">3.16.2 内存地址永不变</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-17-%E7%BB%93%E6%9E%84%E4%BD%93%E7%BB%83%E4%B9%A0%E7%A4%BA%E4%BE%8B"><span class="toc-text">3.17 结构体练习示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%8F%8D%E5%B0%84"><span class="toc-text">十、接口与反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%8E%A5%E5%8F%A3"><span class="toc-text">1、接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-text">1.1 接口定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.2 接口实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E6%9C%AA%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.3 接口定义方法未实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E5%80%BC%E6%8E%A5%E6%94%B6%E8%80%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.4 值接收者实现接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.5 指针接收者实现接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E5%A4%9A%E4%B8%AA%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%8E%A5%E5%8F%A3%E5%B5%8C%E5%A5%97"><span class="toc-text">1.6 多个接口和接口嵌套</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-%E7%A9%BA%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.7  空接口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-7-1-%E7%A9%BA%E6%8E%A5%E5%8F%A3%E5%8F%98%E9%87%8F"><span class="toc-text">1.7.1 空接口变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-7-2-%E5%87%BD%E6%95%B0%E5%BD%A2%E5%8F%82-x2F-%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%E7%A9%BA%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.7.2 函数形参&#x2F;返回值为空接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-7-3-%E5%87%BD%E6%95%B0%E7%A9%BA%E6%8E%A5%E5%8F%A3%E6%8E%A5%E6%94%B6%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0"><span class="toc-text">1.7.3 函数空接口接收可变长参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-8-%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="toc-text">1.8 类型断言</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-8-1-%E7%A9%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="toc-text">1.8.1 空接口类型断言</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-8-2-%E9%9D%9E%E7%A9%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="toc-text">1.8.2 非空接口类型断言</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%8F%8D%E5%B0%84"><span class="toc-text">2、反射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.1 反射获取类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%8F%8D%E5%B0%84%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%A7%8D%E7%B1%BB"><span class="toc-text">2.2 反射中的类型和种类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-TypeOf%E8%BF%94%E5%9B%9E%E7%9A%84Type%E6%98%AF%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.2.1 TypeOf返回的Type是接口类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-Type%E6%8E%A5%E5%8F%A3%E7%9A%84Name%E5%92%8CKind%E6%96%B9%E6%B3%95"><span class="toc-text">2.2.2 Type接口的Name和Kind方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-reflect-ValueOf"><span class="toc-text">2.3 reflect.ValueOf()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-reflect-TypeOf"><span class="toc-text">2.4 reflect.TypeOf()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%8D%E5%B0%84%E7%A4%BA%E4%BE%8B"><span class="toc-text">2.5 结构体反射示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%8D%E5%B0%84tag"><span class="toc-text">2.6 结构体反射tag</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%8C%85"><span class="toc-text">十一、包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%8C%85%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">1、包的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85"><span class="toc-text">1.2 自定义包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%8C%85%E5%8F%AF%E8%A7%81%E6%80%A7"><span class="toc-text">1.2 包可见性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">1.3 自定义包注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E5%8C%85%E7%A6%81%E6%AD%A2%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8"><span class="toc-text">1.4 包禁止循环引用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-main%E5%8C%85"><span class="toc-text">1.5 main包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E5%8C%85%E7%9A%84%E5%AF%BC%E5%85%A5"><span class="toc-text">1.6 包的导入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-6-1-%E5%8C%85%E5%AF%BC%E5%85%A5%E6%A1%88%E4%BE%8B%E8%AE%B2%E8%A7%A3"><span class="toc-text">1.6.1 包导入案例讲解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-%E5%8C%BF%E5%90%8D%E5%AF%BC%E5%8C%85"><span class="toc-text">1.7 匿名导包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-8-init%E5%87%BD%E6%95%B0"><span class="toc-text">1.8 init函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-8-1-%E5%AF%BC%E5%8C%85%E6%97%B6init%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-text">1.8.1 导包时init函数执行顺序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-%E5%8C%85%E7%9A%84%E8%BF%90%E8%A1%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">1.9 包的运行注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81go%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-text">2、go包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-go-module%E5%8E%86%E5%8F%B2"><span class="toc-text">2.1 go module历史</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-go-module%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2 go module使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-go-mod%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.2.1 go mod初始化项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E8%B0%83%E7%94%A8%E6%9C%AC%E5%9C%B0%E5%8C%85"><span class="toc-text">2.2.2 调用本地包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-go-mod%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">2.2.3 go mod常用命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-4-%E8%B0%83%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-text">2.2.4 调用第三方包</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-go-mod%E6%96%87%E4%BB%B6"><span class="toc-text">2.3 go.mod文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-go-sum%E6%96%87%E4%BB%B6"><span class="toc-text">2.4 go.sum文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-GO111MODULE"><span class="toc-text">2.5 GO111MODULE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-go-get%E5%92%8Cgo-install%E5%91%BD%E4%BB%A4"><span class="toc-text">2.6 go get和go install命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-text">十二、文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-text">1、读取文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%89%93%E5%BC%80%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6"><span class="toc-text">1.1 打开关闭文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-text">1.2 读取文件内容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-%E8%BE%83%E4%B8%BA%E5%BA%95%E5%B1%82%E6%96%B9%E6%B3%95"><span class="toc-text">1.2.1 较为底层方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-%E7%A8%8D%E6%98%BE%E4%BC%98%E9%9B%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">1.2.2 稍显优雅的方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-3-%E6%9B%B4%E7%AE%80%E6%B4%81%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">1.2.3 更简洁的方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-4-%E7%BB%83%E4%B9%A0%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6"><span class="toc-text">1.2.4 练习读取文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-text">2、写入文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E6%A8%A1%E5%BC%8F"><span class="toc-text">2.1 写入文件模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-write%E5%86%99%E5%85%A5%E5%86%85%E5%AE%B9%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-text">2.2 write写入内容到文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-bufio%E5%86%99%E5%85%A5%E5%86%85%E5%AE%B9%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-text">2.3 bufio写入内容到文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-ioutil%E5%86%99%E5%85%A5%E5%86%85%E5%AE%B9%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-text">2.4 ioutil写入内容到文件</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/28/java/Mybatis%E4%BD%BF%E7%94%A8/Mybatis%E4%BD%BF%E7%94%A8/" title="Mybatis使用"><img src="/posts_cover_img/java/Mybatis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis使用"/></a><div class="content"><a class="title" href="/2024/09/28/java/Mybatis%E4%BD%BF%E7%94%A8/Mybatis%E4%BD%BF%E7%94%A8/" title="Mybatis使用">Mybatis使用</a><time datetime="2024-09-27T18:33:26.000Z" title="发表于 2024-09-28 02:33:26">2024-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/28/java/Maven%E4%BD%BF%E7%94%A8/Maven%E4%BD%BF%E7%94%A8/" title="Maven使用"><img src="/posts_cover_img/java/maven.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Maven使用"/></a><div class="content"><a class="title" href="/2024/09/28/java/Maven%E4%BD%BF%E7%94%A8/Maven%E4%BD%BF%E7%94%A8/" title="Maven使用">Maven使用</a><time datetime="2024-09-27T18:23:10.000Z" title="发表于 2024-09-28 02:23:10">2024-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/22/java/java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" title="Java基础语法"><img src="/posts_cover_img/java/java_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础语法"/></a><div class="content"><a class="title" href="/2024/09/22/java/java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" title="Java基础语法">Java基础语法</a><time datetime="2024-09-22T07:08:33.000Z" title="发表于 2024-09-22 15:08:33">2024-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/17/golang/kafka%E4%BD%BF%E7%94%A8/kafka%E4%BD%BF%E7%94%A8/" title="kafka使用"><img src="/posts_cover_img/golang/kafka_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kafka使用"/></a><div class="content"><a class="title" href="/2024/09/17/golang/kafka%E4%BD%BF%E7%94%A8/kafka%E4%BD%BF%E7%94%A8/" title="kafka使用">kafka使用</a><time datetime="2024-09-17T01:48:14.000Z" title="发表于 2024-09-17 09:48:14">2024-09-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/11/golang/elasticsearch/elasticsearch%E4%BD%BF%E7%94%A8/" title="elasticsearch使用"><img src="/posts_cover_img/golang/elastic.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="elasticsearch使用"/></a><div class="content"><a class="title" href="/2024/09/11/golang/elasticsearch/elasticsearch%E4%BD%BF%E7%94%A8/" title="elasticsearch使用">elasticsearch使用</a><time datetime="2024-09-11T05:49:03.000Z" title="发表于 2024-09-11 13:49:03">2024-09-11</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/posts_cover_img/golang/go_code.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2024 By 刘阳</div><div class="footer_custom_text">努力终会有回报</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="/pluginsSrc/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>